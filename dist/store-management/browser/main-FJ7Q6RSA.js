var nO=Object.defineProperty,rO=Object.defineProperties;var iO=Object.getOwnPropertyDescriptors;var PC=Object.getOwnPropertySymbols;var oO=Object.prototype.hasOwnProperty,sO=Object.prototype.propertyIsEnumerable;var xC=(t,e,n)=>e in t?nO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})oO.call(e,n)&&xC(t,n,e[n]);if(PC)for(var n of PC(e))sO.call(e,n)&&xC(t,n,e[n]);return t},te=(t,e)=>rO(t,iO(e));var Sg;function Bl(){return Sg}function Bn(t){let e=Sg;return Sg=t,e}var OC=Symbol("NotFound");function qo(t){return t===OC||t?.name==="\u0275NotFound"}var mt=null,$l=!1,Ag=1,aO=null,At=Symbol("SIGNAL");function J(t){let e=mt;return mt=t,e}function Gl(){return mt}var Go={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Wo(t){if($l)throw new Error("");if(mt===null)return;mt.consumerOnSignalRead(t);let e=mt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=mt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:mt.producers,n!==void 0&&n.producer===t)){mt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===mt&&(!r||uO(i,mt)))return;let o=Qo(mt),s={producer:t,consumer:mt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};mt.producersTail=s,e!==void 0?e.nextProducer=s:mt.producers=s,o&&VC(t,s)}function kC(){Ag++}function Wl(t){if(!(Qo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ag)){if(!t.producerMustRecompute(t)&&!Ka(t)){ql(t);return}t.producerRecomputeValue(t),ql(t)}}function Rg(t){if(t.consumers===void 0)return;let e=$l;$l=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||cO(r)}}finally{$l=e}}function Mg(){return mt?.consumerAllowSignalWrites!==!1}function cO(t){t.dirty=!0,Rg(t),t.consumerMarkedDirty?.(t)}function ql(t){t.dirty=!1,t.lastCleanEpoch=Ag}function Ko(t){return t&&FC(t),J(t)}function FC(t){t.producersTail=void 0,t.recomputing=!0}function Wa(t,e){J(e),t&&LC(t)}function LC(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Qo(t))do n=Ng(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Ka(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Wl(n),r!==n.version))return!0}return!1}function Qa(t){if(Qo(t)){let e=t.producers;for(;e!==void 0;)e=Ng(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function VC(t,e){let n=t.consumersTail,r=Qo(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)VC(i.producer,i)}function Ng(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Qo(e)){let o=e.producers;for(;o!==void 0;)o=Ng(o)}return n}function Qo(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Kl(t){aO?.(t)}function uO(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Ql(t,e){return Object.is(t,e)}function Yl(t,e){let n=Object.create(lO);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Wl(n),Wo(n),n.value===Ga)throw n.error;return n.value};return r[At]=n,Kl(n),r}var Hl=Symbol("UNSET"),zl=Symbol("COMPUTING"),Ga=Symbol("ERRORED"),lO=te(L({},Go),{value:Hl,dirty:!0,error:null,equal:Ql,kind:"computed",producerMustRecompute(t){return t.value===Hl||t.value===zl},producerRecomputeValue(t){if(t.value===zl)throw new Error("");let e=t.value;t.value=zl;let n=Ko(t),r,i=!1;try{r=t.computation(),J(null),i=e!==Hl&&e!==Ga&&r!==Ga&&t.equal(e,r)}catch(o){r=Ga,t.error=o}finally{Wa(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function dO(){throw new Error}var jC=dO;function UC(t){jC(t)}function Pg(t){jC=t}var hO=null;function xg(t,e){let n=Object.create(Zl);n.value=t,e!==void 0&&(n.equal=e);let r=()=>BC(n);return r[At]=n,Kl(n),[r,s=>Yo(n,s),s=>Og(n,s)]}function BC(t){return Wo(t),t.value}function Yo(t,e){Mg()||UC(t),t.equal(t.value,e)||(t.value=e,fO(t))}function Og(t,e){Mg()||UC(t),Yo(t,e(t.value))}var Zl=te(L({},Go),{equal:Ql,value:void 0,kind:"signal"});function fO(t){t.version++,kC(),Rg(t),hO?.(t)}function K(t){return typeof t=="function"}function Zo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Xl=Zo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Hi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ke=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(K(r))try{r()}catch(o){e=o instanceof Xl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{$C(o)}catch(s){e=e??[],s instanceof Xl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Xl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)$C(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Hi(n,e)}remove(e){let{_finalizers:n}=this;n&&Hi(n,e),e instanceof t&&e._removeParent(this)}};ke.EMPTY=(()=>{let t=new ke;return t.closed=!0,t})();var kg=ke.EMPTY;function Jl(t){return t instanceof ke||t&&"closed"in t&&K(t.remove)&&K(t.add)&&K(t.unsubscribe)}function $C(t){K(t)?t():t.unsubscribe()}var In={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Xo={setTimeout(t,e,...n){let{delegate:r}=Xo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Xo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ed(t){Xo.setTimeout(()=>{let{onUnhandledError:e}=In;if(e)e(t);else throw t})}function Ya(){}var HC=Fg("C",void 0,void 0);function zC(t){return Fg("E",void 0,t)}function qC(t){return Fg("N",t,void 0)}function Fg(t,e,n){return{kind:t,value:e,error:n}}var zi=null;function Jo(t){if(In.useDeprecatedSynchronousErrorHandling){let e=!zi;if(e&&(zi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=zi;if(zi=null,n)throw r}}else t()}function GC(t){In.useDeprecatedSynchronousErrorHandling&&zi&&(zi.errorThrown=!0,zi.error=t)}var qi=class extends ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Jl(e)&&e.add(this)):this.destination=mO}static create(e,n,r){return new es(e,n,r)}next(e){this.isStopped?Vg(qC(e),this):this._next(e)}error(e){this.isStopped?Vg(zC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Vg(HC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},pO=Function.prototype.bind;function Lg(t,e){return pO.call(t,e)}var jg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){td(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){td(r)}else td(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){td(n)}}},es=class extends qi{constructor(e,n,r){super();let i;if(K(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&In.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Lg(e.next,o),error:e.error&&Lg(e.error,o),complete:e.complete&&Lg(e.complete,o)}):i=e}this.destination=new jg(i)}};function td(t){In.useDeprecatedSynchronousErrorHandling?GC(t):ed(t)}function gO(t){throw t}function Vg(t,e){let{onStoppedNotification:n}=In;n&&Xo.setTimeout(()=>n(t,e))}var mO={closed:!0,next:Ya,error:gO,complete:Ya};var ts=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Yt(t){return t}function Ug(...t){return Bg(t)}function Bg(t){return t.length===0?Yt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Y=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=_O(n)?n:new es(n,r,i);return Jo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=WC(r),new r((i,o)=>{let s=new es({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ts](){return this}pipe(...n){return Bg(n)(this)}toPromise(n){return n=WC(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function WC(t){var e;return(e=t??In.Promise)!==null&&e!==void 0?e:Promise}function yO(t){return t&&K(t.next)&&K(t.error)&&K(t.complete)}function _O(t){return t&&t instanceof qi||yO(t)&&Jl(t)}function $g(t){return K(t?.lift)}function ue(t){return e=>{if($g(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(t,e,n,r,i){return new Hg(t,e,n,r,i)}var Hg=class extends qi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ns(){return ue((t,e)=>{let n=null;t._refCount++;let r=se(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var rs=class extends Y{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,$g(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ke;let n=this.getSubject();e.add(this.source.subscribe(se(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ke.EMPTY)}return e}refCount(){return ns()(this)}};var KC=Zo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class t extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new nd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new KC}next(n){Jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?kg:(this.currentObservers=null,o.push(n),new ke(()=>{this.currentObservers=null,Hi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Y;return n.source=this,n}}return t.create=(e,n)=>new nd(e,n),t})(),nd=class extends Ue{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:kg}};var le=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var zg={now(){return(zg.delegate||Date).now()},delegate:void 0};var rd=class extends ke{constructor(e,n){super()}schedule(e,n=0){return this}};var Za={setInterval(t,e,...n){let{delegate:r}=Za;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Za;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var is=class extends rd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Za.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Za.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Hi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var os=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};os.now=zg.now;var ss=class extends os{constructor(e,n=os.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var qg=new ss(is);var id=class extends is{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var od=class extends ss{};var Gg=new od(id);var kt=new Y(t=>t.complete());function QC(t){return t&&K(t.schedule)}function YC(t){return t[t.length-1]}function sd(t){return K(YC(t))?t.pop():void 0}function ti(t){return QC(YC(t))?t.pop():void 0}function Wg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function XC(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function ZC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gi(t){return this instanceof Gi?(this.v=t,this):new Gi(t)}function JC(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(b){return Promise.resolve(b).then(y,p)}}function a(y,b){r[y]&&(i[y]=function(P){return new Promise(function(O,B){o.push([y,P,O,B])>1||u(y,P)})},b&&(i[y]=b(i[y])))}function u(y,b){try{l(r[y](b))}catch(P){m(o[0][3],P)}}function l(y){y.value instanceof Gi?Promise.resolve(y.value.v).then(f,p):m(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function m(y,b){y(b),o.shift(),o.length&&u(o[0][0],o[0][1])}}function eb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ZC=="function"?ZC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var ad=t=>t&&typeof t.length=="number"&&typeof t!="function";function cd(t){return K(t?.then)}function ud(t){return K(t[ts])}function ld(t){return Symbol.asyncIterator&&K(t?.[Symbol.asyncIterator])}function dd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function vO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var hd=vO();function fd(t){return K(t?.[hd])}function pd(t){return JC(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Gi(n.read());if(i)return yield Gi(void 0);yield yield Gi(r)}}finally{n.releaseLock()}})}function gd(t){return K(t?.getReader)}function Be(t){if(t instanceof Y)return t;if(t!=null){if(ud(t))return EO(t);if(ad(t))return IO(t);if(cd(t))return wO(t);if(ld(t))return tb(t);if(fd(t))return CO(t);if(gd(t))return bO(t)}throw dd(t)}function EO(t){return new Y(e=>{let n=t[ts]();if(K(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function IO(t){return new Y(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function wO(t){return new Y(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ed)})}function CO(t){return new Y(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function tb(t){return new Y(e=>{TO(t,e).catch(n=>e.error(n))})}function bO(t){return tb(pd(t))}function TO(t,e){var n,r,i,o;return XC(this,void 0,void 0,function*(){try{for(n=eb(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Ft(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function ni(t,e=0){return ue((n,r)=>{n.subscribe(se(r,i=>Ft(r,t,()=>r.next(i),e),()=>Ft(r,t,()=>r.complete(),e),i=>Ft(r,t,()=>r.error(i),e)))})}function ri(t,e=0){return ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function nb(t,e){return Be(t).pipe(ri(e),ni(e))}function rb(t,e){return Be(t).pipe(ri(e),ni(e))}function ib(t,e){return new Y(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function ob(t,e){return new Y(n=>{let r;return Ft(n,e,()=>{r=t[hd](),Ft(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>K(r?.return)&&r.return()})}function md(t,e){if(!t)throw new Error("Iterable cannot be null");return new Y(n=>{Ft(n,e,()=>{let r=t[Symbol.asyncIterator]();Ft(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function sb(t,e){return md(pd(t),e)}function ab(t,e){if(t!=null){if(ud(t))return nb(t,e);if(ad(t))return ib(t,e);if(cd(t))return rb(t,e);if(ld(t))return md(t,e);if(fd(t))return ob(t,e);if(gd(t))return sb(t,e)}throw dd(t)}function Ae(t,e){return e?ab(t,e):Be(t)}function q(...t){let e=ti(t);return Ae(t,e)}function vr(t,e){let n=K(t)?t:()=>t,r=i=>i.error(n());return new Y(e?i=>e.schedule(r,0,i):r)}function Kg(t){return!!t&&(t instanceof Y||K(t.lift)&&K(t.subscribe))}var Er=Zo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Z(t,e){return ue((n,r)=>{let i=0;n.subscribe(se(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:DO}=Array;function SO(t,e){return DO(e)?t(...e):t(e)}function yd(t){return Z(e=>SO(t,e))}var{isArray:AO}=Array,{getPrototypeOf:RO,prototype:MO,keys:NO}=Object;function _d(t){if(t.length===1){let e=t[0];if(AO(e))return{args:e,keys:null};if(PO(e)){let n=NO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function PO(t){return t&&typeof t=="object"&&RO(t)===MO}function vd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ed(...t){let e=ti(t),n=sd(t),{args:r,keys:i}=_d(t);if(r.length===0)return Ae([],e);let o=new Y(xO(r,e,i?s=>vd(i,s):Yt));return n?o.pipe(yd(n)):o}function xO(t,e,n=Yt){return r=>{cb(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)cb(e,()=>{let l=Ae(t[u],e),f=!1;l.subscribe(se(r,p=>{o[u]=p,f||(f=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function cb(t,e,n){t?Ft(n,t,e):e()}function ub(t,e,n,r,i,o,s,a){let u=[],l=0,f=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=P=>l<r?b(P):u.push(P),b=P=>{o&&e.next(P),l++;let O=!1;Be(n(P,f++)).subscribe(se(e,B=>{i?.(B),o?y(B):e.next(B)},()=>{O=!0},void 0,()=>{if(O)try{for(l--;u.length&&l<r;){let B=u.shift();s?Ft(e,s,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return t.subscribe(se(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Qe(t,e,n=1/0){return K(e)?Qe((r,i)=>Z((o,s)=>e(r,o,i,s))(Be(t(r,i))),n):(typeof e=="number"&&(n=e),ue((r,i)=>ub(r,i,t,n)))}function lb(t=1/0){return Qe(Yt,t)}function db(){return lb(1)}function as(...t){return db()(Ae(t,ti(t)))}function Xa(t){return new Y(e=>{Be(t()).subscribe(e)})}function Qg(...t){let e=sd(t),{args:n,keys:r}=_d(t),i=new Y(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;Be(n[f]).subscribe(se(o,m=>{p||(p=!0,l--),a[f]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?vd(r,a):a),o.complete())}))}});return e?i.pipe(yd(e)):i}function sn(t,e){return ue((n,r)=>{let i=0;n.subscribe(se(r,o=>t.call(e,o,i++)&&r.next(o)))})}function wn(t){return ue((e,n)=>{let r=null,i=!1,o;r=e.subscribe(se(n,void 0,void 0,s=>{o=Be(t(s,wn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function hb(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(se(s,f=>{let p=l++;u=a?t(u,f,p):(a=!0,f),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function cs(t,e){return K(e)?Qe(t,e,1):Qe(t,1)}function ii(t){return ue((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function an(t){return t<=0?()=>kt:ue((e,n)=>{let r=0;e.subscribe(se(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Id(t=OO){return ue((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function OO(){return new Er}function $n(t){return ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Ir(t,e){let n=arguments.length>=2;return r=>r.pipe(t?sn((i,o)=>t(i,o,r)):Yt,an(1),n?ii(e):Id(()=>new Er))}function us(t){return t<=0?()=>kt:ue((e,n)=>{let r=[];e.subscribe(se(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Yg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?sn((i,o)=>t(i,o,r)):Yt,us(1),n?ii(e):Id(()=>new Er))}function Zg(t,e){return ue(hb(t,e,arguments.length>=2,!0))}function Xg(...t){let e=ti(t);return ue((n,r)=>{(e?as(t,n,e):as(t,n)).subscribe(r)})}function Lt(t,e){return ue((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(se(r,u=>{i?.unsubscribe();let l=0,f=o++;Be(t(u,f)).subscribe(i=se(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function wd(t){return ue((e,n)=>{Be(t).subscribe(se(n,()=>n.complete(),Ya)),!n.closed&&e.subscribe(n)})}function et(t,e,n){let r=K(t)||e||n?{next:t,error:e,complete:n}:t;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(se(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Yt}function fb(t){let e=J(null);try{return t()}finally{J(e)}}var Ki=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},dm=new Ki("20.3.15");var Dd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",V=class extends Error{code;constructor(e,n){super(ds(e,n)),this.code=e}};function kO(t){return`NG0${Math.abs(t)}`}function ds(t,e){return`${kO(t)}${e?": "+e:""}`}var Tr=globalThis;function Ee(t){for(let e in t)if(t[e]===Ee)return e;throw Error("")}function mb(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Cr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Cr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function hm(t,e){return t?e?`${t} ${e}`:t:e||""}var FO=Ee({__forward_ref__:Ee});function ai(t){return t.__forward_ref__=ai,t.toString=function(){return Cr(this())},t}function st(t){return fm(t)?t():t}function fm(t){return typeof t=="function"&&t.hasOwnProperty(FO)&&t.__forward_ref__===ai}function U(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function zn(t){return{providers:t.providers||[],imports:t.imports||[]}}function nc(t){return LO(t,Sd)}function pm(t){return nc(t)!==null}function LO(t,e){return t.hasOwnProperty(e)&&t[e]||null}function VO(t){let e=t?.[Sd]??null;return e||null}function em(t){return t&&t.hasOwnProperty(bd)?t[bd]:null}var Sd=Ee({\u0275prov:Ee}),bd=Ee({\u0275inj:Ee}),j=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=U({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function gm(t){return t&&!!t.\u0275providers}var mm=Ee({\u0275cmp:Ee}),ym=Ee({\u0275dir:Ee}),_m=Ee({\u0275pipe:Ee}),vm=Ee({\u0275mod:Ee}),ec=Ee({\u0275fac:Ee}),Xi=Ee({__NG_ELEMENT_ID__:Ee}),pb=Ee({__NG_ENV_ID__:Ee});function Ji(t){return typeof t=="string"?t:t==null?"":String(t)}function yb(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ji(t)}var _b=Ee({ngErrorCode:Ee}),jO=Ee({ngErrorMessage:Ee}),UO=Ee({ngTokenPath:Ee});function Em(t,e){return vb("",-200,e)}function Ad(t,e){throw new V(-201,!1)}function vb(t,e,n){let r=new V(e,t);return r[_b]=e,r[jO]=t,n&&(r[UO]=n),r}function BO(t){return t[_b]}var tm;function Eb(){return tm}function Rt(t){let e=tm;return tm=t,e}function Im(t,e,n){let r=nc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Ad(t,"Injector")}var $O={},Wi=$O,nm="__NG_DI_FLAG__",rm=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Qi(n)||0;try{return this.injector.get(e,r&8?null:Wi,r)}catch(i){if(qo(i))return i;throw i}}};function HO(t,e=0){let n=Bl();if(n===void 0)throw new V(-203,!1);if(n===null)return Im(t,void 0,e);{let r=zO(e),i=n.retrieve(t,r);if(qo(i)){if(r.optional)return null;throw i}return i}}function G(t,e=0){return(Eb()||HO)(st(t),e)}function A(t,e){return G(t,Qi(e))}function Qi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function zO(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function im(t){let e=[];for(let n=0;n<t.length;n++){let r=st(t[n]);if(Array.isArray(r)){if(r.length===0)throw new V(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=qO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(G(i,o))}else e.push(G(r))}return e}function Ib(t,e){return t[nm]=e,t.prototype[nm]=e,t}function qO(t){return t[nm]}function oi(t,e){let n=t.hasOwnProperty(ec);return n?t[ec]:null}function Rd(t,e){t.forEach(n=>Array.isArray(n)?Rd(n,e):e(n))}function wm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function rc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function wb(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Cb(t,e,n){let r=hs(t,e);return r>=0?t[r|1]=n:(r=~r,wb(t,r,e,n)),r}function Md(t,e){let n=hs(t,e);if(n>=0)return t[n|1]}function hs(t,e){return GO(t,e,1)}function GO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var ci={},Zt=[],Dr=new j(""),Cm=new j("",-1),bm=new j(""),tc=class{get(e,n=Wi){if(n===Wi){let i=vb("",-201);throw i.name="\u0275NotFound",i}return n}};function Tm(t){return t[vm]||null}function ui(t){return t[mm]||null}function Dm(t){return t[ym]||null}function bb(t){return t[_m]||null}function Mt(t){return{\u0275providers:t}}function Tb(t){return Mt([{provide:Dr,multi:!0,useValue:t}])}function Db(...t){return{\u0275providers:Sm(!0,t),\u0275fromNgModule:!0}}function Sm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Rd(e,s=>{let a=s;Td(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Sb(i,o),n}function Sb(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Am(i,o=>{e(o,r)})}}function Td(t,e,n,r){if(t=st(t),!t)return!1;let i=null,o=em(t),s=!o&&ui(t);if(!o&&!s){let u=t.ngModule;if(o=em(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Td(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Rd(o.imports,f=>{Td(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&Sb(l,e)}if(!a){let l=oi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Zt},i),e({provide:bm,useValue:i,multi:!0},i),e({provide:Dr,useValue:()=>G(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Am(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Am(t,e){for(let n of t)gm(n)&&(n=n.\u0275providers),Array.isArray(n)?Am(n,e):e(n)}var WO=Ee({provide:String,useValue:Ee});function Ab(t){return t!==null&&typeof t=="object"&&WO in t}function KO(t){return!!(t&&t.useExisting)}function QO(t){return!!(t&&t.useFactory)}function Yi(t){return typeof t=="function"}function Rb(t){return!!t.useClass}var ic=new j(""),Cd={},gb={},Jg;function oc(){return Jg===void 0&&(Jg=new tc),Jg}var $e=class{},Zi=class extends $e{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,sm(e,s=>this.processProvider(s)),this.records.set(Cm,ls(void 0,this)),i.has("environment")&&this.records.set($e,ls(void 0,this));let o=this.records.get(ic);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(bm,Zt,{self:!0}))}retrieve(e,n){let r=Qi(n)||0;try{return this.get(e,Wi,r)}catch(i){if(qo(i))return i;throw i}}destroy(){Ja(this),this._destroyed=!0;let e=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return Ja(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ja(this);let n=Bn(this),r=Rt(void 0),i;try{return e()}finally{Bn(n),Rt(r)}}get(e,n=Wi,r){if(Ja(this),e.hasOwnProperty(pb))return e[pb](this);let i=Qi(r),o,s=Bn(this),a=Rt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let f=e1(e)&&nc(e);f&&this.injectableDefInScope(f)?l=ls(om(e),Cd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?oc():this.parent;return n=i&8&&n===Wi?null:n,u.get(e,n)}catch(u){let l=BO(u);throw l===-200||l===-201?new V(l,null):u}finally{Rt(a),Bn(s)}}resolveInjectorInitializers(){let e=J(null),n=Bn(this),r=Rt(void 0),i;try{let o=this.get(Dr,Zt,{self:!0});for(let s of o)s()}finally{Bn(n),Rt(r),J(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Cr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=st(e);let n=Yi(e)?e:st(e&&e.provide),r=ZO(e);if(!Yi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ls(void 0,Cd,!0),i.factory=()=>im(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=J(null);try{if(n.value===gb)throw Em(Cr(e));return n.value===Cd&&(n.value=gb,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&JO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{J(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=st(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function om(t){let e=nc(t),n=e!==null?e.factory:oi(t);if(n!==null)return n;if(t instanceof j)throw new V(204,!1);if(t instanceof Function)return YO(t);throw new V(204,!1)}function YO(t){if(t.length>0)throw new V(204,!1);let n=VO(t);return n!==null?()=>n.factory(t):()=>new t}function ZO(t){if(Ab(t))return ls(void 0,t.useValue);{let e=Rm(t);return ls(e,Cd)}}function Rm(t,e,n){let r;if(Yi(t)){let i=st(t);return oi(i)||om(i)}else if(Ab(t))r=()=>st(t.useValue);else if(QO(t))r=()=>t.useFactory(...im(t.deps||[]));else if(KO(t))r=(i,o)=>G(st(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=st(t&&(t.useClass||t.provide));if(XO(t))r=()=>new i(...im(t.deps));else return oi(i)||om(i)}return r}function Ja(t){if(t.destroyed)throw new V(205,!1)}function ls(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function XO(t){return!!t.deps}function JO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function e1(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function sm(t,e){for(let n of t)Array.isArray(n)?sm(n,e):n&&gm(n)?sm(n.\u0275providers,e):e(n)}function Ye(t,e){let n;t instanceof Zi?(Ja(t),n=t):n=new rm(t);let r,i=Bn(n),o=Rt(void 0);try{return e()}finally{Bn(i),Rt(o)}}function Mb(){return Eb()!==void 0||Bl()!=null}var Cn=0,X=1,Q=2,at=3,cn=4,un=5,sc=6,fs=7,yt=8,li=9,qn=10,He=11,ps=12,Mm=13,eo=14,ln=15,to=16,no=17,ro=18,ac=19,Nm=20,wr=21,Nd=22,cc=23,Xt=24,Pd=25,uc=26,_t=27,Nb=1;var di=7,lc=8,dc=9,Vt=10;function Gn(t){return Array.isArray(t)&&typeof t[Nb]=="object"}function bn(t){return Array.isArray(t)&&t[Nb]===!0}function Pm(t){return(t.flags&4)!==0}function hi(t){return t.componentOffset>-1}function hc(t){return(t.flags&1)===1}function Wn(t){return!!t.template}function gs(t){return(t[Q]&512)!==0}function io(t){return(t[Q]&256)===256}var Pb="svg",xb="math";function dn(t){for(;Array.isArray(t);)t=t[Cn];return t}function xm(t,e){return dn(e[t])}function Tn(t,e){return dn(e[t.index])}function xd(t,e){return t.data[e]}function Om(t,e){return t[e]}function km(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function hn(t,e){let n=e[t];return Gn(n)?n:n[Cn]}function Od(t){return(t[Q]&128)===128}function Ob(t){return bn(t[at])}function fc(t,e){return e==null?null:t[e]}function Fm(t){t[no]=0}function Lm(t){t[Q]&1024||(t[Q]|=1024,Od(t)&&gc(t))}function kb(t,e){for(;t>0;)e=e[eo],t--;return e}function pc(t){return!!(t[Q]&9216||t[Xt]?.dirty)}function kd(t){t[qn].changeDetectionScheduler?.notify(8),t[Q]&64&&(t[Q]|=1024),pc(t)&&gc(t)}function gc(t){t[qn].changeDetectionScheduler?.notify(0);let e=si(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!Od(e)));)e=si(e)}function Vm(t,e){if(io(t))throw new V(911,!1);t[wr]===null&&(t[wr]=[]),t[wr].push(e)}function Fb(t,e){if(t[wr]===null)return;let n=t[wr].indexOf(e);n!==-1&&t[wr].splice(n,1)}function si(t){let e=t[at];return bn(e)?e[at]:e}function Lb(t){return t[fs]??=[]}function Vb(t){return t.cleanup??=[]}var ne={lFrame:eT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var am=!1;function jb(){return ne.lFrame.elementDepthCount}function Ub(){ne.lFrame.elementDepthCount++}function Bb(){ne.lFrame.elementDepthCount--}function jm(){return ne.bindingsEnabled}function $b(){return ne.skipHydrationRootTNode!==null}function Hb(t){return ne.skipHydrationRootTNode===t}function zb(){ne.skipHydrationRootTNode=null}function we(){return ne.lFrame.lView}function fn(){return ne.lFrame.tView}function mc(t){return ne.lFrame.contextLView=t,t[yt]}function yc(t){return ne.lFrame.contextLView=null,t}function jt(){let t=Um();for(;t!==null&&t.type===64;)t=t.parent;return t}function Um(){return ne.lFrame.currentTNode}function qb(){let t=ne.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ms(t,e){let n=ne.lFrame;n.currentTNode=t,n.isParent=e}function Bm(){return ne.lFrame.isParent}function Gb(){ne.lFrame.isParent=!1}function $m(){return am}function Hm(t){let e=am;return am=t,e}function zm(){let t=ne.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Wb(){return ne.lFrame.bindingIndex}function Kb(t){return ne.lFrame.bindingIndex=t}function Fd(){return ne.lFrame.bindingIndex++}function qm(t){let e=ne.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Qb(){return ne.lFrame.inI18n}function Yb(t,e){let n=ne.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ld(e)}function Zb(){return ne.lFrame.currentDirectiveIndex}function Ld(t){ne.lFrame.currentDirectiveIndex=t}function Xb(t){let e=ne.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Gm(t){ne.lFrame.currentQueryIndex=t}function t1(t){let e=t[X];return e.type===2?e.declTNode:e.type===1?t[un]:null}function Wm(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=t1(o),i===null||(o=o[eo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ne.lFrame=Jb();return r.currentTNode=e,r.lView=t,!0}function Vd(t){let e=Jb(),n=t[X];ne.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Jb(){let t=ne.lFrame,e=t===null?null:t.child;return e===null?eT(t):e}function eT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function tT(){let t=ne.lFrame;return ne.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Km=tT;function jd(){let t=tT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function nT(t){return(ne.lFrame.contextLView=kb(t,ne.lFrame.contextLView))[yt]}function fi(){return ne.lFrame.selectedIndex}function pi(t){ne.lFrame.selectedIndex=t}function Qm(){let t=ne.lFrame;return xd(t.tView,t.selectedIndex)}function rT(){return ne.lFrame.currentNamespace}var iT=!0;function Ud(){return iT}function Bd(t){iT=t}function cm(t,e=null,n=null,r){let i=Ym(t,e,n,r);return i.resolveInjectorInitializers(),i}function Ym(t,e=null,n=null,r,i=new Set){let o=[n||Zt,Db(t)];return r=r||(typeof t=="object"?void 0:Cr(t)),new Zi(o,e||oc(),r||null,i)}var je=class t{static THROW_IF_NOT_FOUND=Wi;static NULL=new tc;static create(e,n){if(Array.isArray(e))return cm({name:""},n,e,"");{let r=e.name??"";return cm({name:r},e.parent,e.providers,r)}}static \u0275prov=U({token:t,providedIn:"any",factory:()=>G(Cm)});static __NG_ELEMENT_ID__=-1},tt=new j(""),Sr=(()=>{class t{static __NG_ELEMENT_ID__=n1;static __NG_ENV_ID__=n=>n}return t})(),um=class extends Sr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return io(this._lView)}onDestroy(e){let n=this._lView;return Vm(n,e),()=>Fb(n,e)}};function n1(){return new um(we())}var Hn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},vt=new j("",{providedIn:"root",factory:()=>{let t=A($e),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Hn),e.handleError(n))}}}),oT={provide:Dr,useValue:()=>void A(Hn),multi:!0},r1=new j("",{providedIn:"root",factory:()=>{let t=A(tt).defaultView;if(!t)return;let e=A(vt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),A(Sr).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Zm(){return Mt([Tb(()=>void A(r1))])}function Ut(t,e){let[n,r,i]=xg(t,e?.equal),o=n,s=o[At];return o.set=r,o.update=i,o.asReadonly=sT.bind(o),o}function sT(){let t=this[At];if(t.readonlyFn===void 0){let e=()=>this();e[At]=t,t.readonlyFn=e}return t.readonlyFn}var br=class{},_c=new j("",{providedIn:"root",factory:()=>!1});var Xm=new j(""),$d=new j(""),Kn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new le(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Y(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})(),ys=(()=>{class t{internalPendingTasks=A(Kn);scheduler=A(br);errorHandler=A(vt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})();function vc(...t){}var Jm=(()=>{class t{static \u0275prov=U({token:t,providedIn:"root",factory:()=>new lm})}return t})(),lm=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function bs(t){return{toString:t}.toString()}var Hd="__parameters__";function f1(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function p1(t,e,n){return bs(()=>{let r=f1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,f){let p=u.hasOwnProperty(Hd)?u[Hd]:Object.defineProperty(u,Hd,{value:[]})[Hd];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var nt=Ib(p1("Optional"),8);function g1(t){return typeof t=="function"}var Yd=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function jT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Rr=(()=>{let t=()=>UT;return t.ngInherit=!0,t})();function UT(t){return t.type.prototype.ngOnChanges&&(t.setInput=y1),m1}function m1(){let t=$T(this),e=t?.current;if(e){let n=t.previous;if(n===ci)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function y1(t,e,n,r,i){let o=this.declaredInputs[r],s=$T(t)||_1(t,{previous:ci,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Yd(l&&l.currentValue,n,u===ci),jT(t,e,i,n)}var BT="__ngSimpleChanges__";function $T(t){return t[BT]||null}function _1(t,e){return t[BT]=e}var aT=[];var Te=function(t,e=null,n){for(let r=0;r<aT.length;r++){let i=aT[r];i(t,e,n)}};function v1(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=UT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function HT(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Wd(t,e,n){zT(t,e,3,n)}function Kd(t,e,n,r){(t[Q]&3)===n&&zT(t,e,n,r)}function ey(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function zT(t,e,n,r){let i=r!==void 0?t[no]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[no]+=65536),(a<o||o==-1)&&(E1(t,n,e,u),t[no]=(t[no]&4294901760)+u+2),u++}function cT(t,e){Te(4,t,e);let n=J(null);try{e.call(t)}finally{J(n),Te(5,t,e)}}function E1(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[Q]>>14<t[no]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,cT(a,o)):cT(a,o)}var vs=-1,so=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function I1(t){return(t.flags&8)!==0}function w1(t){return(t.flags&16)!==0}function C1(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];b1(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function qT(t){return t===3||t===4||t===6}function b1(t){return t.charCodeAt(0)===64}function wc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?uT(t,n,i,null,e[++r]):uT(t,n,i,null,null))}}return t}function uT(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function GT(t){return t!==vs}function Zd(t){return t&32767}function T1(t){return t>>16}function Xd(t,e){let n=T1(t),r=e;for(;n>0;)r=r[eo],n--;return r}var dy=!0;function Jd(t){let e=dy;return dy=t,e}var D1=256,WT=D1-1,KT=5,S1=0,Qn={};function A1(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Xi)&&(r=n[Xi]),r==null&&(r=n[Xi]=S1++);let i=r&WT,o=1<<i;e.data[t+(i>>KT)]|=o}function eh(t,e){let n=QT(t,e);if(n!==-1)return n;let r=e[X];r.firstCreatePass&&(t.injectorIndex=e.length,ty(r.data,t),ty(e,null),ty(r.blueprint,null));let i=My(t,e),o=t.injectorIndex;if(GT(i)){let s=Zd(i),a=Xd(i,e),u=a[X].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function ty(t,e){t.push(0,0,0,0,0,0,0,0,e)}function QT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function My(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=e0(i),r===null)return vs;if(n++,i=i[eo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return vs}function hy(t,e,n){A1(t,e,n)}function R1(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(qT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function YT(t,e,n){if(n&8||t!==void 0)return t;Ad(e,"NodeInjector")}function ZT(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[li],o=Rt(void 0);try{return i?i.get(e,r,n&8):Im(e,r,n&8)}finally{Rt(o)}}return YT(r,e,n)}function XT(t,e,n,r=0,i){if(t!==null){if(e[Q]&2048&&!(r&2)){let s=O1(t,e,n,r,Qn);if(s!==Qn)return s}let o=JT(t,e,n,r,Qn);if(o!==Qn)return o}return ZT(e,n,r,i)}function JT(t,e,n,r,i){let o=P1(n);if(typeof o=="function"){if(!Wm(e,t,r))return r&1?YT(i,n,r):ZT(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ad(n);else return s}finally{Km()}}else if(typeof o=="number"){let s=null,a=QT(t,e),u=vs,l=r&1?e[ln][un]:null;for((a===-1||r&4)&&(u=a===-1?My(t,e):e[a+8],u===vs||!dT(r,!1)?a=-1:(s=e[X],a=Zd(u),e=Xd(u,e)));a!==-1;){let f=e[X];if(lT(o,a,f.data)){let p=M1(a,e,n,s,r,l);if(p!==Qn)return p}u=e[a+8],u!==vs&&dT(r,e[X].data[a+8]===l)&&lT(o,a,e)?(s=f,a=Zd(u),e=Xd(u,e)):a=-1}}return i}function M1(t,e,n,r,i,o){let s=e[X],a=s.data[t+8],u=r==null?hi(a)&&dy:r!=s&&(a.type&3)!==0,l=i&1&&o===a,f=N1(a,s,n,u,l);return f!==null?th(e,s,f,a,i):Qn}function N1(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,f=o>>20,p=r?a:a+f,m=i?a+f:l;for(let y=p;y<m;y++){let b=s[y];if(y<u&&n===b||y>=u&&b.type===n)return y}if(i){let y=s[u];if(y&&Wn(y)&&y.type===n)return u}return null}function th(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof so){let a=o;if(a.resolving){let y=yb(s[n]);throw Em(y)}let u=Jd(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],f,p=a.injectImpl?Rt(a.injectImpl):null,m=Wm(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&v1(n,s[n],e)}finally{p!==null&&Rt(p),Jd(u),a.resolving=!1,Km()}}return o}function P1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Xi)?t[Xi]:void 0;return typeof e=="number"?e>=0?e&WT:x1:e}function lT(t,e,n){let r=1<<t;return!!(n[e+(t>>KT)]&r)}function dT(t,e){return!(t&2)&&!(t&1&&e)}var oo=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return XT(this._tNode,this._lView,e,Qi(r),n)}};function x1(){return new oo(jt(),we())}function Ts(t){return bs(()=>{let e=t.prototype.constructor,n=e[ec]||fy(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[ec]||fy(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function fy(t){return fm(t)?()=>{let e=fy(st(t));return e&&e()}:oi(t)}function O1(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Q]&2048&&!gs(s);){let a=JT(o,s,n,r|2,Qn);if(a!==Qn)return a;let u=o.parent;if(!u){let l=s[Nm];if(l){let f=l.get(n,Qn,r);if(f!==Qn)return f}u=e0(s),s=s[eo]}o=u}return i}function e0(t){let e=t[X],n=e.type;return n===2?e.declTNode:n===1?t[un]:null}function Sc(t){return R1(jt(),t)}function k1(){return dh(jt(),we())}function dh(t,e){return new Mr(Tn(t,e))}var Mr=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=k1}return t})();function t0(t){return(t.flags&128)===128}var Ny=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Ny||{}),n0=new Map,F1=0;function L1(){return F1++}function V1(t){n0.set(t[ac],t)}function py(t){n0.delete(t[ac])}var hT="__ngContext__";function Es(t,e){Gn(e)?(t[hT]=e[ac],V1(e)):t[hT]=e}function r0(t){return o0(t[ps])}function i0(t){return o0(t[cn])}function o0(t){for(;t!==null&&!bn(t);)t=t[cn];return t}var gy;function Py(t){gy=t}function s0(){if(gy!==void 0)return gy;if(typeof document<"u")return document;throw new V(210,!1)}var hh=new j("",{providedIn:"root",factory:()=>j1}),j1="ng",fh=new j(""),ho=new j("",{providedIn:"platform",factory:()=>"unknown"});var ph=new j("",{providedIn:"root",factory:()=>s0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var U1="h",B1="b";var a0=!1,c0=new j("",{providedIn:"root",factory:()=>a0});var $1=(t,e,n,r)=>{};function H1(t,e,n,r){$1(t,e,n,r)}function xy(t){return(t.flags&32)===32}var z1=()=>null;function u0(t,e,n=!1){return z1(t,e,n)}function l0(t,e){let n=t.contentQueries;if(n!==null){let r=J(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Gm(o),a.contentQueries(2,e[s],s)}}}finally{J(r)}}}function my(t,e,n){Gm(0);let r=J(null);try{e(t,n)}finally{J(r)}}function d0(t,e,n){if(Pm(e)){let r=J(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{J(r)}}}var Ar=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(Ar||{});var zd;function q1(){if(zd===void 0&&(zd=null,Tr.trustedTypes))try{zd=Tr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return zd}function fT(t){return q1()?.createScriptURL(t)||t}var nh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Dd})`}};function gh(t){return t instanceof nh?t.changingThisBreaksApplicationSecurity:t}function Oy(t,e){let n=h0(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Dd})`)}return n===e}function h0(t){return t instanceof nh&&t.getTypeName()||null}var G1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function f0(t){return t=String(t),t.match(G1)?t:"unsafe:"+t}function W1(t,e){return t.createText(e)}function K1(t,e,n){t.setValue(e,n)}function p0(t,e,n){return t.createElement(e,n)}function rh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function g0(t,e,n){t.appendChild(e,n)}function pT(t,e,n,r,i){r!==null?rh(t,e,n,r,i):g0(t,e,n)}function Q1(t,e,n,r){t.removeChild(null,e,n,r)}function Y1(t,e,n){t.setAttribute(e,"style",n)}function Z1(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function m0(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&C1(t,e,r),i!==null&&Z1(t,e,i),o!==null&&Y1(t,e,o)}var mh=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(mh||{});function y0(t){let e=v0();return e?e.sanitize(mh.URL,t)||"":Oy(t,"URL")?gh(t):f0(Ji(t))}function _0(t){let e=v0();if(e)return fT(e.sanitize(mh.RESOURCE_URL,t)||"");if(Oy(t,"ResourceURL"))return fT(gh(t));throw new V(904,!1)}function X1(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?_0:y0}function ky(t,e,n){return X1(e,n)(t)}function v0(){let t=we();return t&&t[qn].sanitizer}function E0(t){return t instanceof Function?t():t}function J1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var I0="ng-template";function ek(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&J1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Fy(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Fy(t){return t.type===4&&t.value!==I0}function tk(t,e,n){let r=t.type===4&&!n?I0:t.value;return e===r}function nk(t,e,n){let r=4,i=t.attrs,o=i!==null?ok(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Dn(r)&&!Dn(u))return!1;if(s&&Dn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!tk(t,u,n)||u===""&&e.length===1){if(Dn(r))return!1;s=!0}}else if(r&8){if(i===null||!ek(t,i,u,n)){if(Dn(r))return!1;s=!0}}else{let l=e[++a],f=rk(u,i,Fy(t),n);if(f===-1){if(Dn(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(Dn(r))return!1;s=!0}}}}return Dn(r)||s}function Dn(t){return(t&1)===0}function rk(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return sk(e,t)}function ik(t,e,n=!1){for(let r=0;r<e.length;r++)if(nk(t,e[r],n))return!0;return!1}function ok(t){for(let e=0;e<t.length;e++){let n=t[e];if(qT(n))return e}return t.length}function sk(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function gT(t,e){return t?":not("+e.trim()+")":e}function ak(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Dn(s)&&(e+=gT(o,i),i=""),r=s,o=o||!Dn(r);n++}return i!==""&&(e+=gT(o,i)),e}function ck(t){return t.map(ak).join(",")}function uk(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Dn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Sn={};function Ly(t,e,n,r,i,o,s,a,u,l,f){let p=_t+r,m=p+i,y=lk(p,m),b=typeof l=="function"?l():l;return y[X]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:f}}function lk(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Sn);return n}function dk(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ly(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Vy(t,e,n,r,i,o,s,a,u,l,f){let p=e.blueprint.slice();return p[Cn]=i,p[Q]=r|4|128|8|64|1024,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),Fm(p),p[at]=p[eo]=t,p[yt]=n,p[qn]=s||t&&t[qn],p[He]=a||t&&t[He],p[li]=u||t&&t[li]||null,p[un]=o,p[ac]=L1(),p[sc]=f,p[Nm]=l,p[ln]=e.type==2?t[ln]:p,p}function hk(t,e,n){let r=Tn(e,t),i=dk(n),o=t[qn].rendererFactory,s=jy(t,Vy(t,i,null,w0(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function w0(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function C0(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function jy(t,e){return t[ps]?t[Mm][cn]=e:t[ps]=e,t[Mm]=e,e}function k(t=1){b0(fn(),we(),fi()+t,!1)}function b0(t,e,n,r){if(!r)if((e[Q]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Wd(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Kd(e,o,0,n)}pi(n)}var yh=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(yh||{});function yy(t,e,n,r){let i=J(null);try{let[o,s,a]=t.inputs[n],u=null;(s&yh.SignalBased)!==0&&(u=e[o][At]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):jT(e,u,o,r)}finally{J(i)}}var Yn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Yn||{}),fk;function Uy(t,e){return fk(t,e)}var Is=new Set,By=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(By||{}),Ac=new j(""),mT=new Set;function _h(t){mT.has(t)||(mT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var T0=!1,_y=class extends Ue{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Mb()&&(this.destroyRef=A(Sr,{optional:!0})??void 0,this.pendingTasks=A(Kn,{optional:!0})??void 0)}emit(e){let n=J(null);try{super.next(e)}finally{J(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ke&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ze=_y;function D0(t){let e,n;function r(){t=vc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function yT(t){return queueMicrotask(()=>t()),()=>{t=vc}}var $y="isAngularZone",ih=$y+"_ID",pk=0,ye=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ze(!1);onMicrotaskEmpty=new ze(!1);onStable=new ze(!1);onError=new ze(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=T0}=e;if(typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,yk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get($y)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new V(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,gk,vc,vc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},gk={};function Hy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function mk(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){D0(()=>{t.callbackScheduled=!1,vy(t),t.isCheckStableRunning=!0,Hy(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),vy(t)}function yk(t){let e=()=>{mk(t)},n=pk++;t._inner=t._inner.fork({name:"angular",properties:{[$y]:!0,[ih]:n,[ih+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(_k(u))return r.invokeTask(o,s,a,u);try{return _T(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),vT(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return _T(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!vk(u)&&e(),vT(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,vy(t),Hy(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function vy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function _T(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function vT(t){t._nesting--,Hy(t)}var Cc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ze;onMicrotaskEmpty=new ze;onStable=new ze;onError=new ze;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function _k(t){return S0(t,"__ignore_ng_zone__")}function vk(t){return S0(t,"__scheduler_tick__")}function S0(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var A0=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})();var Ek=new j("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function R0(t,e,n){let r=t.get(Ek);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function Ik(t,e){for(let[n,r]of e)R0(t,r.animateFns)}function ET(t,e,n,r){let i=t?.[uc]?.enter;e!==null&&i&&i.has(n.index)&&Ik(r,i)}function _s(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;bn(i)?u=i:Gn(i)&&(l=!0,i=i[Cn]);let f=dn(i);t===0&&r!==null?(ET(a,r,o,n),s==null?g0(e,r,f):rh(e,r,f,s||null,!0)):t===1&&r!==null?(ET(a,r,o,n),rh(e,r,f,s||null,!0)):t===2?IT(a,o,n,p=>{Q1(e,f,l,p)}):t===3&&IT(a,o,n,()=>{e.destroyNode(f)}),u!=null&&Ok(e,t,n,u,o,r,s)}}function wk(t,e){M0(t,e),e[Cn]=null,e[un]=null}function Ck(t,e,n,r,i,o){r[Cn]=i,r[un]=e,vh(t,r,n,1,i,o)}function M0(t,e){e[qn].changeDetectionScheduler?.notify(9),vh(t,e,e[He],2,null,null)}function bk(t){let e=t[ps];if(!e)return ny(t[X],t);for(;e;){let n=null;if(Gn(e))n=e[ps];else{let r=e[Vt];r&&(n=r)}if(!n){for(;e&&!e[cn]&&e!==t;)Gn(e)&&ny(e[X],e),e=e[at];e===null&&(e=t),Gn(e)&&ny(e[X],e),n=e&&e[cn]}e=n}}function zy(t,e){let n=t[dc],r=n.indexOf(e);n.splice(r,1)}function N0(t,e){if(io(e))return;let n=e[He];n.destroyNode&&vh(t,e,n,3,null,null),bk(e)}function ny(t,e){if(io(e))return;let n=J(null);try{e[Q]&=-129,e[Q]|=256,e[Xt]&&Qa(e[Xt]),Sk(t,e),Dk(t,e),e[X].type===1&&e[He].destroy();let r=e[to];if(r!==null&&bn(e[at])){r!==e[at]&&zy(r,e);let i=e[ro];i!==null&&i.detachView(t)}py(e)}finally{J(n)}}function IT(t,e,n,r){let i=t?.[uc];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Is.add(t),R0(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:f}=l();a.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),Tk(t,r)}else t&&Is.delete(t),r(!1)},i)}function Tk(t,e){let n=t[uc]?.running;if(n){n.then(()=>{t[uc].running=void 0,Is.delete(t),e(!0)});return}e(!1)}function Dk(t,e){let n=t.cleanup,r=e[fs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[fs]=null);let i=e[wr];if(i!==null){e[wr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[cc];if(o!==null){e[cc]=null;for(let s of o)s.destroy()}}function Sk(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof so)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Te(4,a,u);try{u.call(a)}finally{Te(5,a,u)}}else{Te(4,i,o);try{o.call(i)}finally{Te(5,i,o)}}}}}function Ak(t,e,n){return Rk(t,e.parent,n)}function Rk(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Cn];if(hi(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Ar.None||i===Ar.Emulated)return null}return Tn(r,n)}function Mk(t,e,n){return Pk(t,e,n)}function Nk(t,e,n){return t.type&40?Tn(t,n):null}var Pk=Nk,wT;function qy(t,e,n,r){let i=Ak(t,r,e),o=e[He],s=r.parent||e[un],a=Mk(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)pT(o,i,n[u],a,!1);else pT(o,i,n,a,!1);wT!==void 0&&wT(o,r,e,n,i)}function Ec(t,e){if(e!==null){let n=e.type;if(n&3)return Tn(e,t);if(n&4)return Ey(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ec(t,r);{let i=t[e.index];return bn(i)?Ey(-1,i):dn(i)}}else{if(n&128)return Ec(t,e.next);if(n&32)return Uy(e,t)()||dn(t[e.index]);{let r=P0(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=si(t[ln]);return Ec(i,r)}else return Ec(t,e.next)}}}return null}function P0(t,e){if(e!==null){let r=t[ln][un],i=e.projection;return r.projection[i]}return null}function Ey(t,e){let n=Vt+t+1;if(n<e.length){let r=e[n],i=r[X].firstChild;if(i!==null)return Ec(r,i)}return e[di]}function Gy(t,e,n,r,i,o,s){for(;n!=null;){let a=r[li];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&Es(dn(u),r),n.flags|=2),!xy(n))if(l&8)Gy(t,e,n.child,r,i,o,!1),_s(e,t,a,i,u,n,o,r);else if(l&32){let f=Uy(n,r),p;for(;p=f();)_s(e,t,a,i,p,n,o,r);_s(e,t,a,i,u,n,o,r)}else l&16?xk(t,e,r,n,i,o):_s(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function vh(t,e,n,r,i,o){Gy(n,r,t.firstChild,e,i,o,!1)}function xk(t,e,n,r,i,o){let s=n[ln],u=s[un].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];_s(e,t,n[li],i,f,r,o,n)}else{let l=u,f=s[at];t0(r)&&(l.flags|=128),Gy(t,e,l,f,i,o,!0)}}function Ok(t,e,n,r,i,o,s){let a=r[di],u=dn(r);a!==u&&_s(e,t,n,o,a,i,s);for(let l=Vt;l<r.length;l++){let f=r[l];vh(f[X],f,t,e,o,a)}}function kk(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Yn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Yn.Important),t.setStyle(n,r,i,o))}}function x0(t,e,n,r,i){let o=fi(),s=r&2;try{pi(-1),s&&e.length>_t&&b0(t,e,_t,!1),Te(s?2:0,i,n),n(r,i)}finally{pi(o),Te(s?3:1,i,n)}}function Wy(t,e,n){Hk(t,e,n),(n.flags&64)===64&&zk(t,e,n)}function O0(t,e,n=Tn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Fk(t,e,n,r){let o=r.get(c0,a0)||n===Ar.ShadowDom,s=t.selectRootElement(e,o);return Lk(s),s}function Lk(t){Vk(t)}var Vk=()=>null;function jk(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Uk(t,e,n,r,i,o){let s=e[X];if(Ky(t,s,e,n,r)){hi(t)&&$k(e,t.index);return}t.type&3&&(n=jk(n)),Bk(t,e,n,r,i,o)}function Bk(t,e,n,r,i,o){if(t.type&3){let s=Tn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function $k(t,e){let n=hn(e,t);n[Q]&16||(n[Q]|=64)}function Hk(t,e,n){let r=n.directiveStart,i=n.directiveEnd;hi(n)&&hk(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||eh(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=th(e,t,s,n);if(Es(u,e),o!==null&&Kk(e,s-r,u,a,n,o),Wn(a)){let l=hn(n.index,e);l[yt]=th(e,t,s,n)}}}function zk(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Zb();try{pi(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Ld(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&qk(u,l)}}finally{pi(-1),Ld(s)}}function qk(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function k0(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];ik(e,o.selectors,!1)&&(r??=[],Wn(o)?r.unshift(o):r.push(o))}return r}function Gk(t,e,n,r,i,o){let s=Tn(t,e);Wk(e[He],s,o,t.value,n,r,i)}function Wk(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Ji(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function Kk(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];yy(r,n,u,l)}}function Qk(t,e,n,r,i){let o=_t+n,s=e[X],a=i(s,e,t,r,n);e[o]=a,ms(t,!0);let u=t.type===2;return u?(m0(e[He],a,t),(jb()===0||hc(t))&&Es(a,e),Ub()):Es(a,e),Ud()&&(!u||!xy(t))&&qy(s,e,a,t),t}function Yk(t){let e=t;return Bm()?Gb():(e=e.parent,ms(e,!1)),e}function Zk(t,e){let n=t[li];if(!n)return;let r;try{r=n.get(vt,null)}catch{r=null}r?.(e)}function Ky(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];yy(p,n[l],f,i),a=!0}if(o)for(let u of o){let l=n[u],f=e.data[u];yy(f,l,r,i),a=!0}return a}function Xk(t,e){let n=hn(e,t),r=n[X];Jk(r,n);let i=n[Cn];i!==null&&n[sc]===null&&(n[sc]=u0(i,n[li])),Te(18),Qy(r,n,n[yt]),Te(19,n[yt])}function Jk(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Qy(t,e,n){Vd(e);try{let r=t.viewQuery;r!==null&&my(1,r,n);let i=t.template;i!==null&&x0(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ro]?.finishViewCreation(t),t.staticContentQueries&&l0(t,e),t.staticViewQueries&&my(2,t.viewQuery,n);let o=t.components;o!==null&&eF(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,jd()}}function eF(t,e){for(let n=0;n<e.length;n++)Xk(t,e[n])}function tF(t,e,n,r){let i=J(null);try{let o=e.tView,a=t[Q]&4096?4096:16,u=Vy(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[to]=l;let f=t[ro];return f!==null&&(u[ro]=f.createEmbeddedView(o)),Qy(o,u,n),u}finally{J(i)}}function CT(t,e){return!e||e.firstChild===null||t0(t)}function bc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(dn(o)),bn(o)&&F0(o,r);let s=n.type;if(s&8)bc(t,e,n.child,r);else if(s&32){let a=Uy(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=P0(e,n);if(Array.isArray(a))r.push(...a);else{let u=si(e[ln]);bc(u[X],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function F0(t,e){for(let n=Vt;n<t.length;n++){let r=t[n],i=r[X].firstChild;i!==null&&bc(r[X],r,i,e)}t[di]!==t[Cn]&&e.push(t[di])}function L0(t){if(t[Pd]!==null){for(let e of t[Pd])e.impl.addSequence(e);t[Pd].length=0}}var V0=[];function nF(t){return t[Xt]??rF(t)}function rF(t){let e=V0.pop()??Object.create(oF);return e.lView=t,e}function iF(t){t.lView[Xt]!==t&&(t.lView=null,V0.push(t))}var oF=te(L({},Go),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{gc(t.lView)},consumerOnSignalRead(){this.lView[Xt]=this}});function sF(t){let e=t[Xt]??Object.create(aF);return e.lView=t,e}var aF=te(L({},Go),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=si(t.lView);for(;e&&!j0(e[X]);)e=si(e);e&&Lm(e)},consumerOnSignalRead(){this.lView[Xt]=this}});function j0(t){return t.type!==2}function U0(t){if(t[cc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[cc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Q]&8192)}}var cF=100;function B0(t,e=0){let r=t[qn].rendererFactory,i=!1;i||r.begin?.();try{uF(t,e)}finally{i||r.end?.()}}function uF(t,e){let n=$m();try{Hm(!0),Iy(t,e);let r=0;for(;pc(t);){if(r===cF)throw new V(103,!1);r++,Iy(t,1)}}finally{Hm(n)}}function lF(t,e,n,r){if(io(e))return;let i=e[Q],o=!1,s=!1;Vd(e);let a=!0,u=null,l=null;o||(j0(t)?(l=nF(e),u=Ko(l)):Gl()===null?(a=!1,l=sF(e),u=Ko(l)):e[Xt]&&(Qa(e[Xt]),e[Xt]=null));try{Fm(e),Kb(t.bindingStartIndex),n!==null&&x0(t,e,n,2,r);let f=(i&3)===3;if(!o)if(f){let y=t.preOrderCheckHooks;y!==null&&Wd(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Kd(e,y,0,null),ey(e,0)}if(s||dF(e),U0(e),$0(e,0),t.contentQueries!==null&&l0(t,e),!o)if(f){let y=t.contentCheckHooks;y!==null&&Wd(e,y)}else{let y=t.contentHooks;y!==null&&Kd(e,y,1),ey(e,1)}fF(t,e);let p=t.components;p!==null&&z0(e,p,0);let m=t.viewQuery;if(m!==null&&my(2,m,r),!o)if(f){let y=t.viewCheckHooks;y!==null&&Wd(e,y)}else{let y=t.viewHooks;y!==null&&Kd(e,y,2),ey(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Nd]){for(let y of e[Nd])y();e[Nd]=null}o||(L0(e),e[Q]&=-73)}catch(f){throw o||gc(e),f}finally{l!==null&&(Wa(l,u),a&&iF(l)),jd()}}function $0(t,e){for(let n=r0(t);n!==null;n=i0(n))for(let r=Vt;r<n.length;r++){let i=n[r];H0(i,e)}}function dF(t){for(let e=r0(t);e!==null;e=i0(e)){if(!(e[Q]&2))continue;let n=e[dc];for(let r=0;r<n.length;r++){let i=n[r];Lm(i)}}}function hF(t,e,n){Te(18);let r=hn(e,t);H0(r,n),Te(19,r[yt])}function H0(t,e){Od(t)&&Iy(t,e)}function Iy(t,e){let r=t[X],i=t[Q],o=t[Xt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ka(o)),s||=!1,o&&(o.dirty=!1),t[Q]&=-9217,s)lF(r,t,r.template,t[yt]);else if(i&8192){let a=J(null);try{U0(t),$0(t,1);let u=r.components;u!==null&&z0(t,u,1),L0(t)}finally{J(a)}}}function z0(t,e,n){for(let r=0;r<e.length;r++)hF(t,e[r],n)}function fF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)pi(~i);else{let o=i,s=n[++r],a=n[++r];Yb(s,o);let u=e[o];Te(24,u),a(2,u),Te(25,u)}}}finally{pi(-1)}}function Yy(t,e){let n=$m()?64:1088;for(t[qn].changeDetectionScheduler?.notify(e);t;){t[Q]|=n;let r=si(t);if(gs(t)&&!r)return t;t=r}return null}function q0(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function pF(t,e,n,r=!0){let i=e[X];if(gF(i,e,t,n),r){let s=Ey(n,t),a=e[He],u=a.parentNode(t[di]);u!==null&&Ck(i,t[un],a,e,u,s)}let o=e[sc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function wy(t,e){if(t.length<=Vt)return;let n=Vt+e,r=t[n];if(r){let i=r[to];i!==null&&i!==t&&zy(i,r),e>0&&(t[n-1][cn]=r[cn]);let o=rc(t,Vt+e);wk(r[X],r);let s=o[ro];s!==null&&s.detachView(o[X]),r[at]=null,r[cn]=null,r[Q]&=-129}return r}function gF(t,e,n,r){let i=Vt+r,o=n.length;r>0&&(n[i-1][cn]=e),r<o-Vt?(e[cn]=n[i],wm(n,Vt+r,e)):(n.push(e),e[cn]=null),e[at]=n;let s=e[to];s!==null&&n!==s&&G0(s,e);let a=e[ro];a!==null&&a.insertView(t),kd(e),e[Q]|=128}function G0(t,e){let n=t[dc],r=e[at];if(Gn(r))t[Q]|=2;else{let i=r[at][ln];e[ln]!==i&&(t[Q]|=2)}n===null?t[dc]=[e]:n.push(e)}var gi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[X];return bc(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[yt]}set context(e){this._lView[yt]=e}get destroyed(){return io(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[at];if(bn(e)){let n=e[lc],r=n?n.indexOf(this):-1;r>-1&&(wy(e,r),rc(n,r))}this._attachedToViewContainer=!1}N0(this._lView[X],this._lView)}onDestroy(e){Vm(this._lView,e)}markForCheck(){Yy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Q]&=-129}reattach(){kd(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,B0(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=gs(this._lView),n=this._lView[to];n!==null&&!e&&zy(n,this._lView),M0(this._lView[X],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e;let n=gs(this._lView),r=this._lView[to];r!==null&&!n&&G0(r,this._lView),kd(this._lView)}};var Rc=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=mF;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=tF(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new gi(o)}}return t})();function mF(){return yF(jt(),we())}function yF(t,e){return t.type&4?new Rc(e,t,dh(t,e)):null}function Zy(t,e,n,r,i){let o=t.data[e];if(o===null)o=_F(t,e,n,r,i),Qb()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=qb();o.injectorIndex=s===null?-1:s.injectorIndex}return ms(o,!0),o}function _F(t,e,n,r,i){let o=Um(),s=Bm(),a=s?o:o&&o.parent,u=t.data[e]=EF(t,a,n,e,r,i);return vF(t,u,o,s),u}function vF(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function EF(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return $b()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var rY=new RegExp(`^(\\d+)*(${B1}|${U1})*(.*)`);var IF=()=>null;function bT(t,e){return IF(t,e)}var W0=class{},Eh=class{},Cy=class{resolveComponentFactory(e){throw new V(917,!1)}},Mc=class{static NULL=new Cy},ao=class{},mi=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>wF()}return t})();function wF(){let t=we(),e=jt(),n=hn(e.index,t);return(Gn(n)?n:t)[He]}var K0=(()=>{class t{static \u0275prov=U({token:t,providedIn:"root",factory:()=>null})}return t})();var Qd={},by=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Qd,r);return i!==Qd||n===Qd?i:this.parentInjector.get(e,n,r)}};function TT(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=hm(i,a);else if(o==2){let u=a,l=e[++s];r=hm(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function H(t,e=0){let n=we();if(n===null)return G(t,e);let r=jt();return XT(r,n,st(t),e)}function Q0(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,u,l]=f.resolveHostDirectives(s);break}TF(t,e,n,a,o,u,l)}o!==null&&r!==null&&CF(n,r,o)}function CF(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new V(-301,!1);r.push(e[i],o)}}function bF(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function TF(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&Wn(y)&&(u=!0,bF(t,n,m)),hy(eh(n,e),t,y.type)}NF(n,t.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=C0(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(n.mergedAttrs=wc(n.mergedAttrs,y.hostAttrs),SF(t,n,e,p,y),MF(p,y,i),s!==null&&s.has(y)){let[P,O]=s.get(y);n.directiveToIndex.set(y.type,[p,P+n.directiveStart,O+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let b=y.type.prototype;!l&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!f&&(b.ngOnChanges||b.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}DF(t,n,o)}function DF(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))DT(0,e,i,r),DT(1,e,i,r),AT(e,r,!1);else{let o=n.get(i);ST(0,e,o,r),ST(1,e,o,r),AT(e,r,!0)}}}function DT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Y0(e,o)}}function ST(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Y0(e,s)}}function Y0(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function AT(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Fy(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function SF(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=oi(i.type,!0)),s=new so(o,Wn(i),H,null);t.blueprint[r]=s,n[r]=s,AF(t,e,r,C0(t,n,i.hostVars,Sn),i)}function AF(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;RF(s)!=a&&s.push(a),s.push(n,r,o)}}function RF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function MF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Wn(e)&&(n[""]=t)}}function NF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Z0(t,e,n,r,i,o,s,a){let u=e[X],l=u.consts,f=fc(l,s),p=Zy(u,t,n,r,f);return o&&Q0(u,e,p,fc(l,a),i),p.mergedAttrs=wc(p.mergedAttrs,p.attrs),p.attrs!==null&&TT(p,p.attrs,!1),p.mergedAttrs!==null&&TT(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function X0(t,e){HT(t,e),Pm(e)&&t.queries.elementEnd(e)}function Xy(t){return eD(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function J0(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function eD(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function tD(t,e,n){return t[e]=n}function co(t,e,n){if(n===Sn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function nD(t,e,n,r){let i=co(t,e,n);return co(t,e+1,r)||i}function ry(t,e,n){return function r(i){let o=hi(t)?hn(t.index,e):e;Yy(o,5);let s=e[yt],a=RT(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=RT(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function RT(t,e,n,r){let i=J(null);try{return Te(6,e,n),n(r)!==!1}catch(o){return Zk(t,o),!1}finally{Te(7,e,n),J(i)}}function PF(t,e,n,r,i,o,s,a){let u=hc(t),l=!1,f=null;if(!r&&u&&(f=OF(e,n,o,t.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,l=!0}else{let p=Tn(t,n),m=r?r(p):p;H1(n,m,o,a);let y=i.listen(m,o,a);if(!xF(o)){let b=r?P=>r(dn(P[t.index])):t.index;rD(b,e,n,o,a,y,!1)}}return l}function xF(t){return t.startsWith("animation")||t.startsWith("transition")}function OF(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[fs],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function rD(t,e,n,r,i,o,s){let a=e.firstCreatePass?Vb(e):null,u=Lb(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function MT(t,e,n,r,i,o){let s=e[n],a=e[X],l=a.data[n].outputs[r],p=s[l].subscribe(o);rD(t.index,a,e,i,o,p,!0)}var Ty=Symbol("BINDING");var oh=class extends Mc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ui(e);return new ws(n,this.ngModule)}};function kF(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&yh.SignalBased)!==0};return i&&(o.transform=i),o})}function FF(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function LF(t,e,n){let r=e instanceof $e?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new by(n,r):n}function VF(t){let e=t.get(ao,null);if(e===null)throw new V(407,!1);let n=t.get(K0,null),r=t.get(br,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function jF(t,e){let n=iD(t);return p0(e,n,n==="svg"?Pb:n==="math"?xb:null)}function iD(t){return(t.selectors[0][0]||"div").toLowerCase()}var ws=class extends Eh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=kF(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=FF(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=ck(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Te(22);let a=J(null);try{let u=this.componentDef,l=UF(r,u,s,o),f=LF(u,i||this.ngModule,e),p=VF(f),m=p.rendererFactory.createRenderer(null,u),y=r?Fk(m,r,u.encapsulation,f):jF(u,m),b=s?.some(NT)||o?.some(B=>typeof B!="function"&&B.bindings.some(NT)),P=Vy(null,l,null,512|w0(u),null,null,p,m,f,null,u0(y,f,!0));P[_t]=y,Vd(P);let O=null;try{let B=Z0(_t,P,2,"#host",()=>l.directiveRegistry,!0,0);m0(m,y,B),Es(y,P),Wy(l,P,B),d0(l,B,P),X0(l,B),n!==void 0&&$F(B,this.ngContentSelectors,n),O=hn(B.index,P),P[yt]=O[yt],Qy(l,P,null)}catch(B){throw O!==null&&py(O),py(P),B}finally{Te(23),jd()}return new sh(this.componentType,P,!!b)}finally{J(a)}}};function UF(t,e,n,r){let i=t?["ng-version","20.3.15"]:uk(e.selectors[0]),o=null,s=null,a=0;if(n)for(let f of n)a+=f[Ty].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let m of p.bindings){a+=m[Ty].requiredVars;let y=f+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,m=Dm(p);u.push(m)}return Ly(0,null,BF(o,s),1,a,u,null,null,null,[i],null)}function BF(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function NT(t){let e=t[Ty].kind;return e==="input"||e==="twoWay"}var sh=class extends W0{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=xd(n[X],_t),this.location=dh(this._tNode,n),this.instance=hn(this._tNode.index,n)[yt],this.hostView=this.changeDetectorRef=new gi(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Ky(r,i[X],i,e,n);this.previousInputValues.set(e,n);let s=hn(r.index,i);Yy(s,1)}get injector(){return new oo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function $F(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var fo=(()=>{class t{static __NG_ELEMENT_ID__=HF}return t})();function HF(){let t=jt();return qF(t,we())}var zF=fo,oD=class extends zF{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return dh(this._hostTNode,this._hostLView)}get injector(){return new oo(this._hostTNode,this._hostLView)}get parentInjector(){let e=My(this._hostTNode,this._hostLView);if(GT(e)){let n=Xd(e,this._hostLView),r=Zd(e),i=n[X].data[r+8];return new oo(i,n)}else return new oo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=PT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Vt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=bT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,CT(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!g1(e),l;if(u)l=n;else{let O=n||{};l=O.index,r=O.injector,i=O.projectableNodes,o=O.environmentInjector||O.ngModuleRef,s=O.directives,a=O.bindings}let f=u?e:new ws(ui(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let B=(u?p:this.parentInjector).get($e,null);B&&(o=B)}let m=ui(f.componentType??{}),y=bT(this._lContainer,m?.id??null),b=y?.firstChild??null,P=f.create(p,i,b,o,s,a);return this.insertImpl(P.hostView,l,CT(this._hostTNode,y)),P}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Ob(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[at],l=new oD(u,u[un],u[at]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return pF(s,i,o,r),e.attachToViewContainerRef(),wm(iy(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=PT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=wy(this._lContainer,n);r&&(rc(iy(this._lContainer),n),N0(r[X],r))}detach(e){let n=this._adjustIndex(e,-1),r=wy(this._lContainer,n);return r&&rc(iy(this._lContainer),n)!=null?new gi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function PT(t){return t[lc]}function iy(t){return t[lc]||(t[lc]=[])}function qF(t,e){let n,r=e[t.index];return bn(r)?n=r:(n=q0(r,e,null,t),e[t.index]=n,jy(e,n)),WF(n,e,t,r),new oD(n,t,e)}function GF(t,e){let n=t[He],r=n.createComment(""),i=Tn(e,t),o=n.parentNode(i);return rh(n,o,r,n.nextSibling(i),!1),r}var WF=YF,KF=()=>!1;function QF(t,e,n){return KF(t,e,n)}function YF(t,e,n,r){if(t[di])return;let i;n.type&8?i=dn(r):i=GF(e,n),t[di]=i}var uo=class{},Ih=class{};var ah=class extends uo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new oh(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Tm(e);this._bootstrapComponents=E0(o.bootstrap),this._r3Injector=Ym(e,n,[{provide:uo,useValue:this},{provide:Mc,useValue:this.componentFactoryResolver},...r],Cr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ch=class extends Ih{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ah(this.moduleType,e,[])}};var Tc=class extends uo{injector;componentFactoryResolver=new oh(this);instance=null;constructor(e){super();let n=new Zi([...e.providers,{provide:uo,useValue:this},{provide:Mc,useValue:this.componentFactoryResolver}],e.parent||oc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Nc(t,e,n=null){return new Tc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ZF=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Sm(!1,n.type),i=r.length>0?Nc([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=U({token:t,providedIn:"environment",factory:()=>new t(G($e))})}return t})();function An(t){return bs(()=>{let e=sD(t),n=te(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ny.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(ZF).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ar.Emulated,styles:t.styles||Zt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&_h("NgStandalone"),aD(n);let r=t.dependencies;return n.directiveDefs=xT(r,XF),n.pipeDefs=xT(r,bb),n.id=tL(n),n})}function XF(t){return ui(t)||Dm(t)}function Nr(t){return bs(()=>({type:t.type,bootstrap:t.bootstrap||Zt,declarations:t.declarations||Zt,imports:t.imports||Zt,exports:t.exports||Zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function JF(t,e){if(t==null)return ci;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=yh.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function eL(t){if(t==null)return ci;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function rt(t){return bs(()=>{let e=sD(t);return aD(e),e})}function Pc(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function sD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ci,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Zt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:JF(t.inputs,e),outputs:eL(t.outputs),debugInfo:null}}function aD(t){t.features?.forEach(e=>e(t))}function xT(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function tL(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function nL(t){return Object.getPrototypeOf(t.prototype).constructor}function Pr(t){let e=nL(t.type),n=!0,r=[t];for(;e;){let i;if(Wn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new V(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=oy(t.inputs),s.declaredInputs=oy(t.declaredInputs),s.outputs=oy(t.outputs);let a=i.hostBindings;a&&aL(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&oL(t,u),l&&sL(t,l),rL(t,i),mb(t.outputs,i.outputs),Wn(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Pr&&(n=!1)}}e=Object.getPrototypeOf(e)}iL(r)}function rL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function iL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=wc(i.hostAttrs,n=wc(n,i.hostAttrs))}}function oy(t){return t===ci?{}:t===Zt?[]:t}function oL(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function sL(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function aL(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function cL(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=wc(t.mergedAttrs,t.attrs);let f=t.tView=Ly(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),f.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),ms(t,!1);let u=lL(n,e,t,r);Ud()&&qy(n,e,u,t),Es(u,e);let l=q0(u,e,u,t);e[r+_t]=l,jy(e,l),QF(l,t,e)}function uL(t,e,n,r,i,o,s,a,u,l,f){let p=n+_t,m;return e.firstCreatePass?(m=Zy(e,p,4,s||null,a||null),jm()&&Q0(e,t,m,fc(e.consts,l),k0),HT(e,m)):m=e.data[p],cL(m,t,e,n,r,i,o,u),hc(m)&&Wy(e,t,m),l!=null&&O0(t,m,f),m}function ce(t,e,n,r,i,o,s,a){let u=we(),l=fn(),f=fc(l.consts,o);return uL(u,l,t,e,n,r,i,f,void 0,s,a),ce}var lL=dL;function dL(t,e,n,r){return Bd(!0),e[He].createComment("")}var Jy=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var e_=new j("");function xr(t){return!!t&&typeof t.then=="function"}function wh(t){return!!t&&typeof t.subscribe=="function"}var cD=new j("");var t_=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=A(cD,{optional:!0})??[];injector=A(je);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Ye(this.injector,i);if(xr(o))n.push(o);else if(wh(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ch=new j("");function uD(){Pg(()=>{let t="";throw new V(600,t)})}function lD(t){return t.isBoundToModule}var hL=10;var yi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=A(vt);afterRenderManager=A(A0);zonelessEnabled=A(_c);rootEffectScheduler=A(Jm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ue;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=A(Kn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Z(n=>!n))}constructor(){A(Ac,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=A($e);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=je.NULL){return this._injector.get(ye).run(()=>{Te(10);let s=n instanceof Eh;if(!this._injector.get(t_).done){let b="";throw new V(405,b)}let u;s?u=n:u=this._injector.get(Mc).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=lD(u)?void 0:this._injector.get(uo),f=r||u.selector,p=u.create(i,[],f,l),m=p.location.nativeElement,y=p.injector.get(e_,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Ic(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Te(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Te(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(By.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new V(101,!1);let n=J(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,J(n),this.afterTick.next(),Te(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ao,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<hL;)Te(14),this.synchronizeOnce(),Te(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!pc(i))continue;let o=r&&!this.zonelessEnabled?0:1;B0(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>pc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Ic(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Ch,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ic(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new V(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ic(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function xc(t,e,n,r){let i=we(),o=Fd();if(co(i,o,e)){let s=fn(),a=Qm();Gk(a,i,t,e,n,r)}return xc}var lY=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function $(t,e,n){let r=we(),i=Fd();if(co(r,i,e)){let o=fn(),s=Qm();Uk(s,r,t,e,r[He],n)}return $}function OT(t,e,n,r,i){Ky(e,t,n,i?"class":"style",r)}function M(t,e,n,r){let i=we(),o=i[X],s=t+_t,a=o.firstCreatePass?Z0(s,i,2,e,k0,jm(),n,r):o.data[s];if(Qk(a,i,t,e,fL),hc(a)){let u=i[X];Wy(u,i,a),d0(u,a,i)}return r!=null&&O0(i,a),M}function R(){let t=fn(),e=jt(),n=Yk(e);return t.firstCreatePass&&X0(t,n),Hb(n)&&zb(),Bb(),n.classesWithoutHost!=null&&I1(n)&&OT(t,n,we(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&w1(n)&&OT(t,n,we(),n.stylesWithoutHost,!1),R}function Pe(t,e,n,r){return M(t,e,n,r),R(),Pe}var fL=(t,e,n,r,i)=>(Bd(!0),p0(e[He],r,rT()));function n_(){return we()}var qd=void 0;function pL(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var gL=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qd,"{1} 'at' {0}",qd],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",pL],sy={};function Bt(t){let e=mL(t),n=kT(e);if(n)return n;let r=e.split("-")[0];if(n=kT(r),n)return n;if(r==="en")return gL;throw new V(701,!1)}function kT(t){return t in sy||(sy[t]=Tr.ng&&Tr.ng.common&&Tr.ng.common.locales&&Tr.ng.common.locales[t]),sy[t]}var Fe=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(Fe||{});function mL(t){return t.toLowerCase().replace(/_/g,"-")}var Oc="en-US";var yL=Oc;function dD(t){typeof t=="string"&&(yL=t.toLowerCase().replace(/_/g,"-"))}function Nt(t,e,n){let r=we(),i=fn(),o=jt();return _L(i,r,r[He],o,t,e,n),Nt}function _L(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=ry(r,e,o),PF(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let m=f[p],y=f[p+1];u??=ry(r,e,o),MT(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=ry(r,e,o),MT(r,e,p,i,i,u)}}function Le(t=1){return nT(t)}function Gd(t,e){return t<<17|e<<2}function lo(t){return t>>17&32767}function vL(t){return(t&2)==2}function EL(t,e){return t&131071|e<<17}function Dy(t){return t|2}function Cs(t){return(t&131068)>>2}function ay(t,e){return t&-131069|e<<2}function IL(t){return(t&1)===1}function Sy(t){return t|1}function wL(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=lo(s),u=Cs(s);t[r]=n;let l=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||hs(p,f)>0)&&(l=!0)}else f=n;if(i)if(u!==0){let m=lo(t[a+1]);t[r+1]=Gd(m,a),m!==0&&(t[m+1]=ay(t[m+1],r)),t[a+1]=EL(t[a+1],r)}else t[r+1]=Gd(a,0),a!==0&&(t[a+1]=ay(t[a+1],r)),a=r;else t[r+1]=Gd(u,0),a===0?a=r:t[u+1]=ay(t[u+1],r),u=r;l&&(t[r+1]=Dy(t[r+1])),FT(t,f,r,!0),FT(t,f,r,!1),CL(e,f,t,r,o),s=Gd(a,u),o?e.classBindings=s:e.styleBindings=s}function CL(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&hs(o,e)>=0&&(n[r+1]=Sy(n[r+1]))}function FT(t,e,n,r){let i=t[n+1],o=e===null,s=r?lo(i):Cs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];bL(u,e)&&(a=!0,t[s+1]=r?Sy(l):Dy(l)),s=r?lo(l):Cs(l)}a&&(t[n+1]=r?Dy(i):Sy(i))}function bL(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?hs(t,e)>=0:!1}function Rn(t,e,n){return hD(t,e,n,!1),Rn}function Jt(t,e){return hD(t,e,null,!0),Jt}function hD(t,e,n,r){let i=we(),o=fn(),s=qm(2);if(o.firstUpdatePass&&DL(o,t,s,r),e!==Sn&&co(i,s,e)){let a=o.data[fi()];NL(o,a,i,i[He],t,i[s+1]=PL(e,n),r,s)}}function TL(t,e){return e>=t.expandoStartIndex}function DL(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[fi()],s=TL(t,n);xL(o,r)&&e===null&&!s&&(e=!1),e=SL(i,o,e,r),wL(i,o,e,n,s,r)}}function SL(t,e,n,r){let i=Xb(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=cy(null,t,e,n,r),n=Dc(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=cy(i,t,e,n,r),o===null){let u=AL(t,e,r);u!==void 0&&Array.isArray(u)&&(u=cy(null,t,e,u[1],r),u=Dc(u,e.attrs,r),RL(t,e,r,u))}else o=ML(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function AL(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Cs(r)!==0)return t[lo(r)]}function RL(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[lo(i)]=r}function ML(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Dc(r,s,n)}return Dc(r,e.attrs,n)}function cy(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Dc(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Dc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Cb(t,s,n?!0:e[++o]))}return t===void 0?null:t}function NL(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],f=IL(l)?LT(u,e,n,i,Cs(l),s):void 0;if(!uh(f)){uh(o)||vL(l)&&(o=LT(u,null,n,i,a,s));let p=xm(fi(),n);kk(r,s,p,i,o)}}function LT(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,m=n[i+1];m===Sn&&(m=p?Zt:void 0);let y=p?Md(m,r):f===r?m:void 0;if(l&&!uh(y)&&(y=Md(u,r)),uh(y)&&(a=y,s))return a;let b=t[i+1];i=s?lo(b):Cs(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Md(u,r))}return a}function uh(t){return t!==void 0}function PL(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Cr(gh(t)))),t}function xL(t,e){return(t.flags&(e?8:16))!==0}function N(t,e=""){let n=we(),r=fn(),i=t+_t,o=r.firstCreatePass?Zy(r,i,1,e,null):r.data[i],s=OL(r,n,o,e,t);n[i]=s,Ud()&&qy(r,n,s,o),ms(o,!1)}var OL=(t,e,n,r,i)=>(Bd(!0),W1(e[He],r));function kL(t,e,n,r=""){return co(t,Fd(),n)?e+Ji(n)+r:Sn}function FL(t,e,n,r,i,o=""){let s=Wb(),a=nD(t,s,n,i);return qm(2),a?e+Ji(n)+r+Ji(i)+o:Sn}function Mn(t){return Ze("",t),Mn}function Ze(t,e,n){let r=we(),i=kL(r,t,e,n);return i!==Sn&&fD(r,fi(),i),Ze}function kc(t,e,n,r,i){let o=we(),s=FL(o,t,e,n,r,i);return s!==Sn&&fD(o,fi(),s),kc}function fD(t,e,n){let r=xm(e,t);K1(t[He],r,n)}function LL(t,e,n){let r=fn();if(r.firstCreatePass){let i=Wn(t);Ay(n,r.data,r.blueprint,i,!0),Ay(e,r.data,r.blueprint,i,!1)}}function Ay(t,e,n,r,i){if(t=st(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ay(t[o],e,n,r,i);else{let o=fn(),s=we(),a=jt(),u=Yi(t)?t:st(t.provide),l=Rm(t),f=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Yi(t)||!t.multi){let y=new so(l,i,H,null),b=ly(u,e,i?f:f+m,p);b===-1?(hy(eh(a,s),o,u),uy(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[b]=y,s[b]=y)}else{let y=ly(u,e,f+m,p),b=ly(u,e,f,f+m),P=y>=0&&n[y],O=b>=0&&n[b];if(i&&!O||!i&&!P){hy(eh(a,s),o,u);let B=UL(i?jL:VL,n.length,i,r,l,t);!i&&O&&(n[b].providerFactory=B),uy(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(B),s.push(B)}else{let B=pD(n[i?b:y],l,!i&&r);uy(o,t,y>-1?y:b,B)}!i&&r&&O&&n[b].componentProviders++}}}function uy(t,e,n,r){let i=Yi(e),o=Rb(e);if(i||o){let u=(o?st(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(n);f===-1?l.push(n,[r,u]):l[f+1].push(r,u)}else l.push(n,u)}}}function pD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ly(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function VL(t,e,n,r,i){return Ry(this.multi,[])}function jL(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=th(r,r[X],this.providerFactory.index,i);s=u.slice(0,a),Ry(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Ry(o,s);return s}function Ry(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function UL(t,e,n,r,i,o){let s=new so(t,n,H,null);return s.multi=[],s.index=e,s.componentProviders=0,pD(s,i,r&&!n),s}function Fc(t,e=[]){return n=>{n.providersResolver=(r,i)=>LL(r,i?i(t):t,e)}}function gD(t,e){let n=t[e];return n===Sn?void 0:n}function BL(t,e,n,r,i,o){let s=e+n;return co(t,s,i)?tD(t,s+1,o?r.call(o,i):r(i)):gD(t,s+1)}function $L(t,e,n,r,i,o,s){let a=e+n;return nD(t,a,i,o)?tD(t,a+2,s?r.call(s,i,o):r(i,o)):gD(t,a+2)}function De(t,e){let n=fn(),r,i=t+_t;n.firstCreatePass?(r=HL(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=oi(r.type,!0)),s,a=Rt(H);try{let u=Jd(!1),l=o();return Jd(u),km(n,we(),i,l),l}finally{Rt(a)}}function HL(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function xe(t,e,n){let r=t+_t,i=we(),o=Om(i,r);return mD(i,r)?BL(i,zm(),e,o.transform,n,o):o.transform(n)}function Ds(t,e,n,r){let i=t+_t,o=we(),s=Om(o,i);return mD(o,i)?$L(o,zm(),e,s.transform,n,r,s):s.transform(n,r)}function mD(t,e){return t[X].data[e].pure}var lh=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},r_=(()=>{class t{compileModuleSync(n){return new ch(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Tm(n),o=E0(i.declarations).reduce((s,a)=>{let u=ui(a);return u&&s.push(new ws(u)),s},[]);return new lh(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var zL=(()=>{class t{zone=A(ye);changeDetectionScheduler=A(br);applicationRef=A(yi);applicationErrorHandler=A(vt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yD({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ye(te(L({},_D()),{scheduleInRootZone:n})),[{provide:ye,useFactory:t},{provide:Dr,multi:!0,useFactory:()=>{let r=A(zL,{optional:!0});return()=>r.initialize()}},{provide:Dr,multi:!0,useFactory:()=>{let r=A(qL);return()=>{r.initialize()}}},e===!0?{provide:Xm,useValue:!0}:[],{provide:$d,useValue:n??T0},{provide:vt,useFactory:()=>{let r=A(ye),i=A($e),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Hn),o.handleError(s))})}}}]}function _D(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var qL=(()=>{class t{subscription=new ke;initialized=!1;zone=A(ye);pendingTasks=A(Kn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var i_=(()=>{class t{applicationErrorHandler=A(vt);appRef=A(yi);taskService=A(Kn);ngZone=A(ye);zonelessEnabled=A(_c);tracing=A(Ac,{optional:!0});disableScheduling=A(Xm,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ke;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ih):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(A($d,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Cc||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?yT:D0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ih+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,yT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function o_(){return _h("NgZoneless"),Mt([{provide:br,useExisting:i_},{provide:ye,useClass:Cc},{provide:_c,useValue:!0},{provide:$d,useValue:!1},[]])}function GL(){return typeof $localize<"u"&&$localize.locale||Oc}var Ss=new j("",{providedIn:"root",factory:()=>A(Ss,{optional:!0,skipSelf:!0})||GL()});function qe(t){return fb(t)}function As(t,e){return Yl(t,e?.equal)}var vD=class{[At];constructor(e){this[At]=e}destroy(){this[At].destroy()}};var bD=Symbol("InputSignalNode#UNSET"),uV=te(L({},Zl),{transformFn:void 0,applyValueToInputSignal(t,e){Yo(t,e)}});function TD(t,e){let n=Object.create(uV);n.value=t,n.transformFn=e?.transform;function r(){if(Wo(n),n.value===bD){let i=null;throw new V(-950,i)}return n.value}return r[At]=n,r}var Th=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Sc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},lV=new j("");lV.__NG_ELEMENT_ID__=t=>{let e=jt();if(e===null)throw new V(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new V(204,!1)};function ED(t,e){return TD(t,e)}function dV(t){return TD(bD,t)}var DD=(ED.required=dV,ED);var s_=new j(""),hV=new j("");function Lc(t){return!t.moduleRef}function fV(t){let e=Lc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ye);return n.run(()=>{Lc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(vt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Lc(t)){let o=()=>e.destroy(),s=t.platformInjector.get(s_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(s_);s.add(o),t.moduleRef.onDestroy(()=>{Ic(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return gV(r,n,()=>{let o=e.get(Kn),s=o.add(),a=e.get(t_);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Ss,Oc);if(dD(u||Oc),!e.get(hV,!0))return Lc(t)?e.get(yi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Lc(t)){let f=e.get(yi);return t.rootComponent!==void 0&&f.bootstrap(t.rootComponent),f}else return pV?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var pV;function gV(t,e,n){try{let r=n();return xr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var bh=null;function mV(t=[],e){return je.create({name:e,providers:[{provide:ic,useValue:"platform"},{provide:s_,useValue:new Set([()=>bh=null])},...t]})}function yV(t=[]){if(bh)return bh;let e=mV(t);return bh=e,uD(),_V(e),e}function _V(t){let e=t.get(fh,null);Ye(t,()=>{e?.forEach(n=>n())})}function d_(){return!1}var Rs=(()=>{class t{static __NG_ELEMENT_ID__=vV}return t})();function vV(t){return EV(jt(),we(),(t&16)===16)}function EV(t,e,n){if(hi(t)&&!n){let r=hn(t.index,e);return new gi(r,r)}else if(t.type&175){let r=e[ln];return new gi(r,e)}return null}var a_=class{constructor(){}supports(e){return Xy(e)}create(e){return new c_(e)}},IV=(t,e)=>e,c_=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||IV}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<ID(r,i,o)?n:r,a=ID(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,f=u-i;if(l!=f){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,b=y+m;f<=b&&b<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=f-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Xy(e))throw new V(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,J0(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new u_(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Dh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Dh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},u_=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},l_=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Dh=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new l_,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ID(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function wD(){return new h_([new a_])}var h_=(()=>{class t{factories;static \u0275prov=U({token:t,providedIn:"root",factory:wD});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=A(t,{optional:!0,skipSelf:!0});return t.create(n,r||wD())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new V(901,!1)}}return t})();function SD(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Te(8);try{let o=i?.injector??yV(r),s=[yD({}),{provide:br,useExisting:i_},oT,...n||[]],a=new Tc({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return fV({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Te(9)}}function Vc(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var MD=null;function pn(){return MD}function f_(t){MD??=t}var jc=class{},p_=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>A(ND),providedIn:"platform"})}return t})();var ND=(()=>{class t extends p_{_location;_history;_doc=A(tt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pn().getBaseHref(this._doc)}onPopState(n){let r=pn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=pn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function PD(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function AD(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function _i(t){return t&&t[0]!=="?"?`?${t}`:t}var Ms=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>A(OD),providedIn:"root"})}return t})(),xD=new j(""),OD=(()=>{class t extends Ms{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??A(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return PD(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+_i(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+_i(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+_i(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(G(p_),G(xD,8))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ns=(()=>{class t{_subject=new Ue;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=bV(AD(RD(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+_i(r))}normalize(n){return t.stripTrailingSlash(CV(this._basePath,RD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+_i(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+_i(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=_i;static joinWithSlash=PD;static stripTrailingSlash=AD;static \u0275fac=function(r){return new(r||t)(G(Ms))};static \u0275prov=U({token:t,factory:()=>wV(),providedIn:"root"})}return t})();function wV(){return new Ns(G(Ms))}function CV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function RD(t){return t.replace(/\/index.html$/,"")}function bV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var C_=(function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t})(C_||{});var Et=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(Et||{}),Ce=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(Ce||{}),$t=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})($t||{}),Ht={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function UD(t){return Bt(t)[Fe.LocaleId]}function BD(t,e,n){let r=Bt(t),i=[r[Fe.DayPeriodsFormat],r[Fe.DayPeriodsStandalone]],o=gn(i,e);return gn(o,n)}function $D(t,e,n){let r=Bt(t),i=[r[Fe.DaysFormat],r[Fe.DaysStandalone]],o=gn(i,e);return gn(o,n)}function HD(t,e,n){let r=Bt(t),i=[r[Fe.MonthsFormat],r[Fe.MonthsStandalone]],o=gn(i,e);return gn(o,n)}function zD(t,e){let r=Bt(t)[Fe.Eras];return gn(r,e)}function Uc(t,e){let n=Bt(t);return gn(n[Fe.DateFormat],e)}function Bc(t,e){let n=Bt(t);return gn(n[Fe.TimeFormat],e)}function $c(t,e){let r=Bt(t)[Fe.DateTimeFormat];return gn(r,e)}function Zn(t,e){let n=Bt(t),r=n[Fe.NumberSymbols][e];if(typeof r>"u"){if(e===Ht.CurrencyDecimal)return n[Fe.NumberSymbols][Ht.Decimal];if(e===Ht.CurrencyGroup)return n[Fe.NumberSymbols][Ht.Group]}return r}function qD(t,e){return Bt(t)[Fe.NumberFormats][e]}function GD(t){if(!t[Fe.ExtraData])throw new V(2303,!1)}function WD(t){let e=Bt(t);return GD(e),(e[Fe.ExtraData][2]||[]).map(r=>typeof r=="string"?g_(r):[g_(r[0]),g_(r[1])])}function KD(t,e,n){let r=Bt(t);GD(r);let i=[r[Fe.ExtraData][0],r[Fe.ExtraData][1]],o=gn(i,e)||[];return gn(o,n)||[]}function gn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new V(2304,!1)}function g_(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var TV=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ah={},DV=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function QD(t,e,n,r){let i=kV(t);e=Or(n,e)||e;let s=[],a;for(;e;)if(a=DV.exec(e),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=ZD(r,u),i=OV(i,r));let l="";return s.forEach(f=>{let p=PV(f);l+=p?p(i,n,u):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function xh(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Or(t,e){let n=UD(t);if(Ah[n]??={},Ah[n][e])return Ah[n][e];let r="";switch(e){case"shortDate":r=Uc(t,$t.Short);break;case"mediumDate":r=Uc(t,$t.Medium);break;case"longDate":r=Uc(t,$t.Long);break;case"fullDate":r=Uc(t,$t.Full);break;case"shortTime":r=Bc(t,$t.Short);break;case"mediumTime":r=Bc(t,$t.Medium);break;case"longTime":r=Bc(t,$t.Long);break;case"fullTime":r=Bc(t,$t.Full);break;case"short":let i=Or(t,"shortTime"),o=Or(t,"shortDate");r=Rh($c(t,$t.Short),[i,o]);break;case"medium":let s=Or(t,"mediumTime"),a=Or(t,"mediumDate");r=Rh($c(t,$t.Medium),[s,a]);break;case"long":let u=Or(t,"longTime"),l=Or(t,"longDate");r=Rh($c(t,$t.Long),[u,l]);break;case"full":let f=Or(t,"fullTime"),p=Or(t,"fullDate");r=Rh($c(t,$t.Full),[f,p]);break}return r&&(Ah[n][e]=r),r}function Rh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Nn(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function SV(t,e){return Nn(t,3).substring(0,e)}function Ge(t,e,n=0,r=!1,i=!1){return function(o,s){let a=AV(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return SV(a,e);let u=Zn(s,Ht.MinusSign);return Nn(a,e,u,r,i)}}function AV(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new V(2301,!1)}}function Re(t,e,n=Et.Format,r=!1){return function(i,o){return RV(i,o,t,e,n,r)}}function RV(t,e,n,r,i,o){switch(n){case 2:return HD(e,i,r)[t.getMonth()];case 1:return $D(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=WD(e),f=KD(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,b]=m,P=s>=y.hours&&a>=y.minutes,O=s<b.hours||s===b.hours&&a<b.minutes;if(y.hours<b.hours){if(P&&O)return!0}else if(P||O)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return f[p]}return BD(e,i,r)[s<12?0:1];case 3:return zD(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new V(2302,!1)}}function Mh(t){return function(e,n,r){let i=-1*r,o=Zn(n,Ht.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+Nn(s,2,o)+Nn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Nn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Nn(s,2,o)+":"+Nn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Nn(s,2,o)+":"+Nn(Math.abs(i%60),2,o);default:throw new V(2310,!1)}}}var MV=0,Ph=4;function NV(t){let e=xh(t,MV,1).getDay();return xh(t,0,1+(e<=Ph?Ph:Ph+7)-e)}function YD(t){let e=t.getDay(),n=e===0?-3:Ph-e;return xh(t.getFullYear(),t.getMonth(),t.getDate()+n)}function m_(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=YD(n),s=NV(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Nn(i,t,Zn(r,Ht.MinusSign))}}function Nh(t,e=!1){return function(n,r){let o=YD(n).getFullYear();return Nn(o,t,Zn(r,Ht.MinusSign),e)}}var y_={};function PV(t){if(y_[t])return y_[t];let e;switch(t){case"G":case"GG":case"GGG":e=Re(3,Ce.Abbreviated);break;case"GGGG":e=Re(3,Ce.Wide);break;case"GGGGG":e=Re(3,Ce.Narrow);break;case"y":e=Ge(0,1,0,!1,!0);break;case"yy":e=Ge(0,2,0,!0,!0);break;case"yyy":e=Ge(0,3,0,!1,!0);break;case"yyyy":e=Ge(0,4,0,!1,!0);break;case"Y":e=Nh(1);break;case"YY":e=Nh(2,!0);break;case"YYY":e=Nh(3);break;case"YYYY":e=Nh(4);break;case"M":case"L":e=Ge(1,1,1);break;case"MM":case"LL":e=Ge(1,2,1);break;case"MMM":e=Re(2,Ce.Abbreviated);break;case"MMMM":e=Re(2,Ce.Wide);break;case"MMMMM":e=Re(2,Ce.Narrow);break;case"LLL":e=Re(2,Ce.Abbreviated,Et.Standalone);break;case"LLLL":e=Re(2,Ce.Wide,Et.Standalone);break;case"LLLLL":e=Re(2,Ce.Narrow,Et.Standalone);break;case"w":e=m_(1);break;case"ww":e=m_(2);break;case"W":e=m_(1,!0);break;case"d":e=Ge(2,1);break;case"dd":e=Ge(2,2);break;case"c":case"cc":e=Ge(7,1);break;case"ccc":e=Re(1,Ce.Abbreviated,Et.Standalone);break;case"cccc":e=Re(1,Ce.Wide,Et.Standalone);break;case"ccccc":e=Re(1,Ce.Narrow,Et.Standalone);break;case"cccccc":e=Re(1,Ce.Short,Et.Standalone);break;case"E":case"EE":case"EEE":e=Re(1,Ce.Abbreviated);break;case"EEEE":e=Re(1,Ce.Wide);break;case"EEEEE":e=Re(1,Ce.Narrow);break;case"EEEEEE":e=Re(1,Ce.Short);break;case"a":case"aa":case"aaa":e=Re(0,Ce.Abbreviated);break;case"aaaa":e=Re(0,Ce.Wide);break;case"aaaaa":e=Re(0,Ce.Narrow);break;case"b":case"bb":case"bbb":e=Re(0,Ce.Abbreviated,Et.Standalone,!0);break;case"bbbb":e=Re(0,Ce.Wide,Et.Standalone,!0);break;case"bbbbb":e=Re(0,Ce.Narrow,Et.Standalone,!0);break;case"B":case"BB":case"BBB":e=Re(0,Ce.Abbreviated,Et.Format,!0);break;case"BBBB":e=Re(0,Ce.Wide,Et.Format,!0);break;case"BBBBB":e=Re(0,Ce.Narrow,Et.Format,!0);break;case"h":e=Ge(3,1,-12);break;case"hh":e=Ge(3,2,-12);break;case"H":e=Ge(3,1);break;case"HH":e=Ge(3,2);break;case"m":e=Ge(4,1);break;case"mm":e=Ge(4,2);break;case"s":e=Ge(5,1);break;case"ss":e=Ge(5,2);break;case"S":e=Ge(6,1);break;case"SS":e=Ge(6,2);break;case"SSS":e=Ge(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Mh(0);break;case"ZZZZZ":e=Mh(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Mh(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Mh(2);break;default:return null}return y_[t]=e,e}function ZD(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function xV(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function OV(t,e,n){let i=t.getTimezoneOffset(),o=ZD(e,i);return xV(t,-1*(o-i))}function kV(t){if(kD(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return xh(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(TV))return FV(r)}let e=new Date(t);if(!kD(e))throw new V(2311,!1);return e}function FV(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function kD(t){return t instanceof Date&&!isNaN(t.valueOf())}var LV=/^(\d+)?\.((\d+)(-(\d+))?)?$/,FD=22,Oh=".",Hc="0",VV=";",jV=",",__="#";function UV(t,e,n,r,i,o,s=!1){let a="",u=!1;if(!isFinite(t))a=Zn(n,Ht.Infinity);else{let l=HV(t);s&&(l=$V(l));let f=e.minInt,p=e.minFrac,m=e.maxFrac;if(o){let pe=o.match(LV);if(pe===null)throw new V(2306,!1);let ge=pe[1],Ke=pe[3],Un=pe[5];ge!=null&&(f=v_(ge)),Ke!=null&&(p=v_(Ke)),Un!=null?m=v_(Un):Ke!=null&&p>m&&(m=p)}zV(l,p,m);let y=l.digits,b=l.integerLen,P=l.exponent,O=[];for(u=y.every(pe=>!pe);b<f;b++)y.unshift(0);for(;b<0;b++)y.unshift(0);b>0?O=y.splice(b,y.length):(O=y,y=[0]);let B=[];for(y.length>=e.lgSize&&B.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)B.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&B.unshift(y.join("")),a=B.join(Zn(n,r)),O.length&&(a+=Zn(n,i)+O.join("")),P&&(a+=Zn(n,Ht.Exponential)+"+"+P)}return t<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function XD(t,e,n){let r=qD(e,C_.Decimal),i=BV(r,Zn(e,Ht.MinusSign));return UV(t,i,e,Ht.Group,Ht.Decimal,n)}function BV(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(VV),i=r[0],o=r[1],s=i.indexOf(Oh)!==-1?i.split(Oh):[i.substring(0,i.lastIndexOf(Hc)+1),i.substring(i.lastIndexOf(Hc)+1)],a=s[0],u=s[1]||"";n.posPre=a.substring(0,a.indexOf(__));for(let f=0;f<u.length;f++){let p=u.charAt(f);p===Hc?n.minFrac=n.maxFrac=f+1:p===__?n.maxFrac=f+1:n.posSuf+=p}let l=a.split(jV);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let f=i.length-n.posPre.length-n.posSuf.length,p=o.indexOf(__);n.negPre=o.substring(0,p).replace(/'/g,""),n.negSuf=o.slice(p+f).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function $V(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function HV(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(Oh))>-1&&(e=e.replace(Oh,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Hc;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Hc;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>FD&&(r=r.splice(0,FD-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function zV(t,e,n){if(e>n)throw new V(2307,!1);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+t.integerLen,f=r.reduceRight(function(p,m,y,b){return m=m+p,b[y]=m<10?m:m-10,u&&(b[y]===0&&y>=l?b.pop():u=!1),m>=10?1:0},0);f&&(r.unshift(f),t.integerLen++)}function v_(t){let e=parseInt(t);if(isNaN(e))throw new V(2305,!1);return e}var E_=/\s+/,LD=[],b_=(()=>{class t{_ngEl;_renderer;initialClasses=LD;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(E_):LD}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(E_):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(E_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(H(Mr),H(mi))};static \u0275dir=rt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var kh=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Lh=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new kh(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),VD(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);VD(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(H(fo),H(Rc),H(h_))};static \u0275dir=rt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function VD(t,e){t.context.$implicit=e.item}var po=(()=>{class t{_viewContainer;_context=new Fh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){jD(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){jD(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(H(fo),H(Rc))};static \u0275dir=rt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Fh=class{$implicit=null;ngIf=null};function jD(t,e){if(t&&!t.createEmbeddedView)throw new V(2020,!1)}function T_(t,e){return new V(2100,!1)}var I_=class{createSubscription(e,n,r){return qe(()=>e.subscribe({next:n,error:r}))}dispose(e){qe(()=>e.unsubscribe())}},w_=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},qV=new w_,GV=new I_,D_=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=A(vt);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(xr(n))return qV;if(wh(n))return GV;throw T_(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(H(Rs,16))};static \u0275pipe=Pc({name:"async",type:t,pure:!1})}return t})();var WV="mediumDate",JD=new j(""),eS=new j(""),S_=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??WV,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return QD(n,s,o||this.locale,a)}catch(s){throw T_(t,s.message)}}static \u0275fac=function(r){return new(r||t)(H(Ss,16),H(JD,24),H(eS,24))};static \u0275pipe=Pc({name:"date",type:t,pure:!0})}return t})();var A_=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!KV(n))return null;i||=this._locale;try{let o=QV(n);return XD(o,i,r)}catch(o){throw T_(t,o.message)}}static \u0275fac=function(r){return new(r||t)(H(Ss,16))};static \u0275pipe=Pc({name:"number",type:t,pure:!0})}return t})();function KV(t){return!(t==null||t===""||t!==t)}function QV(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new V(2309,!1);return t}var vi=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Nr({type:t});static \u0275inj=zn({})}return t})();function R_(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var zc=class{};var tS="browser";var qc=class{_doc;constructor(e){this._doc=e}manager},jh=(()=>{class t extends qc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(G(tt))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),Bh=new j(""),O_=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof jh));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof jh);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new V(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(G(Bh),G(ye))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),M_="ng-app-id";function nS(t){for(let e of t)e.remove()}function rS(t,e){let n=e.createElement("style");return n.textContent=t,n}function YV(t,e,n,r){let i=t.head?.querySelectorAll(`style[${M_}="${e}"],link[${M_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(M_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function P_(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var k_=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,YV(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,rS);r?.forEach(i=>this.addUsage(i,this.external,P_))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(nS(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])nS(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,rS(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,P_(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(G(tt),G(hh),G(ph,8),G(ho))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),N_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},F_=/%COMP%/g;var oS="%COMP%",ZV=`_nghost-${oS}`,XV=`_ngcontent-${oS}`,JV=!0,e2=new j("",{providedIn:"root",factory:()=>JV});function t2(t){return XV.replace(F_,t)}function n2(t){return ZV.replace(F_,t)}function sS(t,e){return e.map(n=>n.replace(F_,t))}var L_=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Gc(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Uh?i.applyToHost(n):i instanceof Wc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Ar.Emulated:o=new Uh(u,l,r,this.appId,f,s,a,p,m);break;case Ar.ShadowDom:return new x_(u,l,n,r,s,a,this.nonce,p,m);default:o=new Wc(u,l,r,f,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(G(O_),G(k_),G(hh),G(e2),G(tt),G(ye),G(ph),G(Ac,8))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),Gc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(N_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(iS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(iS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new V(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=N_[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=N_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Yn.DashCase|Yn.Important)?e.style.setProperty(n,r,i&Yn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Yn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=pn().getGlobalEventTarget(this.doc,e),!e))throw new V(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function iS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var x_=class extends Gc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=sS(i.id,f);for(let m of f){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=P_(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Wc=class extends Gc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=l?sS(l,f):f,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Is.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Uh=class extends Wc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let f=i+"-"+r.id;super(e,n,r,o,s,a,u,l,f),this.contentAttr=t2(f),this.hostAttr=n2(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var $h=class t extends jc{supportsDOMEvents=!0;static makeCurrent(){f_(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=r2();return n==null?null:i2(n)}resetBaseElement(){Kc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return R_(document.cookie,e)}},Kc=null;function r2(){return Kc=Kc||document.head.querySelector("base"),Kc?Kc.getAttribute("href"):null}function i2(t){return new URL(t,document.baseURI).pathname}var o2=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),aS=["alt","control","meta","shift"],s2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},a2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},cS=(()=>{class t extends qc{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),aS.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=s2[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),aS.forEach(s=>{if(s!==i){let a=a2[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(G(tt))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})();function V_(t,e,n){let r=L({rootComponent:t,platformRef:n?.platformRef},c2(e));return SD(r)}function c2(t){return{appProviders:[...f2,...t?.providers??[]],platformProviders:h2}}function u2(){$h.makeCurrent()}function l2(){return new Hn}function d2(){return Py(document),document}var h2=[{provide:ho,useValue:tS},{provide:fh,useValue:u2,multi:!0},{provide:tt,useFactory:d2}];var f2=[{provide:ic,useValue:"root"},{provide:Hn,useFactory:l2},{provide:Bh,useClass:jh,multi:!0,deps:[tt]},{provide:Bh,useClass:cS,multi:!0,deps:[tt]},L_,k_,O_,{provide:ao,useExisting:L_},{provide:zc,useClass:o2},[]];var uS=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(G(tt))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var W="primary",uu=Symbol("RouteTitle"),H_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function yo(t){return new H_(t)}function yS(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function g2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Xn(t[n],e[n]))return!1;return!0}function Xn(t,e){let n=t?z_(t):void 0,r=e?z_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!_S(t[i],e[i]))return!1;return!0}function z_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function _S(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function vS(t){return t.length>0?t[t.length-1]:null}function Lr(t){return Kg(t)?t:xr(t)?Ae(Promise.resolve(t)):q(t)}var m2={exact:IS,subset:wS},ES={exact:y2,subset:_2,ignored:()=>!0};function lS(t,e,n){return m2[n.paths](t.root,e.root,n.matrixParams)&&ES[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function y2(t,e){return Xn(t,e)}function IS(t,e,n){if(!go(t.segments,e.segments)||!qh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!IS(t.children[r],e.children[r],n))return!1;return!0}function _2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>_S(t[n],e[n]))}function wS(t,e,n){return CS(t,e,e.segments,n)}function CS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!go(i,n)||e.hasChildren()||!qh(i,n,r))}else if(t.segments.length===n.length){if(!go(t.segments,n)||!qh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!wS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!go(t.segments,i)||!qh(t.segments,i,r)||!t.children[W]?!1:CS(t.children[W],e,o,r)}}function qh(t,e,n){return e.every((r,i)=>ES[n](t[i].parameters,r.parameters))}var er=class{root;queryParams;fragment;_queryParamMap;constructor(e=new _e([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=yo(this.queryParams),this._queryParamMap}toString(){return I2.serialize(this)}},_e=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gh(this)}},Ei=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=yo(this.parameters),this._parameterMap}toString(){return TS(this)}};function v2(t,e){return go(t,e)&&t.every((n,r)=>Xn(n.parameters,e[r].parameters))}function go(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function E2(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===W&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==W&&(n=n.concat(e(i,r)))}),n}var lu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>new _o,providedIn:"root"})}return t})(),_o=class{parse(e){let n=new G_(e);return new er(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Qc(e.root,!0)}`,r=b2(e.queryParams),i=typeof e.fragment=="string"?`#${w2(e.fragment)}`:"";return`${n}${r}${i}`}},I2=new _o;function Gh(t){return t.segments.map(e=>TS(e)).join("/")}function Qc(t,e){if(!t.hasChildren())return Gh(t);if(e){let n=t.children[W]?Qc(t.children[W],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==W&&r.push(`${i}:${Qc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=E2(t,(r,i)=>i===W?[Qc(t.children[W],!1)]:[`${i}:${Qc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[W]!=null?`${Gh(t)}/${n[0]}`:`${Gh(t)}/(${n.join("//")})`}}function bS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hh(t){return bS(t).replace(/%3B/gi,";")}function w2(t){return encodeURI(t)}function q_(t){return bS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wh(t){return decodeURIComponent(t)}function dS(t){return Wh(t.replace(/\+/g,"%20"))}function TS(t){return`${q_(t.path)}${C2(t.parameters)}`}function C2(t){return Object.entries(t).map(([e,n])=>`;${q_(e)}=${q_(n)}`).join("")}function b2(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Hh(n)}=${Hh(i)}`).join("&"):`${Hh(n)}=${Hh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var T2=/^[^\/()?;#]+/;function j_(t){let e=t.match(T2);return e?e[0]:""}var D2=/^[^\/()?;=#]+/;function S2(t){let e=t.match(D2);return e?e[0]:""}var A2=/^[^=?&#]+/;function R2(t){let e=t.match(A2);return e?e[0]:""}var M2=/^[^&#]+/;function N2(t){let e=t.match(M2);return e?e[0]:""}var G_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[W]=new _e(e,n)),r}parseSegment(){let e=j_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new Ei(Wh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=S2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=j_(this.remaining);i&&(r=i,this.capture(r))}e[Wh(n)]=Wh(r)}parseQueryParam(e){let n=R2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=N2(this.remaining);s&&(r=s,this.capture(r))}let i=dS(n),o=dS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=j_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new V(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=W);let s=this.parseChildren();n[o??W]=Object.keys(s).length===1&&s[W]?s[W]:new _e([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}};function DS(t){return t.segments.length>0?new _e([],{[W]:t}):t}function SS(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=SS(i);if(r===W&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new _e(t.segments,e);return P2(n)}function P2(t){if(t.numberOfChildren===1&&t.children[W]){let e=t.children[W];return new _e(t.segments.concat(e.segments),e.children)}return t}function Ii(t){return t instanceof er}function AS(t,e,n=null,r=null){let i=RS(t);return MS(i,e,n,r)}function RS(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new _e(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=DS(r);return e??i}function MS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return U_(i,i,i,n,r);let o=x2(e);if(o.toRoot())return U_(i,i,new _e([],{}),n,r);let s=O2(o,i,t),a=s.processChildren?Zc(s.segmentGroup,s.index,o.commands):PS(s.segmentGroup,s.index,o.commands);return U_(i,s.segmentGroup,a,n,r)}function Kh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function eu(t){return typeof t=="object"&&t!=null&&t.outlets}function U_(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`});let s;t===e?s=n:s=NS(t,e,n);let a=DS(SS(s));return new er(a,o,i)}function NS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=NS(o,e,n)}),new _e(t.segments,r)}var Qh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Kh(r[0]))throw new V(4003,!1);let i=r.find(eu);if(i&&i!==vS(r))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function x2(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Qh(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Qh(n,e,r)}var Os=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function O2(t,e,n){if(t.isAbsolute)return new Os(e,!0,0);if(!n)return new Os(e,!1,NaN);if(n.parent===null)return new Os(n,!0,0);let r=Kh(t.commands[0])?0:1,i=n.segments.length-1+r;return k2(n,i,t.numberOfDoubleDots)}function k2(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new V(4005,!1);i=r.segments.length}return new Os(r,!1,i-o)}function F2(t){return eu(t[0])?t[0].outlets:{[W]:t}}function PS(t,e,n){if(t??=new _e([],{}),t.segments.length===0&&t.hasChildren())return Zc(t,e,n);let r=L2(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new _e(t.segments.slice(0,r.pathIndex),{});return o.children[W]=new _e(t.segments.slice(r.pathIndex),t.children),Zc(o,0,i)}else return r.match&&i.length===0?new _e(t.segments,{}):r.match&&!t.hasChildren()?W_(t,e,n):r.match?Zc(t,0,i):W_(t,e,n)}function Zc(t,e,n){if(n.length===0)return new _e(t.segments,{});{let r=F2(n),i={};if(Object.keys(r).some(o=>o!==W)&&t.children[W]&&t.numberOfChildren===1&&t.children[W].segments.length===0){let o=Zc(t.children[W],e,n);return new _e(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=PS(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new _e(t.segments,i)}}function L2(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(eu(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!fS(u,l,s))return o;r+=2}else{if(!fS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function W_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(eu(o)){let u=V2(o.outlets);return new _e(r,u)}if(i===0&&Kh(n[0])){let u=t.segments[e];r.push(new Ei(u.path,hS(n[0]))),i++;continue}let s=eu(o)?o.outlets[W]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Kh(a)?(r.push(new Ei(s,hS(a))),i+=2):(r.push(new Ei(s,{})),i++)}return new _e(r,{})}function V2(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=W_(new _e([],{}),0,r))}),e}function hS(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function fS(t,e,n){return t==n.path&&Xn(e,n.parameters)}var Xc="imperative",it=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(it||{}),tn=class{id;url;constructor(e,n){this.id=e,this.url=n}},vo=class extends tn{type=it.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tr=class extends tn{urlAfterRedirects;type=it.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Pt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Pt||{}),tu=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(tu||{}),Jn=class extends tn{reason;code;type=it.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},kr=class extends tn{reason;code;type=it.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Fs=class extends tn{error;target;type=it.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},nu=class extends tn{urlAfterRedirects;state;type=it.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yh=class extends tn{urlAfterRedirects;state;type=it.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zh=class extends tn{urlAfterRedirects;state;shouldActivate;type=it.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Xh=class extends tn{urlAfterRedirects;state;type=it.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jh=class extends tn{urlAfterRedirects;state;type=it.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ef=class{route;type=it.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},tf=class{route;type=it.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},nf=class{snapshot;type=it.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rf=class{snapshot;type=it.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},of=class{snapshot;type=it.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sf=class{snapshot;type=it.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ru=class{},Ls=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function j2(t){return!(t instanceof ru)&&!(t instanceof Ls)}function U2(t,e){return t.providers&&!t._injector&&(t._injector=Nc(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Pn(t){return t.outlet||W}function B2(t,e){let n=t.filter(r=>Pn(r)===e);return n.push(...t.filter(r=>Pn(r)!==e)),n}function Us(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var af=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Us(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Bs(this.rootInjector)}},Bs=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new af(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(G($e))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),cf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=K_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=K_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Q_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Q_(e,this._root).map(n=>n.value)}};function K_(t,e){if(t===e.value)return e;for(let n of e.children){let r=K_(t,n);if(r)return r}return null}function Q_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Q_(t,n);if(r.length)return r.unshift(e),r}return[]}var en=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function xs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var iu=class extends cf{snapshot;constructor(e,n){super(e),this.snapshot=n,rv(this,e)}toString(){return this.snapshot.toString()}};function xS(t){let e=$2(t),n=new le([new Ei("",{})]),r=new le({}),i=new le({}),o=new le({}),s=new le(""),a=new Fr(n,r,o,s,i,W,t,e.root);return a.snapshot=e.root,new iu(new en(a,[]),e)}function $2(t){let e={},n={},r={},o=new mo([],e,r,"",n,W,t,null,{});return new ou("",new en(o,[]))}var Fr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Z(l=>l[uu]))??q(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Z(e=>yo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Z(e=>yo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function uf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&kS(i)&&(r.resolve[uu]=i.title),r}var mo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[uu]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ou=class extends cf{url;constructor(e,n){super(n),this.url=e,rv(this,n)}toString(){return OS(this._root)}};function rv(t,e){e.value._routerState=t,e.children.forEach(n=>rv(t,n))}function OS(t){let e=t.children.length>0?` { ${t.children.map(OS).join(", ")} } `:"";return`${t.value}${e}`}function B_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Xn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Xn(e.params,n.params)||t.paramsSubject.next(n.params),g2(e.url,n.url)||t.urlSubject.next(n.url),Xn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Y_(t,e){let n=Xn(t.params,e.params)&&v2(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Y_(t.parent,e.parent))}function kS(t){return typeof t.title=="string"||t.title===null}var FS=new j(""),du=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=W;activateEvents=new ze;deactivateEvents=new ze;attachEvents=new ze;detachEvents=new ze;routerOutletData=DD();parentContexts=A(Bs);location=A(fo);changeDetector=A(Rs);inputBinder=A(ff,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Z_(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=rt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Rr]})}return t})(),Z_=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Fr?this.route:e===Bs?this.childContexts:e===FS?this.outletData:this.parent.get(e,n)}},ff=new j("");var iv=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=An({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Pe(0,"router-outlet")},dependencies:[du],encapsulation:2})}return t})();function ov(t){let e=t.children&&t.children.map(ov),n=e?te(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==W&&(n.component=iv),n}function H2(t,e,n){let r=su(t,e._root,n?n._root:void 0);return new iu(r,e)}function su(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=z2(t,e,n);return new en(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>su(t,a)),s}}let r=q2(e.value),i=e.children.map(o=>su(t,o));return new en(r,i)}}function z2(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return su(t,r,i);return su(t,r)})}function q2(t){return new Fr(new le(t.url),new le(t.params),new le(t.queryParams),new le(t.fragment),new le(t.data),t.outlet,t.component,t)}var Vs=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},LS="ngNavigationCancelingError";function lf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ii(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=VS(!1,Pt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function VS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[LS]=!0,n.cancellationCode=e,n}function G2(t){return jS(t)&&Ii(t.url)}function jS(t){return!!t&&t[LS]}var W2=(t,e,n,r)=>Z(i=>(new X_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),X_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),B_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=xs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=xs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=xs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=xs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new sf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new rf(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(B_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),B_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},df=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ks=class{component;route;constructor(e,n){this.component=e,this.route=n}};function K2(t,e,n){let r=t._root,i=e?e._root:null;return Yc(r,i,n,[r.value])}function Q2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function $s(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!pm(t)?t:e.get(t):r}function Yc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=xs(e);return t.children.forEach(s=>{Y2(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Jc(a,n.getContext(s),i)),i}function Y2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=Z2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new df(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Yc(t,e,a?a.children:null,r,i):Yc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ks(a.outlet.component,s))}else s&&Jc(e,a,i),i.canActivateChecks.push(new df(r)),o.component?Yc(t,null,a?a.children:null,r,i):Yc(t,null,n,r,i);return i}function Z2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!go(t.url,e.url);case"pathParamsOrQueryParamsChange":return!go(t.url,e.url)||!Xn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Y_(t,e)||!Xn(t.queryParams,e.queryParams);case"paramsChange":default:return!Y_(t,e)}}function Jc(t,e,n){let r=xs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Jc(s,e.children.getContext(o),n):Jc(s,null,n):Jc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ks(e.outlet.component,i)):n.canDeactivateChecks.push(new ks(null,i)):n.canDeactivateChecks.push(new ks(null,i))}function hu(t){return typeof t=="function"}function X2(t){return typeof t=="boolean"}function J2(t){return t&&hu(t.canLoad)}function ej(t){return t&&hu(t.canActivate)}function tj(t){return t&&hu(t.canActivateChild)}function nj(t){return t&&hu(t.canDeactivate)}function rj(t){return t&&hu(t.canMatch)}function US(t){return t instanceof Er||t?.name==="EmptyError"}var zh=Symbol("INITIAL_VALUE");function js(){return Lt(t=>Ed(t.map(e=>e.pipe(an(1),Xg(zh)))).pipe(Z(e=>{for(let n of e)if(n!==!0){if(n===zh)return zh;if(n===!1||ij(n))return n}return!0}),sn(e=>e!==zh),an(1)))}function ij(t){return Ii(t)||t instanceof Vs}function oj(t,e){return Qe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?q(te(L({},n),{guardsResult:!0})):sj(s,r,i,t).pipe(Qe(a=>a&&X2(a)?aj(r,o,t,e):q(a)),Z(a=>te(L({},n),{guardsResult:a})))})}function sj(t,e,n,r){return Ae(t).pipe(Qe(i=>hj(i.component,i.route,n,e,r)),Ir(i=>i!==!0,!0))}function aj(t,e,n,r){return Ae(e).pipe(cs(i=>as(uj(i.route.parent,r),cj(i.route,r),dj(t,i.path,n),lj(t,i.route,n))),Ir(i=>i!==!0,!0))}function cj(t,e){return t!==null&&e&&e(new of(t)),q(!0)}function uj(t,e){return t!==null&&e&&e(new nf(t)),q(!0)}function lj(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return q(!0);let i=r.map(o=>Xa(()=>{let s=Us(e)??n,a=$s(o,s),u=ej(a)?a.canActivate(e,t):Ye(s,()=>a(e,t));return Lr(u).pipe(Ir())}));return q(i).pipe(js())}function dj(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Q2(s)).filter(s=>s!==null).map(s=>Xa(()=>{let a=s.guards.map(u=>{let l=Us(s.node)??n,f=$s(u,l),p=tj(f)?f.canActivateChild(r,t):Ye(l,()=>f(r,t));return Lr(p).pipe(Ir())});return q(a).pipe(js())}));return q(o).pipe(js())}function hj(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return q(!0);let s=o.map(a=>{let u=Us(e)??i,l=$s(a,u),f=nj(l)?l.canDeactivate(t,e,n,r):Ye(u,()=>l(t,e,n,r));return Lr(f).pipe(Ir())});return q(s).pipe(js())}function fj(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return q(!0);let o=i.map(s=>{let a=$s(s,t),u=J2(a)?a.canLoad(e,n):Ye(t,()=>a(e,n));return Lr(u)});return q(o).pipe(js(),BS(r))}function BS(t){return Ug(et(e=>{if(typeof e!="boolean")throw lf(t,e)}),Z(e=>e===!0))}function pj(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return q(!0);let o=i.map(s=>{let a=$s(s,t),u=rj(a)?a.canMatch(e,n):Ye(t,()=>a(e,n));return Lr(u)});return q(o).pipe(js(),BS(r))}var au=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},cu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ps(t){return vr(new au(t))}function gj(t){return vr(new V(4e3,!1))}function mj(t){return vr(VS(!1,Pt.GuardRejected))}var J_=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return q(r);if(i.numberOfChildren>1||!i.children[W])return gj(`${e.redirectTo}`);i=i.children[W]}}applyRedirectCommands(e,n,r,i,o){return yj(n,i,o).pipe(Z(s=>{if(s instanceof er)throw new cu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new cu(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new er(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new _e(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new V(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function yj(t,e,n){if(typeof t=="string")return q(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:f,title:p}=e;return Lr(Ye(n,()=>r({params:l,data:f,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var ev={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _j(t,e,n,r,i){let o=$S(t,e,n);return o.matched?(r=U2(e,r),pj(r,e,n,i).pipe(Z(s=>s===!0?o:L({},ev)))):q(o)}function $S(t,e,n){if(e.path==="**")return vj(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},ev):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||yS)(n,t,e);if(!i)return L({},ev);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function vj(t){return{matched:!0,parameters:t.length>0?vS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function pS(t,e,n,r){return n.length>0&&wj(t,n,r)?{segmentGroup:new _e(e,Ij(r,new _e(n,t.children))),slicedSegments:[]}:n.length===0&&Cj(t,n,r)?{segmentGroup:new _e(t.segments,Ej(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new _e(t.segments,t.children),slicedSegments:n}}function Ej(t,e,n,r){let i={};for(let o of n)if(pf(t,e,o)&&!r[Pn(o)]){let s=new _e([],{});i[Pn(o)]=s}return L(L({},r),i)}function Ij(t,e){let n={};n[W]=e;for(let r of t)if(r.path===""&&Pn(r)!==W){let i=new _e([],{});n[Pn(r)]=i}return n}function wj(t,e,n){return n.some(r=>pf(t,e,r)&&Pn(r)!==W)}function Cj(t,e,n){return n.some(r=>pf(t,e,r))}function pf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function bj(t,e,n){return e.length===0&&!t.children[n]}var tv=class{};function Tj(t,e,n,r,i,o,s="emptyOnly"){return new nv(t,e,n,r,i,s,o).recognize()}var Dj=31,nv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new J_(this.urlSerializer,this.urlTree)}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}recognize(){let e=pS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Z(({children:n,rootSnapshot:r})=>{let i=new en(r,n),o=new ou("",i),s=AS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new mo([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),W,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,W,n).pipe(Z(r=>({children:r,rootSnapshot:n})),wn(r=>{if(r instanceof cu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof au?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(Z(s=>s instanceof en?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ae(o).pipe(cs(s=>{let a=r.children[s],u=B2(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Zg((s,a)=>(s.push(...a),s)),ii(null),Yg(),Qe(s=>{if(s===null)return Ps(r);let a=HS(s);return Sj(a),q(a)}))}processSegment(e,n,r,i,o,s,a){return Ae(n).pipe(cs(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(wn(l=>{if(l instanceof au)return q(null);throw l}))),Ir(u=>!!u),wn(u=>{if(US(u))return bj(r,i,o)?q(new tv):Ps(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return Pn(r)!==s&&(s===W||!pf(i,o,r))?Ps(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Ps(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:m}=$S(n,i,o);if(!u)return Ps(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Dj&&(this.allowRedirects=!1));let y=new mo(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,gS(i),Pn(i),i.component??i._loadedComponent??null,i,mS(i)),b=uf(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(b.params),y.data=Object.freeze(b.data),this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,y,e).pipe(Lt(O=>this.applyRedirects.lineralizeSegments(i,O)),Qe(O=>this.processSegment(e,r,n,O.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=_j(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Lt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Lt(({routes:l})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,b=new mo(m,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,gS(r),Pn(r),r.component??r._loadedComponent??null,r,mS(r)),P=uf(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(P.params),b.data=Object.freeze(P.data);let{segmentGroup:O,slicedSegments:B}=pS(n,m,y,l);if(B.length===0&&O.hasChildren())return this.processChildren(f,l,O,b).pipe(Z(ge=>new en(b,ge)));if(l.length===0&&B.length===0)return q(new en(b,[]));let pe=Pn(r)===o;return this.processSegment(f,l,O,B,pe?W:o,!0,b).pipe(Z(ge=>new en(b,ge instanceof en?[ge]:[])))}))):Ps(n)))}getChildConfig(e,n,r){return n.children?q({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?q({routes:n._loadedRoutes,injector:n._loadedInjector}):fj(e,n,r,this.urlSerializer).pipe(Qe(i=>i?this.configLoader.loadChildren(e,n).pipe(et(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):mj(n))):q({routes:[],injector:e})}};function Sj(t){t.sort((e,n)=>e.value.outlet===W?-1:n.value.outlet===W?1:e.value.outlet.localeCompare(n.value.outlet))}function Aj(t){let e=t.value.routeConfig;return e&&e.path===""}function HS(t){let e=[],n=new Set;for(let r of t){if(!Aj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=HS(r.children);e.push(new en(r.value,i))}return e.filter(r=>!n.has(r))}function gS(t){return t.data||{}}function mS(t){return t.resolve||{}}function Rj(t,e,n,r,i,o){return Qe(s=>Tj(t,e,n,r,s.extractedUrl,i,o).pipe(Z(({state:a,tree:u})=>te(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function Mj(t,e){return Qe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return q(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of zS(u))s.add(l);let a=0;return Ae(s).pipe(cs(u=>o.has(u)?Nj(u,r,t,e):(u.data=uf(u,u.parent,t).resolve,q(void 0))),et(()=>a++),us(1),Qe(u=>a===s.size?q(n):kt))})}function zS(t){let e=t.children.map(n=>zS(n)).flat();return[t,...e]}function Nj(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!kS(i)&&(o[uu]=i.title),Xa(()=>(t.data=uf(t,t.parent,n).resolve,Pj(o,t,e,r).pipe(Z(s=>(t._resolvedData=s,t.data=L(L({},t.data),s),null)))))}function Pj(t,e,n,r){let i=z_(t);if(i.length===0)return q({});let o={};return Ae(i).pipe(Qe(s=>xj(t[s],e,n,r).pipe(Ir(),et(a=>{if(a instanceof Vs)throw lf(new _o,a);o[s]=a}))),us(1),Z(()=>o),wn(s=>US(s)?kt:vr(s)))}function xj(t,e,n,r){let i=Us(e)??r,o=$s(t,i),s=o.resolve?o.resolve(e,n):Ye(i,()=>o(e,n));return Lr(s)}function $_(t){return Lt(e=>{let n=t(e);return n?Ae(n).pipe(Z(()=>e)):q(e)})}var sv=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===W);return r}getResolvedTitleForRoute(n){return n.data[uu]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>A(qS),providedIn:"root"})}return t})(),qS=(()=>{class t extends sv{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(G(uS))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Hs=new j("",{providedIn:"root",factory:()=>({})}),fu=new j(""),GS=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=A(r_);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return q(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Lr(Ye(n,()=>r.loadComponent())).pipe(Z(KS),Lt(QS),et(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),$n(()=>{this.componentLoaders.delete(r)})),o=new rs(i,()=>new Ue).pipe(ns());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=WS(r,this.compiler,n,this.onLoadEndListener).pipe($n(()=>{this.childrenLoaders.delete(r)})),s=new rs(o,()=>new Ue).pipe(ns());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function WS(t,e,n,r){return Lr(Ye(n,()=>t.loadChildren())).pipe(Z(KS),Lt(QS),Qe(i=>i instanceof Ih||Array.isArray(i)?q(i):Ae(e.compileModuleAsync(i))),Z(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(fu,[],{optional:!0,self:!0}).flat()),{routes:s.map(ov),injector:o}}))}function Oj(t){return t&&typeof t=="object"&&"default"in t}function KS(t){return Oj(t)?t.default:t}function QS(t){return q(t)}var gf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>A(kj),providedIn:"root"})}return t})(),kj=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),YS=new j("");var ZS=new j(""),XS=(()=>{class t{currentNavigation=Ut(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ue;transitionAbortWithErrorSubject=new Ue;configLoader=A(GS);environmentInjector=A($e);destroyRef=A(Sr);urlSerializer=A(lu);rootContexts=A(Bs);location=A(Ns);inputBindingEnabled=A(ff,{optional:!0})!==null;titleStrategy=A(sv);options=A(Hs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=A(gf);createViewTransition=A(YS,{optional:!0});navigationErrorHandler=A(ZS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>q(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new ef(i)),r=i=>this.events.next(new tf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;qe(()=>{this.transitions?.next(te(L({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new le(null),this.transitions.pipe(sn(r=>r!==null),Lt(r=>{let i=!1;return q(r).pipe(Lt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Pt.SupersededByNewNavigation),kt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?te(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new kr(o.id,this.urlSerializer.serialize(o.rawUrl),"",tu.IgnoredSameUrlNavigation)),o.resolve(!1),kt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return q(o).pipe(Lt(u=>(this.events.next(new vo(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?kt:Promise.resolve(u))),Rj(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),et(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=u.urlAfterRedirects,f));let l=new nu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:f,restoredState:p,extras:m}=o,y=new vo(u,this.urlSerializer.serialize(l),f,p);this.events.next(y);let b=xS(this.rootComponentType).snapshot;return this.currentTransition=r=te(L({},o),{targetSnapshot:b,urlAfterRedirects:l,extras:te(L({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(P=>(P.finalUrl=l,P)),q(r)}else return this.events.next(new kr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",tu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),kt}),et(o=>{let s=new Yh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Z(o=>(this.currentTransition=r=te(L({},o),{guards:K2(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),oj(this.environmentInjector,o=>this.events.next(o)),et(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw lf(this.urlSerializer,o.guardsResult);let s=new Zh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),sn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Pt.GuardRejected),!1)),$_(o=>{if(o.guards.canActivateChecks.length!==0)return q(o).pipe(et(s=>{let a=new Xh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Lt(s=>{let a=!1;return q(s).pipe(Mj(this.paramsInheritanceStrategy,this.environmentInjector),et({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Pt.NoDataFromResolver)}}))}),et(s=>{let a=new Jh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),$_(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Us(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(et(f=>{a.component=f}),Z(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Ed(s(o.targetSnapshot.root)).pipe(ii(null),an(1))}),$_(()=>this.afterPreactivation()),Lt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ae(a).pipe(Z(()=>r)):q(r)}),Z(o=>{let s=H2(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=te(L({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),et(()=>{this.events.next(new ru)}),W2(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),an(1),wd(new Y(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(sn(()=>!i&&!r.targetRouterState),et(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Pt.Aborted)}))),et({next:o=>{i=!0,this.lastSuccessfulNavigation=qe(this.currentNavigation),this.events.next(new tr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),wd(this.transitionAbortWithErrorSubject.pipe(et(o=>{throw o}))),$n(()=>{i||this.cancelNavigationTransition(r,"",Pt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),wn(o=>{if(this.destroyed)return r.resolve(!1),kt;if(i=!0,jS(o))this.events.next(new Jn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),G2(o)?this.events.next(new Ls(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Fs(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Ye(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Vs){let{message:u,cancellationCode:l}=lf(this.urlSerializer,a);this.events.next(new Jn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Ls(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return kt}))}))}cancelNavigationTransition(n,r,i){let o=new Jn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=qe(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Fj(t){return t!==Xc}var JS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>A(Lj),providedIn:"root"})}return t})(),hf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Lj=(()=>{class t extends hf{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ts(t)))(i||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eA=(()=>{class t{urlSerializer=A(lu);options=A(Hs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=A(Ns);urlHandlingStrategy=A(gf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new er;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof er?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=xS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>A(Vj),providedIn:"root"})}return t})(),Vj=(()=>{class t extends eA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof vo?this.updateStateMemento():n instanceof kr?this.commitTransition(r):n instanceof nu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof ru?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Jn&&n.code!==Pt.SupersededByNewNavigation&&n.code!==Pt.Redirect?this.restoreHistory(r):n instanceof Fs?this.restoreHistory(r,!0):n instanceof tr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=L(L({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=L(L({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ts(t)))(i||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function av(t,e){t.events.pipe(sn(n=>n instanceof tr||n instanceof Jn||n instanceof Fs||n instanceof kr),Z(n=>n instanceof tr||n instanceof kr?0:(n instanceof Jn?n.code===Pt.Redirect||n.code===Pt.SupersededByNewNavigation:!1)?2:1),sn(n=>n!==2),an(1)).subscribe(()=>{e()})}var jj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Uj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},zt=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=A(Jy);stateManager=A(eA);options=A(Hs,{optional:!0})||{};pendingTasks=A(Kn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=A(XS);urlSerializer=A(lu);location=A(Ns);urlHandlingStrategy=A(gf);injector=A($e);_events=new Ue;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=A(JS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=A(fu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!A(ff,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ke;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=qe(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Jn&&r.code!==Pt.Redirect&&r.code!==Pt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof tr)this.navigated=!0;else if(r instanceof Ls){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Fj(i.source)},s);this.scheduleNavigation(a,Xc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}j2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(vt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return qe(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(ov),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=RS(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return MS(p,n,f,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Ii(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Xc,null,r)}navigate(n,r={skipLocationChange:!1}){return Bj(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(ds(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=L({},jj):r===!1?i=L({},Uj):i=r,Ii(n))return lS(this.currentUrlTree,n,i);let o=this.parseUrl(n);return lS(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let f=this.pendingTasks.add();return av(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Bj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new V(4008,!1)}var zs=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ut(null);get href(){return qe(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ue;applicationErrorHandler=A(vt);options=A(Hs,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(A(new Th("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof tr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ii(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Ii(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(H(zt),H(Fr),Sc("tabindex"),H(mi),H(Mr),H(Ms))};static \u0275dir=rt({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Nt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&xc("href",i.reactiveHref(),ky)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Vc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Vc],replaceUrl:[2,"replaceUrl","replaceUrl",Vc],routerLink:"routerLink"},features:[Rr]})}return t})();var Hj=new j("");function cv(t,...e){return Mt([{provide:fu,multi:!0,useValue:t},[],{provide:Fr,useFactory:zj,deps:[zt]},{provide:Ch,multi:!0,useFactory:qj},e.map(n=>n.\u0275providers)])}function zj(t){return t.routerState.root}function qj(){let t=A(je);return e=>{let n=t.get(yi);if(e!==n.components[0])return;let r=t.get(zt),i=t.get(Gj);t.get(Wj)===1&&r.initialNavigation(),t.get(Kj,null,{optional:!0})?.setUpPreloading(),t.get(Hj,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Gj=new j("",{factory:()=>new Ue}),Wj=new j("",{providedIn:"root",factory:()=>1});var Kj=new j("");var nA=()=>{};var lv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var x=function(t,e){if(!t)throw Eo(e)},Eo=function(t){return new Error("Firebase Database ("+lv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var oA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Qj=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Ws={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Qj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new dv;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let b=l<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},dv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},fv=function(t){let e=oA(t);return Ws.encodeByteArray(e,!0)},gu=function(t){return fv(t).replace(/\./g,"")},qs=function(t){try{return Ws.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sA(t){return aA(void 0,t)}function aA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!Yj(n)||(t[n]=aA(t[n],e[n]));return t}function Yj(t){return t!=="__proto__"}function pv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Zj=()=>pv().__FIREBASE_DEFAULTS__,Xj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Jj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&qs(t[1]);return e&&JSON.parse(e)},gv=()=>{try{return nA()||Zj()||Xj()||Jj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mv=t=>{var e,n;return(n=(e=gv())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yf=t=>{let e=mv(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yv=()=>{var t;return(t=gv())===null||t===void 0?void 0:t.config},_v=t=>{var e;return(e=gv())===null||e===void 0?void 0:e[`_${t}`]};var nr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function rr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ks(t){return(await fetch(t,{credentials:"include"})).ok}function _f(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[gu(JSON.stringify(n)),gu(JSON.stringify(s)),""].join(".")}var pu={};function eU(){let t={prod:[],emulator:[]};for(let e of Object.keys(pu))pu[e]?t.emulator.push(e):t.prod.push(e);return t}function tU(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var rA=!1;function Qs(t,e){if(typeof window>"u"||typeof document>"u"||!rr(window.location.host)||pu[t]===e||pu[t]||rA)return;pu[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=eU().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{rA=!0,s()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=tU(r),y=n("text"),b=document.getElementById(y)||document.createElement("span"),P=n("learnmore"),O=document.getElementById(P)||document.createElement("a"),B=n("preprendIcon"),pe=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let ge=m.element;a(ge),f(O,P);let Ke=l();u(pe,B),ge.append(pe,b,O,Ke),document.body.appendChild(ge)}o?(b.innerText="Preview backend disconnected.",pe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mu(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function cA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lA(){let t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ir(){return lv.NODE_CLIENT===!0||lv.NODE_ADMIN===!0}function yu(){try{return typeof indexedDB=="object"}catch{return!1}}function dA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var nU="FirebaseError",nn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nU,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xn.prototype.create)}},xn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?rU(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new nn(i,a,r)}};function rU(t,e){return t.replace(iU,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var iU=/\{\$([^}]+)}/g;function Gs(t){return JSON.parse(t)}function Xe(t){return JSON.stringify(t)}var hA=function(t){let e={},n={},r={},i="";try{let o=t.split(".");e=Gs(qs(o[0])||""),n=Gs(qs(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var fA=function(t){let e=hA(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},pA=function(t){let e=hA(t).claims;return typeof e=="object"&&e.admin===!0};function or(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Io(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function _u(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vu(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function mn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(iA(o)&&iA(s)){if(!mn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function iA(t){return t!==null&&typeof t=="object"}function wo(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ys(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Zs(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var mf=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){let m=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],u=this.chain_[4],l,f;for(let p=0;p<80;p++){p<40?p<20?(l=a^o&(s^a),f=1518500249):(l=o^s^a,f=1859775393):p<60?(l=o&s|a&(o|s),f=2400959708):(l=o^s^a,f=3395469782);let m=(i<<5|i>>>27)+l+u+f+r[p]&4294967295;u=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function gA(t,e){let n=new hv(t,e);return n.subscribe.bind(n)}var hv=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");oU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=uv),i.error===void 0&&(i.error=uv),i.complete===void 0&&(i.complete=uv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function oU(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function uv(){}function vv(t,e){return`${t} failed: ${e} argument `}var mA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,x(r<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Eu=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var Aoe=14400*1e3;function It(t){return t&&t._delegate?t._delegate:t}var lt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Co="[DEFAULT]";var Ef=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new nr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aU(e))try{this.getOrInitializeService({instanceIdentifier:Co})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Co){return this.instances.has(e)}getOptions(e=Co){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Co){return this.component?this.component.multipleInstances?e:Co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function sU(t){return t===Co?void 0:t}function aU(t){return t.instantiationMode==="EAGER"}var Iu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Ef(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var cU=[],fe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(fe||{}),uU={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},lU=fe.INFO,dU={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},hU=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=dU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},yn=class{constructor(e){this.name=e,this._logLevel=lU,this._logHandler=hU,this._userLogHandler=null,cU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}};var fU=(t,e)=>e.some(n=>t instanceof n),yA,_A;function pU(){return yA||(yA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gU(){return _A||(_A=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var vA=new WeakMap,Iv=new WeakMap,EA=new WeakMap,Ev=new WeakMap,Cv=new WeakMap;function mU(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(sr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&vA.set(n,t)}).catch(()=>{}),Cv.set(e,t),e}function yU(t){if(Iv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Iv.set(t,e)}var wv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Iv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||EA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IA(t){wv=t(wv)}function _U(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(If(this),e,...n);return EA.set(r,e.sort?e.sort():[e]),sr(r)}:gU().includes(t)?function(...e){return t.apply(If(this),e),sr(vA.get(this))}:function(...e){return sr(t.apply(If(this),e))}}function vU(t){return typeof t=="function"?_U(t):(t instanceof IDBTransaction&&yU(t),fU(t,pU())?new Proxy(t,wv):t)}function sr(t){if(t instanceof IDBRequest)return mU(t);if(Ev.has(t))return Ev.get(t);let e=vU(t);return e!==t&&(Ev.set(t,e),Cv.set(e,t)),e}var If=t=>Cv.get(t);function CA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=sr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(sr(s.result),u.oldVersion,u.newVersion,sr(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var EU=["get","getKey","getAll","getAllKeys","count"],IU=["put","add","delete","clear"],bv=new Map;function wA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bv.get(e))return bv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=IU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||EU.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return bv.set(e,o),o}IA(t=>te(L({},t),{get:(e,n,r)=>wA(e,n)||t.get(e,n,r),has:(e,n)=>!!wA(e,n)||t.has(e,n)}));var Dv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wU(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function wU(t){let e=t.getComponent();return e?.type==="VERSION"}var Sv="@firebase/app",bA="0.13.2";var Vr=new yn("@firebase/app"),CU="@firebase/app-compat",bU="@firebase/analytics-compat",TU="@firebase/analytics",DU="@firebase/app-check-compat",SU="@firebase/app-check",AU="@firebase/auth",RU="@firebase/auth-compat",MU="@firebase/database",NU="@firebase/data-connect",PU="@firebase/database-compat",xU="@firebase/functions",OU="@firebase/functions-compat",kU="@firebase/installations",FU="@firebase/installations-compat",LU="@firebase/messaging",VU="@firebase/messaging-compat",jU="@firebase/performance",UU="@firebase/performance-compat",BU="@firebase/remote-config",$U="@firebase/remote-config-compat",HU="@firebase/storage",zU="@firebase/storage-compat",qU="@firebase/firestore",GU="@firebase/ai",WU="@firebase/firestore-compat",KU="firebase",QU="11.10.0";var Av="[DEFAULT]",YU={[Sv]:"fire-core",[CU]:"fire-core-compat",[TU]:"fire-analytics",[bU]:"fire-analytics-compat",[SU]:"fire-app-check",[DU]:"fire-app-check-compat",[AU]:"fire-auth",[RU]:"fire-auth-compat",[MU]:"fire-rtdb",[NU]:"fire-data-connect",[PU]:"fire-rtdb-compat",[xU]:"fire-fn",[OU]:"fire-fn-compat",[kU]:"fire-iid",[FU]:"fire-iid-compat",[LU]:"fire-fcm",[VU]:"fire-fcm-compat",[jU]:"fire-perf",[UU]:"fire-perf-compat",[BU]:"fire-rc",[$U]:"fire-rc-compat",[HU]:"fire-gcs",[zU]:"fire-gcs-compat",[qU]:"fire-fst",[WU]:"fire-fst-compat",[GU]:"fire-vertex","fire-js":"fire-js",[KU]:"fire-js-all"};var wu=new Map,ZU=new Map,Rv=new Map;function TA(t,e){try{t.container.addComponent(e)}catch(n){Vr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rn(t){let e=t.name;if(Rv.has(e))return Vr.debug(`There were multiple attempts to register component ${e}.`),!1;Rv.set(e,t);for(let n of wu.values())TA(n,t);for(let n of ZU.values())TA(n,t);return!0}function Ci(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wt(t){return t==null?!1:t.settings!==void 0}var XU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wi=new xn("app","Firebase",XU);var Mv=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wi.create("app-deleted",{appName:this._name})}};var ar=QU;function xv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Av,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw wi.create("bad-app-name",{appName:String(i)});if(n||(n=yv()),!n)throw wi.create("no-options");let o=wu.get(i);if(o){if(mn(n,o.options)&&mn(r,o.config))return o;throw wi.create("duplicate-app",{appName:i})}let s=new Iu(i);for(let u of Rv.values())s.addComponent(u);let a=new Mv(n,r,s);return wu.set(i,a),a}function jr(t=Av){let e=wu.get(t);if(!e&&t===Av&&yv())return xv();if(!e)throw wi.create("no-app",{appName:t});return e}function wf(){return Array.from(wu.values())}function Se(t,e,n){var r;let i=(r=YU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vr.warn(a.join(" "));return}rn(new lt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var JU="firebase-heartbeat-database",eB=1,Cu="firebase-heartbeat-store",Tv=null;function RA(){return Tv||(Tv=CA(JU,eB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cu)}catch(n){console.warn(n)}}}}).catch(t=>{throw wi.create("idb-open",{originalErrorMessage:t.message})})),Tv}async function tB(t){try{let n=(await RA()).transaction(Cu),r=await n.objectStore(Cu).get(MA(t));return await n.done,r}catch(e){if(e instanceof nn)Vr.warn(e.message);else{let n=wi.create("idb-get",{originalErrorMessage:e?.message});Vr.warn(n.message)}}}async function DA(t,e){try{let r=(await RA()).transaction(Cu,"readwrite");await r.objectStore(Cu).put(e,MA(t)),await r.done}catch(n){if(n instanceof nn)Vr.warn(n.message);else{let r=wi.create("idb-set",{originalErrorMessage:n?.message});Vr.warn(r.message)}}}function MA(t){return`${t.name}!${t.options.appId}`}var nB=1024,rB=30,Nv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Pv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=SA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>rB){let s=oB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Vr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=SA(),{heartbeatsToSend:r,unsentEntries:i}=iB(this._heartbeatsCache.heartbeats),o=gu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Vr.warn(n),""}}};function SA(){return new Date().toISOString().substring(0,10)}function iB(t,e=nB){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),AA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),AA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Pv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yu()?dA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await tB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return DA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return DA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function AA(t){return gu(JSON.stringify({version:2,heartbeats:t})).length}function oB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function sB(t){rn(new lt("platform-logger",e=>new Dv(e),"PRIVATE")),rn(new lt("heartbeat",e=>new Nv(e),"PRIVATE")),Se(Sv,bA,t),Se(Sv,bA,"esm2017"),Se("fire-js","")}sB("");var aB="firebase",cB="11.10.0";Se(aB,cB,"app");function NA(t){t===void 0&&(t=A(je));let e=t.get(ys);return n=>new Y(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var cr=new Ki("ANGULARFIRE2_VERSION");function To(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var bi=(t,e)=>{let n=e?[e]:wf(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Xs=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(Xs||{}),PA=d_()&&typeof Zone<"u"?Xs.WARN:Xs.SILENT;var Cf=class{zone;delegate;constructor(e,n=Gg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},ur=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=A(ye);this.outsideAngular=n.runOutsideAngular(()=>new Cf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Cf(typeof Zone>"u"?void 0:Zone.current,qg))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xA=!1;function uB(t,e){!xA&&(PA>Xs.SILENT||d_())&&(xA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),PA>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function lB(t){let e=A(ye,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function bo(t){let e=A(ye,{optional:!0});return e?e.run(()=>t()):t()}var dB=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Ye(n,()=>bo(()=>t.apply(void 0,r)))),Ct=(t,e,n)=>(n||=e?Xs.WARN:Xs.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=A(ur),s=A(ys),a=A($e)}catch{return uB(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=bo(()=>s.add())),i[l]=dB(i[l],r,a));let u=lB(()=>t.apply(this,i));return e?u instanceof Y?u.pipe(ri(o.outsideAngular),ni(o.insideAngular),NA(a)):u instanceof Promise?bo(()=>{let l=s.add();return new Promise((f,p)=>{u.then(m=>Ye(a,()=>bo(()=>f(m))),m=>Ye(a,()=>bo(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:bo(()=>u):u instanceof Y?u.pipe(ri(o.outsideAngular),ni(o.insideAngular)):bo(()=>u)});var On=class{constructor(e){return e}},Ur=class{constructor(){return wf()}};function hB(t){return t&&t.length===1?t[0]:new On(jr())}var Ov=new j("angularfire2._apps"),fB={provide:On,useFactory:hB,deps:[[new nt,Ov]]},pB={provide:Ur,deps:[[new nt,Ov]]};function gB(t){return(e,n)=>{let r=n.get(ho);Se("angularfire",cr.full,"core"),Se("angularfire",cr.full,"app"),Se("angular",dm.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new On(i)}}function OA(t,...e){return Mt([fB,pB,{provide:Ov,useFactory:gB(t),multi:!0,deps:[ye,je,ur,...e]}])}var kA=Ct(xv,!0);var mB=new Map,yB={activated:!1,tokenObservers:[]},_B={initialized:!1,enabled:!1};function kn(t){return mB.get(t)||Object.assign({},yB)}function jA(){return _B}var vB="https://content-firebaseappcheck.googleapis.com/v1";var EB="exchangeDebugToken",FA={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Ase=1440*60*1e3;var Lv=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new nr,this.pending.promise.catch(n=>{}),await IB(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new nr,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function IB(t){return new Promise(e=>{setTimeout(e,t)})}var wB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ti=new xn("appCheck","AppCheck",wB);function UA(t){if(!kn(t).activated)throw Ti.create("use-before-activation",{appName:t.name})}async function BA({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(p){throw Ti.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw Ti.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw Ti.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Ti.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,f=Date.now();return{token:a.token,expireTimeMillis:f+l,issuedAtTimeMillis:f}}function $A(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${vB}/projects/${n}/apps/${r}:${EB}?key=${i}`,body:{debug_token:e}}}var CB="firebase-app-check-database",bB=1,Vv="firebase-app-check-store";var bf=null;function TB(){return bf||(bf=new Promise((t,e)=>{try{let n=indexedDB.open(CB,bB);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Ti.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Vv,{keyPath:"compositeKey"})}}}catch(n){e(Ti.create("storage-open",{originalErrorMessage:n?.message}))}}),bf)}function DB(t,e){return SB(AB(t),e)}async function SB(t,e){let r=(await TB()).transaction(Vv,"readwrite"),o=r.objectStore(Vv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Ti.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function AB(t){return`${t.options.appId}-${t.name}`}var bu=new yn("@firebase/app-check");function kv(t,e){return yu()?DB(t,e).catch(n=>{bu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function HA(){return jA().enabled}async function zA(){let t=jA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var RB={error:"UNKNOWN_ERROR"};function MB(t){return Ws.encodeString(JSON.stringify(t),!1)}async function jv(t,e=!1,n=!1){let r=t.app;UA(r);let i=kn(r),o=i.token,s;if(o&&!Tu(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(Tu(l)?o=l:await kv(r,void 0))}if(!e&&o&&Tu(o))return{token:o.token};let a=!1;if(HA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=BA($A(r,await zA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await kv(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?bu.warn(l.message):n&&bu.error(l),Fv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await kn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?bu.warn(l.message):n&&bu.error(l),s=l}let u;return o?s?Tu(o)?u={token:o.token,internalError:s}:u=Fv(s):(u={token:o.token},i.token=o,await kv(r,o)):u=Fv(s),a&&OB(r,u),u}async function NB(t){let e=t.app;UA(e);let{provider:n}=kn(e);if(HA()){let r=await zA(),{token:i}=await BA($A(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function PB(t,e,n,r){let{app:i}=t,o=kn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Tu(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),LA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>LA(t))}function qA(t,e){let n=kn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function LA(t){let{app:e}=t,n=kn(e),r=n.tokenRefresher;r||(r=xB(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function xB(t){let{app:e}=t;return new Lv(async()=>{let n=kn(e),r;if(n.token?r=await jv(t,!0):r=await jv(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=kn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},FA.RETRIAL_MIN_WAIT,FA.RETRIAL_MAX_WAIT)}function OB(t,e){let n=kn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Tu(t){return t.expireTimeMillis-Date.now()>0}function Fv(t){return{token:MB(RB),error:t}}var Uv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=kn(this.app);for(let n of e)qA(this.app,n.next);return Promise.resolve()}};function kB(t,e){return new Uv(t,e)}function FB(t){return{getToken:e=>jv(t,e),getLimitedUseToken:()=>NB(t),addTokenListener:e=>PB(t,"INTERNAL",e),removeTokenListener:e=>qA(t.app,e)}}var LB="@firebase/app-check",VB="0.10.1";var jB="app-check",VA="app-check-internal";function UB(){rn(new lt(jB,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return kB(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(VA).initialize()})),rn(new lt(VA,t=>{let e=t.getProvider("app-check").getImmediate();return FB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Se(LB,VB)}UB();var BB="app-check";var Di=class{constructor(){return bi(BB)}};var $B=["localhost","0.0.0.0","127.0.0.1"],Use=typeof window<"u"&&$B.includes(window.location.hostname);function aR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var cR=aR,uR=new xn("auth","Firebase",aR());var Mf=new yn("@firebase/auth");function HB(t,...e){Mf.logLevel<=fe.WARN&&Mf.warn(`Auth (${ar}): ${t}`,...e)}function Df(t,...e){Mf.logLevel<=fe.ERROR&&Mf.error(`Auth (${ar}): ${t}`,...e)}function dr(t,...e){throw dE(t,...e)}function Do(t,...e){return dE(t,...e)}function lR(t,e,n){let r=Object.assign(Object.assign({},cR()),{[e]:n});return new xn("auth","Firebase",r).create(e,{appName:t.name})}function Hr(t){return lR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dE(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return uR.create(t,...e)}function z(t,e,...n){if(!t)throw dE(e,...n)}function Br(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Df(e),new Error(e)}function Ri(t,e){t||Br(e)}function zv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function zB(){return GA()==="http:"||GA()==="https:"}function GA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function qB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zB()||uA()||"connection"in navigator)?navigator.onLine:!0}function GB(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var So=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ri(n>e,"Short delay should be less than long delay!"),this.isMobile=mu()||vf()}get(){return qB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function hE(t,e){Ri(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Nf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var WB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var KB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QB=new So(3e4,6e4);function Mi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ni(t,e,n,r,i={}){return dR(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=wo(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=Object.assign({method:e,headers:u},o);return cA()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&rr(t.emulatorConfig.host)&&(l.credentials="include"),Nf.fetch()(await hR(t,t.config.apiHost,n,a),l)})}async function dR(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},WB),e);try{let i=new qv(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Tf(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tf(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Tf(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Tf(t,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw lR(t,f,l);dr(t,f)}}catch(i){if(i instanceof nn)throw i;dr(t,"network-request-failed",{message:String(i)})}}async function Ou(t,e,n,r,i={}){let o=await Ni(t,e,n,r,i);return"mfaPendingCredential"in o&&dr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function hR(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?hE(t.config,i):`${t.config.apiScheme}://${i}`;return KB.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function YB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var qv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Do(this.auth,"network-request-failed")),QB.get())})}};function Tf(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Do(t,e,r);return i.customData._tokenResponse=n,i}function WA(t){return t!==void 0&&t.enterprise!==void 0}var Gv=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return YB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function ZB(t,e){return Ni(t,"GET","/v2/recaptchaConfig",Mi(t,e))}async function XB(t,e){return Ni(t,"POST","/v1/accounts:delete",e)}async function Pf(t,e){return Ni(t,"POST","/v1/accounts:lookup",e)}function Su(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fE(t,e=!1){let n=It(t),r=await n.getIdToken(e),i=pE(r);z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Su(Bv(i.auth_time)),issuedAtTime:Su(Bv(i.iat)),expirationTime:Su(Bv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Bv(t){return Number(t)*1e3}function pE(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Df("JWT malformed, contained fewer than 3 sections"),null;try{let i=qs(n);return i?JSON.parse(i):(Df("Failed to decode base64 JWT payload"),null)}catch(i){return Df("Caught error parsing JWT payload as JSON",i?.toString()),null}}function KA(t){let e=pE(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ru(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof nn&&JB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function JB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Wv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Mu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Su(this.lastLoginAt),this.creationTime=Su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function xf(t){var e;let n=t.auth,r=await t.getIdToken(),i=await Ru(t,Pf(n,{idToken:r}));z(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?fR(o.providerUserInfo):[],a=e$(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,f=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Mu(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function gE(t){let e=It(t);await xf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function e$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fR(t){return t.map(e=>{var{providerId:n}=e,r=Wg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function t$(t,e){let n=await dR(t,{},async()=>{let r=wo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await hR(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&rr(t.emulatorConfig.host)&&(u.credentials="include"),Nf.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function n$(t,e){return Ni(t,"POST","/v2/accounts:revokeToken",Mi(t,e))}var Au=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){z(e.length!==0,"internal-error");let n=KA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await t$(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(z(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(z(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Br("not implemented")}};function Si(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ai=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Wg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Mu(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await Ru(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fE(this,e)}reload(){return gE(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wt(this.auth.app))return Promise.reject(Hr(this.auth));let e=await this.getIdToken();return await Ru(this,XB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,f;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,b=(s=n.photoURL)!==null&&s!==void 0?s:void 0,P=(a=n.tenantId)!==null&&a!==void 0?a:void 0,O=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,B=(l=n.createdAt)!==null&&l!==void 0?l:void 0,pe=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:ge,emailVerified:Ke,isAnonymous:Un,providerData:Ot,stsTokenManager:T}=n;z(ge&&T,e,"internal-error");let _=Au.fromJSON(this.name,T);z(typeof ge=="string",e,"internal-error"),Si(p,e.name),Si(m,e.name),z(typeof Ke=="boolean",e,"internal-error"),z(typeof Un=="boolean",e,"internal-error"),Si(y,e.name),Si(b,e.name),Si(P,e.name),Si(O,e.name),Si(B,e.name),Si(pe,e.name);let E=new t({uid:ge,auth:e,email:m,emailVerified:Ke,displayName:p,isAnonymous:Un,photoURL:b,phoneNumber:y,tenantId:P,stsTokenManager:_,createdAt:B,lastLoginAt:pe});return Ot&&Array.isArray(Ot)&&(E.providerData=Ot.map(I=>Object.assign({},I))),O&&(E._redirectEventId=O),E}static async _fromIdTokenResponse(e,n,r=!1){let i=new Au;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xf(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];z(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?fR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Au;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Mu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var QA=new Map;function $r(t){Ri(t instanceof Function,"Expected a class definition");let e=QA.get(t);return e?(Ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,QA.set(t,e),e)}var r$=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Kv=r$;function Sf(t,e,n){return`firebase:${t}:${e}:${n}`}var Of=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Sf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Sf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await Pf(this.auth,{idToken:e}).catch(()=>{});return n?Ai._fromGetAccountInfoResponse(this.auth,n,e):null}return Ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t($r(Kv),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||$r(Kv),s=Sf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let f=await l._get(s);if(f){let p;if(typeof f=="string"){let m=await Pf(e,{idToken:f}).catch(()=>{});if(!m)break;p=await Ai._fromGetAccountInfoResponse(e,m,f)}else p=Ai._fromJSON(e,f);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function YA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vR(e))return"Blackberry";if(ER(e))return"Webos";if(gR(e))return"Safari";if((e.includes("chrome/")||mR(e))&&!e.includes("edge/"))return"Chrome";if(_R(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function pR(t=ut()){return/firefox\//i.test(t)}function gR(t=ut()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mR(t=ut()){return/crios\//i.test(t)}function yR(t=ut()){return/iemobile/i.test(t)}function _R(t=ut()){return/android/i.test(t)}function vR(t=ut()){return/blackberry/i.test(t)}function ER(t=ut()){return/webos/i.test(t)}function mE(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function i$(t=ut()){var e;return mE(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function o$(){return lA()&&document.documentMode===10}function IR(t=ut()){return mE(t)||_R(t)||ER(t)||vR(t)||/windows phone/i.test(t)||yR(t)}function wR(t,e=[]){let n;switch(t){case"Browser":n=YA(ut());break;case"Worker":n=`${YA(ut())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ar}/${r}`}var Qv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function s$(t,e={}){return Ni(t,"GET","/v2/passwordPolicy",Mi(t,e))}var a$=6,Yv=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:a$,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Zv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kf(this),this.idTokenSubscription=new kf(this),this.beforeStateQueue=new Qv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$r(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Of.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await Pf(this,{idToken:e}),r=await Ai._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(wt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wt(this.app))return Promise.reject(Hr(this));let n=e?It(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wt(this.app)?Promise.reject(Hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wt(this.app)?Promise.reject(Hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await s$(this),n=new Yv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await n$(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&$r(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=await Of.create(this,[$r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(wt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&HB(`Error while retrieving App Check token: ${n.error}`),n?.token}};function Ro(t){return It(t)}var kf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=gA(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var $f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function c$(t){$f=t}function CR(t){return $f.loadJS(t)}function u$(){return $f.recaptchaEnterpriseScript}function l$(){return $f.gapiScript}function bR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Xv=class{constructor(){this.enterprise=new Jv}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},Jv=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var d$="recaptcha-enterprise",TR="NO_RECAPTCHA",eE=class{constructor(e){this.type=d$,this.auth=Ro(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{ZB(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Gv(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})})}function i(o,s,a){let u=window.grecaptcha;WA(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(TR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Xv().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&WA(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=u$();u.length!==0&&(u+=a),CR(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})}};async function Du(t,e,n,r=!1,i=!1){let o=new eE(t),s;if(i)s=TR;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function tE(t,e,n,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=await Du(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=await Du(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=await Du(t,e,n);return r(t,a).catch(async u=>{var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let f=await Du(t,e,n,!1,!0);return r(t,f)}return Promise.reject(u)})}else{let a=await Du(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}function yE(t,e){let n=Ci(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(mn(o,e??{}))return i;dr(i,"already-initialized")}return n.initialize({options:e})}function h$(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map($r);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function _E(t,e,n){let r=Ro(t);z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=DR(e),{host:s,port:a}=f$(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},f=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){z(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),z(mn(l,r.config.emulator)&&mn(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,rr(s)?(Ks(`${o}//${s}${u}`),Qs("Auth",!0)):i||p$()}function DR(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function f$(t){let e=DR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:ZA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:ZA(s)}}}function ZA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function p$(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Nu=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Br("not implemented")}_getIdTokenResponse(e){return Br("not implemented")}_linkToIdToken(e,n){return Br("not implemented")}_getReauthenticationResolver(e){return Br("not implemented")}};async function g$(t,e){return Ni(t,"POST","/v1/accounts:signUp",e)}async function m$(t,e){return Ou(t,"POST","/v1/accounts:signInWithPassword",Mi(t,e))}async function y$(t,e){return Ou(t,"POST","/v1/accounts:signInWithEmailLink",Mi(t,e))}async function _$(t,e){return Ou(t,"POST","/v1/accounts:signInWithEmailLink",Mi(t,e))}var Pu=class t extends Nu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tE(e,n,"signInWithPassword",m$,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return y$(e,{email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tE(e,r,"signUpPassword",g$,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return _$(e,{idToken:n,email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function $v(t,e){return Ou(t,"POST","/v1/accounts:signInWithIdp",Mi(t,e))}function v$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function E$(t){let e=Ys(Zs(t)).link,n=e?Ys(Zs(e)).deep_link_id:null,r=Ys(Zs(t)).deep_link_id;return(r?Ys(Zs(r)).link:null)||r||n||e||t}var Ff=class t{constructor(e){var n,r,i,o,s,a;let u=Ys(Zs(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=v$((i=u.mode)!==null&&i!==void 0?i:null);z(l&&f&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=f,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=E$(e);try{return new t(n)}catch{return null}}};var SR=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Pu._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Ff.parseLink(r);return z(i,"argument-error"),Pu._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Lf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var nE=class extends Lf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function I$(t,e){return Ou(t,"POST","/v1/accounts:signUp",Mi(t,e))}var Js=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await Ai._fromIdTokenResponse(e,r,i),s=XA(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=XA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function XA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var rE=class t extends nn{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function AR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?rE._fromErrorAndOperation(t,o,e,r):o})}async function w$(t,e,n=!1){let r=await Ru(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Js._forOperation(t,"link",r)}async function C$(t,e,n=!1){let{auth:r}=t;if(wt(r.app))return Promise.reject(Hr(r));let i="reauthenticate";try{let o=await Ru(t,AR(r,i,e,t),n);z(o.idToken,r,"internal-error");let s=pE(o.idToken);z(s,r,"internal-error");let{sub:a}=s;return z(t.uid===a,r,"user-mismatch"),Js._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&dr(r,"user-mismatch"),o}}async function RR(t,e,n=!1){if(wt(t.app))return Promise.reject(Hr(t));let r="signIn",i=await AR(t,r,e),o=await Js._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function vE(t,e){return RR(Ro(t),e)}async function MR(t){let e=Ro(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EE(t,e,n){if(wt(t.app))return Promise.reject(Hr(t));let r=Ro(t),s=await tE(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",I$,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&MR(t),u}),a=await Js._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function IE(t,e,n){return wt(t.app)?Promise.reject(Hr(t)):vE(It(t),SR.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&MR(t),r})}function ku(t,e,n,r){return It(t).onIdTokenChanged(e,n,r)}function wE(t,e,n){return It(t).beforeAuthStateChanged(e,n)}function CE(t){return It(t).signOut()}var Vf="__sak";var jf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vf,"1"),this.storage.removeItem(Vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var b$=1e3,T$=10,D$=(()=>{class t extends jf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IR(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);o$()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,T$):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},b$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),NR=D$;var S$=(()=>{class t extends jf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),bE=S$;function A$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var R$=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async f=>f(r.origin,s)),l=await A$(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function PR(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var iE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=PR("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function lr(){return window}function M$(t){lr().location.href=t}function xR(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}async function N$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P$(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function x$(){return xR()?self:null}var OR="firebaseLocalStorageDb",O$=1,Uf="firebaseLocalStorage",kR="fbase_key",Ao=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Hf(t,e){return t.transaction([Uf],e?"readwrite":"readonly").objectStore(Uf)}function k$(){let t=indexedDB.deleteDatabase(OR);return new Ao(t).toPromise()}function oE(){let t=indexedDB.open(OR,O$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Uf,{keyPath:kR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(Uf)?e(r):(r.close(),await k$(),e(await oE()))})})}async function JA(t,e,n){let r=Hf(t,!0).put({[kR]:e,value:n});return new Ao(r).toPromise()}async function F$(t,e){let n=Hf(t,!1).get(e),r=await new Ao(n).toPromise();return r===void 0?null:r.value}function eR(t,e){let n=Hf(t,!0).delete(e);return new Ao(n).toPromise()}var L$=800,V$=3,j$=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oE(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>V$)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=R$._getInstance(x$()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await N$(),!this.activeServiceWorker)return;this.sender=new iE(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||P$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await oE();return await JA(n,Vf,"1"),await eR(n,Vf),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>JA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>F$(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>eR(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=Hf(o,!1).getAll();return new Ao(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),L$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),FR=j$;var Kse=bR("rcb"),Qse=new So(3e4,6e4);function U$(t,e){return e?$r(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var xu=class extends Nu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $v(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $v(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $v(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function B$(t){return RR(t.auth,new xu(t),t.bypassAuthState)}function $$(t){let{auth:e,user:n}=t;return z(n,e,"internal-error"),C$(n,new xu(t),t.bypassAuthState)}async function H$(t){let{auth:e,user:n}=t;return z(n,e,"internal-error"),w$(n,new xu(t),t.bypassAuthState)}var sE=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B$;case"linkViaPopup":case"linkViaRedirect":return H$;case"reauthViaPopup":case"reauthViaRedirect":return $$;default:dr(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Yse=new So(2e3,1e4);var z$="pendingRedirect",Af=new Map,aE=class extends sE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Af.get(this.auth._key());if(!e){try{let r=await q$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Af.set(this.auth._key(),e)}return this.bypassAuthState||Af.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function q$(t,e){let n=K$(e),r=W$(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function G$(t,e){Af.set(t._key(),e)}function W$(t){return $r(t._redirectPersistence)}function K$(t){return Sf(z$,t.config.apiKey,t.name)}async function Q$(t,e,n=!1){if(wt(t.app))return Promise.reject(Hr(t));let r=Ro(t),i=U$(r,e),s=await new aE(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var Y$=600*1e3,cE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Z$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!LR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Do(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Y$&&this.cachedEventUids.clear(),this.cachedEventUids.has(tR(e))}saveEventToCache(e){this.cachedEventUids.add(tR(e)),this.lastProcessedEventTime=Date.now()}};function tR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Z$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LR(t);default:return!1}}async function X$(t,e={}){return Ni(t,"GET","/v1/projects",e)}var J$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eH=/^https?/;async function tH(t){if(t.config.emulator)return;let{authorizedDomains:e}=await X$(t);for(let n of e)try{if(nH(n))return}catch{}dr(t,"unauthorized-domain")}function nH(t){let e=zv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!eH.test(n))return!1;if(J$.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var rH=new So(3e4,6e4);function nR(){let t=lr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function iH(t){return new Promise((e,n)=>{var r,i,o;function s(){nR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nR(),n(Do(t,"network-request-failed"))},timeout:rH.get()})}if(!((i=(r=lr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=lr().gapi)===null||o===void 0)&&o.load)s();else{let a=bR("iframefcb");return lr()[a]=()=>{gapi.load?s():n(Do(t,"network-request-failed"))},CR(`${l$()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Rf=null,e})}var Rf=null;function oH(t){return Rf=Rf||iH(t),Rf}var sH=new So(5e3,15e3),aH="__/auth/iframe",cH="emulator/auth/iframe",uH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dH(t){let e=t.config;z(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?hE(e,cH):`https://${t.config.authDomain}/${aH}`,r={apiKey:e.apiKey,appName:t.name,v:ar},i=lH.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${wo(r).slice(1)}`}async function hH(t){let e=await oH(t),n=lr().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:dH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uH,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Do(t,"network-request-failed"),a=lr().setTimeout(()=>{o(s)},sH.get());function u(){lr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var fH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pH=500,gH=600,mH="_blank",yH="http://localhost",Bf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function _H(t,e,n,r=pH,i=gH){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},fH),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ut().toLowerCase();n&&(a=mR(l)?mH:n),pR(l)&&(e=e||yH,u.scrollbars="yes");let f=Object.entries(u).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if(i$(l)&&a!=="_self")return vH(e||"",a),new Bf(null);let p=window.open(e||"",a,f);z(p,t,"popup-blocked");try{p.focus()}catch{}return new Bf(p)}function vH(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var EH="__/auth/handler",IH="emulator/auth/handler",wH=encodeURIComponent("fac");async function rR(t,e,n,r,i,o){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ar,eventId:i};if(e instanceof Lf){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",_u(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(o||{}))s[f]=p}if(e instanceof nE){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let f of Object.keys(a))a[f]===void 0&&delete a[f];let u=await t._getAppCheckToken(),l=u?`#${wH}=${encodeURIComponent(u)}`:"";return`${CH(t)}?${wo(a).slice(1)}${l}`}function CH({config:t}){return t.emulator?hE(t,IH):`https://${t.authDomain}/${EH}`}var Hv="webStorageSupport",uE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bE,this._completeRedirectFn=Q$,this._overrideRedirectResult=G$}async _openPopup(e,n,r,i){var o;Ri((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await rR(e,n,r,zv(),i);return _H(e,s,PR())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await rR(e,n,r,zv(),i);return M$(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Ri(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await hH(e),r=new cE(e);return n.register("authEvent",i=>(z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hv,{type:Hv},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Hv];s!==void 0&&n(!!s),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IR()||gR()||mE()}},VR=uE;var iR="@firebase/auth",oR="1.10.8";var lE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function bH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TH(t){rn(new lt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;z(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wR(t)},l=new Zv(r,i,o,u);return h$(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rn(new lt("auth-internal",e=>{let n=Ro(e.getProvider("auth").getImmediate());return(r=>new lE(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Se(iR,oR,bH(t)),Se(iR,oR,"esm2017")}var DH=300,SH=_v("authIdTokenMaxAge")||DH,sR=null,AH=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>SH)return;let i=n?.token;sR!==i&&(sR=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function TE(t=jr()){let e=Ci(t,"auth");if(e.isInitialized())return e.getImmediate();let n=yE(t,{popupRedirectResolver:VR,persistence:[FR,NR,bE]}),r=_v("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=AH(o.toString());wE(n,s,()=>s(n.currentUser)),ku(n,a=>s(a))}}let i=mv("auth");return i&&_E(n,`http://${i}`),n}function RH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}c$({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Do("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",RH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TH("Browser");function BR(t){return new Y(function(e){var n=ku(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var $R="auth",hr=class{constructor(e){return e}},Mo=class{constructor(){return bi($R)}};var DE=new j("angularfire2.auth-instances");function m4(t,e){let n=To($R,t,e);return n&&new hr(n)}function y4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new hr(r)}}var _4={provide:Mo,deps:[[new nt,DE]]},v4={provide:hr,useFactory:m4,deps:[[new nt,DE],On]};function HR(t,...e){return Se("angularfire",cr.full,"auth"),Mt([v4,_4,{provide:DE,useFactory:y4(t),multi:!0,deps:[ye,je,ur,Ur,[new nt,Di],...e]}])}var Fu=Ct(BR,!0);var zR=Ct(EE,!0,2);var qR=Ct(TE,!0);var GR=Ct(IE,!0,2);var WR=Ct(CE,!0,2);var KR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},QR={};var zf,YR;(function(){var t;function e(T,_){function E(){}E.prototype=_.prototype,T.D=_.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(I,w,D){for(var v=Array(arguments.length-2),mr=2;mr<arguments.length;mr++)v[mr-2]=arguments[mr];return _.prototype[w].apply(I,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,E){E||(E=0);var I=Array(16);if(typeof _=="string")for(var w=0;16>w;++w)I[w]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(w=0;16>w;++w)I[w]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=T.g[0],E=T.g[1],w=T.g[2];var D=T.g[3],v=_+(D^E&(w^D))+I[0]+3614090360&4294967295;_=E+(v<<7&4294967295|v>>>25),v=D+(w^_&(E^w))+I[1]+3905402710&4294967295,D=_+(v<<12&4294967295|v>>>20),v=w+(E^D&(_^E))+I[2]+606105819&4294967295,w=D+(v<<17&4294967295|v>>>15),v=E+(_^w&(D^_))+I[3]+3250441966&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(D^E&(w^D))+I[4]+4118548399&4294967295,_=E+(v<<7&4294967295|v>>>25),v=D+(w^_&(E^w))+I[5]+1200080426&4294967295,D=_+(v<<12&4294967295|v>>>20),v=w+(E^D&(_^E))+I[6]+2821735955&4294967295,w=D+(v<<17&4294967295|v>>>15),v=E+(_^w&(D^_))+I[7]+4249261313&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(D^E&(w^D))+I[8]+1770035416&4294967295,_=E+(v<<7&4294967295|v>>>25),v=D+(w^_&(E^w))+I[9]+2336552879&4294967295,D=_+(v<<12&4294967295|v>>>20),v=w+(E^D&(_^E))+I[10]+4294925233&4294967295,w=D+(v<<17&4294967295|v>>>15),v=E+(_^w&(D^_))+I[11]+2304563134&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(D^E&(w^D))+I[12]+1804603682&4294967295,_=E+(v<<7&4294967295|v>>>25),v=D+(w^_&(E^w))+I[13]+4254626195&4294967295,D=_+(v<<12&4294967295|v>>>20),v=w+(E^D&(_^E))+I[14]+2792965006&4294967295,w=D+(v<<17&4294967295|v>>>15),v=E+(_^w&(D^_))+I[15]+1236535329&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(w^D&(E^w))+I[1]+4129170786&4294967295,_=E+(v<<5&4294967295|v>>>27),v=D+(E^w&(_^E))+I[6]+3225465664&4294967295,D=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(D^_))+I[11]+643717713&4294967295,w=D+(v<<14&4294967295|v>>>18),v=E+(D^_&(w^D))+I[0]+3921069994&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^D&(E^w))+I[5]+3593408605&4294967295,_=E+(v<<5&4294967295|v>>>27),v=D+(E^w&(_^E))+I[10]+38016083&4294967295,D=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(D^_))+I[15]+3634488961&4294967295,w=D+(v<<14&4294967295|v>>>18),v=E+(D^_&(w^D))+I[4]+3889429448&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^D&(E^w))+I[9]+568446438&4294967295,_=E+(v<<5&4294967295|v>>>27),v=D+(E^w&(_^E))+I[14]+3275163606&4294967295,D=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(D^_))+I[3]+4107603335&4294967295,w=D+(v<<14&4294967295|v>>>18),v=E+(D^_&(w^D))+I[8]+1163531501&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^D&(E^w))+I[13]+2850285829&4294967295,_=E+(v<<5&4294967295|v>>>27),v=D+(E^w&(_^E))+I[2]+4243563512&4294967295,D=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(D^_))+I[7]+1735328473&4294967295,w=D+(v<<14&4294967295|v>>>18),v=E+(D^_&(w^D))+I[12]+2368359562&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(E^w^D)+I[5]+4294588738&4294967295,_=E+(v<<4&4294967295|v>>>28),v=D+(_^E^w)+I[8]+2272392833&4294967295,D=_+(v<<11&4294967295|v>>>21),v=w+(D^_^E)+I[11]+1839030562&4294967295,w=D+(v<<16&4294967295|v>>>16),v=E+(w^D^_)+I[14]+4259657740&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^D)+I[1]+2763975236&4294967295,_=E+(v<<4&4294967295|v>>>28),v=D+(_^E^w)+I[4]+1272893353&4294967295,D=_+(v<<11&4294967295|v>>>21),v=w+(D^_^E)+I[7]+4139469664&4294967295,w=D+(v<<16&4294967295|v>>>16),v=E+(w^D^_)+I[10]+3200236656&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^D)+I[13]+681279174&4294967295,_=E+(v<<4&4294967295|v>>>28),v=D+(_^E^w)+I[0]+3936430074&4294967295,D=_+(v<<11&4294967295|v>>>21),v=w+(D^_^E)+I[3]+3572445317&4294967295,w=D+(v<<16&4294967295|v>>>16),v=E+(w^D^_)+I[6]+76029189&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^D)+I[9]+3654602809&4294967295,_=E+(v<<4&4294967295|v>>>28),v=D+(_^E^w)+I[12]+3873151461&4294967295,D=_+(v<<11&4294967295|v>>>21),v=w+(D^_^E)+I[15]+530742520&4294967295,w=D+(v<<16&4294967295|v>>>16),v=E+(w^D^_)+I[2]+3299628645&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(w^(E|~D))+I[0]+4096336452&4294967295,_=E+(v<<6&4294967295|v>>>26),v=D+(E^(_|~w))+I[7]+1126891415&4294967295,D=_+(v<<10&4294967295|v>>>22),v=w+(_^(D|~E))+I[14]+2878612391&4294967295,w=D+(v<<15&4294967295|v>>>17),v=E+(D^(w|~_))+I[5]+4237533241&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~D))+I[12]+1700485571&4294967295,_=E+(v<<6&4294967295|v>>>26),v=D+(E^(_|~w))+I[3]+2399980690&4294967295,D=_+(v<<10&4294967295|v>>>22),v=w+(_^(D|~E))+I[10]+4293915773&4294967295,w=D+(v<<15&4294967295|v>>>17),v=E+(D^(w|~_))+I[1]+2240044497&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~D))+I[8]+1873313359&4294967295,_=E+(v<<6&4294967295|v>>>26),v=D+(E^(_|~w))+I[15]+4264355552&4294967295,D=_+(v<<10&4294967295|v>>>22),v=w+(_^(D|~E))+I[6]+2734768916&4294967295,w=D+(v<<15&4294967295|v>>>17),v=E+(D^(w|~_))+I[13]+1309151649&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~D))+I[4]+4149444226&4294967295,_=E+(v<<6&4294967295|v>>>26),v=D+(E^(_|~w))+I[11]+3174756917&4294967295,D=_+(v<<10&4294967295|v>>>22),v=w+(_^(D|~E))+I[2]+718787259&4294967295,w=D+(v<<15&4294967295|v>>>17),v=E+(D^(w|~_))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(w+(v<<21&4294967295|v>>>11))&4294967295,T.g[2]=T.g[2]+w&4294967295,T.g[3]=T.g[3]+D&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var E=_-this.blockSize,I=this.B,w=this.h,D=0;D<_;){if(w==0)for(;D<=E;)i(this,T,D),D+=this.blockSize;if(typeof T=="string"){for(;D<_;)if(I[w++]=T.charCodeAt(D++),w==this.blockSize){i(this,I),w=0;break}}else for(;D<_;)if(I[w++]=T[D++],w==this.blockSize){i(this,I),w=0;break}}this.h=w,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var E=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=E&255,E/=256;for(this.u(T),T=Array(16),_=E=0;4>_;++_)for(var I=0;32>I;I+=8)T[E++]=this.g[_]>>>I&255;return T};function o(T,_){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=_(T)}function s(T,_){this.h=_;for(var E=[],I=!0,w=T.length-1;0<=w;w--){var D=T[w]|0;I&&D==_||(E[w]=D,I=!1)}this.g=E}var a={};function u(T){return-128<=T&&128>T?o(T,function(_){return new s([_|0],0>_?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return O(l(-T));for(var _=[],E=1,I=0;T>=E;I++)_[I]=T/E|0,E*=4294967296;return new s(_,0)}function f(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return O(f(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(_,8)),I=p,w=0;w<T.length;w+=8){var D=Math.min(8,T.length-w),v=parseInt(T.substring(w,w+D),_);8>D?(D=l(Math.pow(_,D)),I=I.j(D).add(l(v))):(I=I.j(E),I=I.add(l(v)))}return I}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(P(this))return-O(this).m();for(var T=0,_=1,E=0;E<this.g.length;E++){var I=this.i(E);T+=(0<=I?I:4294967296+I)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(P(this))return"-"+O(this).toString(T);for(var _=l(Math.pow(T,6)),E=this,I="";;){var w=Ke(E,_).g;E=B(E,w.j(_));var D=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=w,b(E))return D+I;for(;6>D.length;)D="0"+D;I=D+I}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function P(T){return T.h==-1}t.l=function(T){return T=B(this,T),P(T)?-1:b(T)?0:1};function O(T){for(var _=T.g.length,E=[],I=0;I<_;I++)E[I]=~T.g[I];return new s(E,~T.h).add(m)}t.abs=function(){return P(this)?O(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],I=0,w=0;w<=_;w++){var D=I+(this.i(w)&65535)+(T.i(w)&65535),v=(D>>>16)+(this.i(w)>>>16)+(T.i(w)>>>16);I=v>>>16,D&=65535,v&=65535,E[w]=v<<16|D}return new s(E,E[E.length-1]&-2147483648?-1:0)};function B(T,_){return T.add(O(_))}t.j=function(T){if(b(this)||b(T))return p;if(P(this))return P(T)?O(this).j(O(T)):O(O(this).j(T));if(P(T))return O(this.j(O(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var _=this.g.length+T.g.length,E=[],I=0;I<2*_;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var w=0;w<T.g.length;w++){var D=this.i(I)>>>16,v=this.i(I)&65535,mr=T.i(w)>>>16,Sa=T.i(w)&65535;E[2*I+2*w]+=v*Sa,pe(E,2*I+2*w),E[2*I+2*w+1]+=D*Sa,pe(E,2*I+2*w+1),E[2*I+2*w+1]+=v*mr,pe(E,2*I+2*w+1),E[2*I+2*w+2]+=D*mr,pe(E,2*I+2*w+2)}for(I=0;I<_;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=_;I<2*_;I++)E[I]=0;return new s(E,0)};function pe(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function ge(T,_){this.g=T,this.h=_}function Ke(T,_){if(b(_))throw Error("division by zero");if(b(T))return new ge(p,p);if(P(T))return _=Ke(O(T),_),new ge(O(_.g),O(_.h));if(P(_))return _=Ke(T,O(_)),new ge(O(_.g),_.h);if(30<T.g.length){if(P(T)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=_;0>=I.l(T);)E=Un(E),I=Un(I);var w=Ot(E,1),D=Ot(I,1);for(I=Ot(I,2),E=Ot(E,2);!b(I);){var v=D.add(I);0>=v.l(T)&&(w=w.add(E),D=v),I=Ot(I,1),E=Ot(E,1)}return _=B(T,w.j(_)),new ge(w,_)}for(w=p;0<=T.l(_);){for(E=Math.max(1,Math.floor(T.m()/_.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),D=l(E),v=D.j(_);P(v)||0<v.l(T);)E-=I,D=l(E),v=D.j(_);b(D)&&(D=m),w=w.add(D),T=B(T,v)}return new ge(w,T)}t.A=function(T){return Ke(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],I=0;I<_;I++)E[I]=this.i(I)&T.i(I);return new s(E,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],I=0;I<_;I++)E[I]=this.i(I)|T.i(I);return new s(E,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],I=0;I<_;I++)E[I]=this.i(I)^T.i(I);return new s(E,this.h^T.h)};function Un(T){for(var _=T.g.length+1,E=[],I=0;I<_;I++)E[I]=T.i(I)<<1|T.i(I-1)>>>31;return new s(E,T.h)}function Ot(T,_){var E=_>>5;_%=32;for(var I=T.g.length-E,w=[],D=0;D<I;D++)w[D]=0<_?T.i(D+E)>>>_|T.i(D+E+1)<<32-_:T.i(D+E);return new s(w,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,YR=QR.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,zf=QR.Integer=s}).apply(typeof KR<"u"?KR:typeof self<"u"?self:typeof window<"u"?window:{});var qf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zr={};var ZR,E4,XR,JR,eM,tM,nM,rM,iM;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,h){return c==Array.prototype||c==Object.prototype||(c[d]=h.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qf=="object"&&qf];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in h))break e;h=h[C]}c=c[c.length-1],g=h[c],d=d(g),d!=g&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var h=0,g=!1,C={next:function(){if(!g&&h<c.length){var S=h++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,h){return h})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function f(c,d,h){return c.call.apply(c.bind,arguments)}function p(c,d,h){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,h){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function y(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function h(){}h.prototype=d.prototype,c.aa=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Qb=function(g,C,S){for(var F=Array(arguments.length-2),be=2;be<arguments.length;be++)F[be-2]=arguments[be];return d.prototype[C].apply(g,F)}}function P(c){let d=c.length;if(0<d){let h=Array(d);for(let g=0;g<d;g++)h[g]=c[g];return h}return[]}function O(c,d){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(u(g)){let C=c.length||0,S=g.length||0;c.length=C+S;for(let F=0;F<S;F++)c[C+F]=g[F]}else c.push(g)}}class B{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function pe(c){return/^[\s\xa0]*$/.test(c)}function ge(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ke(c){return Ke[" "](c),c}Ke[" "]=function(){};var Un=ge().indexOf("Gecko")!=-1&&!(ge().toLowerCase().indexOf("webkit")!=-1&&ge().indexOf("Edge")==-1)&&!(ge().indexOf("Trident")!=-1||ge().indexOf("MSIE")!=-1)&&ge().indexOf("Edge")==-1;function Ot(c,d,h){for(let g in c)d.call(h,c[g],g,c)}function T(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function _(c){let d={};for(let h in c)d[h]=c[h];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let h,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(h in g)c[h]=g[h];for(let S=0;S<E.length;S++)h=E[S],Object.prototype.hasOwnProperty.call(g,h)&&(c[h]=g[h])}}function w(c){var d=1;c=c.split(":");let h=[];for(;0<d&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function D(c){a.setTimeout(()=>{throw c},0)}function v(){var c=ng;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class mr{constructor(){this.h=this.g=null}add(d,h){let g=Sa.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var Sa=new B(()=>new wx,c=>c.reset());class wx{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Aa,Ra=!1,ng=new mr,Nw=()=>{let c=a.Promise.resolve(void 0);Aa=()=>{c.then(Cx)}};var Cx=()=>{for(var c;c=v();){try{c.h.call(c.g)}catch(h){D(h)}var d=Sa;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ra=!1};function Zr(){this.s=this.s,this.C=this.C}Zr.prototype.s=!1,Zr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Zr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var bx=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};a.addEventListener("test",h,d),a.removeEventListener("test",h,d)}catch{}return c})();function Ma(c,d){if(ht.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var h=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Un){e:{try{Ke(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Tx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ma.aa.h.call(this)}}b(Ma,ht);var Tx={2:"touch",3:"pen",4:"mouse"};Ma.prototype.h=function(){Ma.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Na="closure_listenable_"+(1e6*Math.random()|0),Dx=0;function Sx(c,d,h,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=C,this.key=++Dx,this.da=this.fa=!1}function bl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Tl(c){this.src=c,this.g={},this.h=0}Tl.prototype.add=function(c,d,h,g,C){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var F=ig(c,d,g,C);return-1<F?(d=c[F],h||(d.fa=!1)):(d=new Sx(d,this.src,S,!!g,C),d.fa=h,c.push(d)),d};function rg(c,d){var h=d.type;if(h in c.g){var g=c.g[h],C=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=C)&&Array.prototype.splice.call(g,C,1),S&&(bl(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function ig(c,d,h,g){for(var C=0;C<c.length;++C){var S=c[C];if(!S.da&&S.listener==d&&S.capture==!!h&&S.ha==g)return C}return-1}var og="closure_lm_"+(1e6*Math.random()|0),sg={};function Pw(c,d,h,g,C){if(g&&g.once)return Ow(c,d,h,g,C);if(Array.isArray(d)){for(var S=0;S<d.length;S++)Pw(c,d[S],h,g,C);return null}return h=lg(h),c&&c[Na]?c.K(d,h,l(g)?!!g.capture:!!g,C):xw(c,d,h,!1,g,C)}function xw(c,d,h,g,C,S){if(!d)throw Error("Invalid event type");var F=l(C)?!!C.capture:!!C,be=cg(c);if(be||(c[og]=be=new Tl(c)),h=be.add(d,h,g,F,S),h.proxy)return h;if(g=Ax(),h.proxy=g,g.src=c,g.listener=h,c.addEventListener)bx||(C=F),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(Fw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function Ax(){function c(h){return d.call(c.src,c.listener,h)}let d=Rx;return c}function Ow(c,d,h,g,C){if(Array.isArray(d)){for(var S=0;S<d.length;S++)Ow(c,d[S],h,g,C);return null}return h=lg(h),c&&c[Na]?c.L(d,h,l(g)?!!g.capture:!!g,C):xw(c,d,h,!0,g,C)}function kw(c,d,h,g,C){if(Array.isArray(d))for(var S=0;S<d.length;S++)kw(c,d[S],h,g,C);else g=l(g)?!!g.capture:!!g,h=lg(h),c&&c[Na]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],h=ig(S,h,g,C),-1<h&&(bl(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=cg(c))&&(d=c.g[d.toString()],c=-1,d&&(c=ig(d,h,g,C)),(h=-1<c?d[c]:null)&&ag(h))}function ag(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Na])rg(d.i,c);else{var h=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(h,g,c.capture):d.detachEvent?d.detachEvent(Fw(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=cg(d))?(rg(h,c),h.h==0&&(h.src=null,d[og]=null)):bl(c)}}}function Fw(c){return c in sg?sg[c]:sg[c]="on"+c}function Rx(c,d){if(c.da)c=!0;else{d=new Ma(d,this);var h=c.listener,g=c.ha||c.src;c.fa&&ag(c),c=h.call(g,d)}return c}function cg(c){return c=c[og],c instanceof Tl?c:null}var ug="__closure_events_fn_"+(1e9*Math.random()>>>0);function lg(c){return typeof c=="function"?c:(c[ug]||(c[ug]=function(d){return c.handleEvent(d)}),c[ug])}function ft(){Zr.call(this),this.i=new Tl(this),this.M=this,this.F=null}b(ft,Zr),ft.prototype[Na]=!0,ft.prototype.removeEventListener=function(c,d,h,g){kw(this,c,d,h,g)};function Dt(c,d){var h,g=c.F;if(g)for(h=[];g;g=g.F)h.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ht(d,c);else if(d instanceof ht)d.target=d.target||c;else{var C=d;d=new ht(g,c),I(d,C)}if(C=!0,h)for(var S=h.length-1;0<=S;S--){var F=d.g=h[S];C=Dl(F,g,!0,d)&&C}if(F=d.g=c,C=Dl(F,g,!0,d)&&C,C=Dl(F,g,!1,d)&&C,h)for(S=0;S<h.length;S++)F=d.g=h[S],C=Dl(F,g,!1,d)&&C}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var h=c.g[d],g=0;g<h.length;g++)bl(h[g]);delete c.g[d],c.h--}}this.F=null},ft.prototype.K=function(c,d,h,g){return this.i.add(String(c),d,!1,h,g)},ft.prototype.L=function(c,d,h,g){return this.i.add(String(c),d,!0,h,g)};function Dl(c,d,h,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,S=0;S<d.length;++S){var F=d[S];if(F&&!F.da&&F.capture==h){var be=F.listener,ot=F.ha||F.src;F.fa&&rg(c.i,F),C=be.call(ot,g)!==!1&&C}}return C&&!g.defaultPrevented}function Lw(c,d,h){if(typeof c=="function")h&&(c=m(c,h));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Vw(c){c.g=Lw(()=>{c.g=null,c.i&&(c.i=!1,Vw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class Mx extends Zr{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Vw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pa(c){Zr.call(this),this.h=c,this.g={}}b(Pa,Zr);var jw=[];function Uw(c){Ot(c.g,function(d,h){this.g.hasOwnProperty(h)&&ag(d)},c),c.g={}}Pa.prototype.N=function(){Pa.aa.N.call(this),Uw(this)},Pa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dg=a.JSON.stringify,Nx=a.JSON.parse,Px=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function hg(){}hg.prototype.h=null;function Bw(c){return c.h||(c.h=c.i())}function $w(){}var xa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fg(){ht.call(this,"d")}b(fg,ht);function pg(){ht.call(this,"c")}b(pg,ht);var ji={},Hw=null;function Sl(){return Hw=Hw||new ft}ji.La="serverreachability";function zw(c){ht.call(this,ji.La,c)}b(zw,ht);function Oa(c){let d=Sl();Dt(d,new zw(d))}ji.STAT_EVENT="statevent";function qw(c,d){ht.call(this,ji.STAT_EVENT,c),this.stat=d}b(qw,ht);function St(c){let d=Sl();Dt(d,new qw(d,c))}ji.Ma="timingevent";function Gw(c,d){ht.call(this,ji.Ma,c),this.size=d}b(Gw,ht);function ka(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Fa(){this.g=!0}Fa.prototype.xa=function(){this.g=!1};function xx(c,d,h,g,C,S){c.info(function(){if(c.g)if(S)for(var F="",be=S.split("&"),ot=0;ot<be.length;ot++){var me=be[ot].split("=");if(1<me.length){var pt=me[0];me=me[1];var gt=pt.split("_");F=2<=gt.length&&gt[1]=="type"?F+(pt+"="+me+"&"):F+(pt+"=redacted&")}}else F=null;else F=S;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+h+`
`+F})}function Ox(c,d,h,g,C,S,F){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+h+`
`+S+" "+F})}function Bo(c,d,h,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Fx(c,h)+(g?" "+g:"")})}function kx(c,d){c.info(function(){return"TIMEOUT: "+d})}Fa.prototype.info=function(){};function Fx(c,d){if(!c.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(c=0;c<h.length;c++)if(Array.isArray(h[c])){var g=h[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var S=C[0];if(S!="noop"&&S!="stop"&&S!="close")for(var F=1;F<C.length;F++)C[F]=""}}}}return dg(h)}catch{return d}}var Al={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ww={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gg;function Rl(){}b(Rl,hg),Rl.prototype.g=function(){return new XMLHttpRequest},Rl.prototype.i=function(){return{}},gg=new Rl;function Xr(c,d,h,g){this.j=c,this.i=d,this.l=h,this.R=g||1,this.U=new Pa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kw}function Kw(){this.i=null,this.g="",this.h=!1}var Qw={},mg={};function yg(c,d,h){c.L=1,c.v=xl(yr(d)),c.m=h,c.P=!0,Yw(c,null)}function Yw(c,d){c.F=Date.now(),Ml(c),c.A=yr(c.v);var h=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),lC(h.i,"t",g),c.C=0,h=c.j.J,c.h=new Kw,c.g=AC(c.j,h?d:null,!c.m),0<c.O&&(c.M=new Mx(m(c.Y,c,c.g),c.O)),d=c.U,h=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(jw[0]=C.toString()),C=jw);for(var S=0;S<C.length;S++){var F=Pw(h,C[S],g||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Oa(),xx(c.i,c.u,c.A,c.l,c.R,c.m)}Xr.prototype.ca=function(c){c=c.target;let d=this.M;d&&_r(c)==3?d.j():this.Y(c)},Xr.prototype.Y=function(c){try{if(c==this.g)e:{let gt=_r(this.g);var d=this.g.Ba();let zo=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||yC(this.g)))){this.J||gt!=4||d==7||(d==8||0>=zo?Oa(3):Oa(2)),_g(this);var h=this.g.Z();this.X=h;t:if(Zw(this)){var g=yC(this.g);c="";var C=g.length,S=_r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ui(this),La(this);var F="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=h==200,Ox(this.i,this.u,this.A,this.l,this.R,gt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ot=this.g;if((be=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pe(be)){var me=be;break t}}me=null}if(h=me)Bo(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vg(this,h);else{this.o=!1,this.s=3,St(12),Ui(this),La(this);break e}}if(this.P){h=!0;let En;for(;!this.J&&this.C<F.length;)if(En=Lx(this,F),En==mg){gt==4&&(this.s=4,St(14),h=!1),Bo(this.i,this.l,null,"[Incomplete Response]");break}else if(En==Qw){this.s=4,St(15),Bo(this.i,this.l,F,"[Invalid Chunk]"),h=!1;break}else Bo(this.i,this.l,En,null),vg(this,En);if(Zw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||F.length!=0||this.h.h||(this.s=1,St(16),h=!1),this.o=this.o&&h,!h)Bo(this.i,this.l,F,"[Invalid Chunked Response]"),Ui(this),La(this);else if(0<F.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),Tg(pt),pt.M=!0,St(11))}}else Bo(this.i,this.l,F,null),vg(this,F);gt==4&&Ui(this),this.o&&!this.J&&(gt==4?bC(this.j,this):(this.o=!1,Ml(this)))}else eO(this.g),h==400&&0<F.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),Ui(this),La(this)}}}catch{}finally{}};function Zw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Lx(c,d){var h=c.C,g=d.indexOf(`
`,h);return g==-1?mg:(h=Number(d.substring(h,g)),isNaN(h)?Qw:(g+=1,g+h>d.length?mg:(d=d.slice(g,g+h),c.C=g+h,d)))}Xr.prototype.cancel=function(){this.J=!0,Ui(this)};function Ml(c){c.S=Date.now()+c.I,Xw(c,c.I)}function Xw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ka(m(c.ba,c),d)}function _g(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Xr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(kx(this.i,this.A),this.L!=2&&(Oa(),St(17)),Ui(this),this.s=2,La(this)):Xw(this,this.S-c)};function La(c){c.j.G==0||c.J||bC(c.j,c)}function Ui(c){_g(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Uw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function vg(c,d){try{var h=c.j;if(h.G!=0&&(h.g==c||Eg(h.h,c))){if(!c.K&&Eg(h.h,c)&&h.G==3){try{var g=h.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<c.F)Vl(h),Fl(h);else break e;bg(h),St(18)}}else h.za=C[1],0<h.za-h.T&&37500>C[2]&&h.F&&h.v==0&&!h.C&&(h.C=ka(m(h.Za,h),6e3));if(1>=tC(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else $i(h,11)}else if((c.K||h.g==c)&&Vl(h),!pe(d))for(C=h.Da.g.parse(d),d=0;d<C.length;d++){let me=C[d];if(h.T=me[0],me=me[1],h.G==2)if(me[0]=="c"){h.K=me[1],h.ia=me[2];let pt=me[3];pt!=null&&(h.la=pt,h.j.info("VER="+h.la));let gt=me[4];gt!=null&&(h.Aa=gt,h.j.info("SVER="+h.Aa));let zo=me[5];zo!=null&&typeof zo=="number"&&0<zo&&(g=1.5*zo,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let En=c.g;if(En){let Ul=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ul){var S=g.h;S.g||Ul.indexOf("spdy")==-1&&Ul.indexOf("quic")==-1&&Ul.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Ig(S,S.h),S.h=null))}if(g.D){let Dg=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Dg&&(g.ya=Dg,Ne(g.I,g.D,Dg))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-c.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var F=c;if(g.qa=SC(g,g.J?g.ia:null,g.W),F.K){nC(g.h,F);var be=F,ot=g.L;ot&&(be.I=ot),be.B&&(_g(be),Ml(be)),g.g=F}else wC(g);0<h.i.length&&Ll(h)}else me[0]!="stop"&&me[0]!="close"||$i(h,7);else h.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?$i(h,7):Cg(h):me[0]!="noop"&&h.l&&h.l.ta(me),h.v=0)}}Oa(4)}catch{}}var Vx=class{constructor(c,d){this.g=c,this.map=d}};function Jw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function eC(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function tC(c){return c.h?1:c.g?c.g.size:0}function Eg(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Ig(c,d){c.g?c.g.add(d):c.h=d}function nC(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Jw.prototype.cancel=function(){if(this.i=rC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function rC(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.D);return d}return P(c.i)}function jx(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],h=c.length,g=0;g<h;g++)d.push(c[g]);return d}d=[],h=0;for(g in c)d[h++]=c[g];return d}function Ux(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var h=0;h<c;h++)d.push(h);return d}d=[],h=0;for(let g in c)d[h++]=g;return d}}}function iC(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var h=Ux(c),g=jx(c),C=g.length,S=0;S<C;S++)d.call(void 0,g[S],h&&h[S],c)}var oC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bx(c,d){if(c){c=c.split("&");for(var h=0;h<c.length;h++){var g=c[h].indexOf("="),C=null;if(0<=g){var S=c[h].substring(0,g);C=c[h].substring(g+1)}else S=c[h];d(S,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Bi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Bi){this.h=c.h,Nl(this,c.j),this.o=c.o,this.g=c.g,Pl(this,c.s),this.l=c.l;var d=c.i,h=new Ua;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),sC(this,h),this.m=c.m}else c&&(d=String(c).match(oC))?(this.h=!1,Nl(this,d[1]||"",!0),this.o=Va(d[2]||""),this.g=Va(d[3]||"",!0),Pl(this,d[4]),this.l=Va(d[5]||"",!0),sC(this,d[6]||"",!0),this.m=Va(d[7]||"")):(this.h=!1,this.i=new Ua(null,this.h))}Bi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(ja(d,aC,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ja(d,aC,!0),"@"),c.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&c.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(ja(h,h.charAt(0)=="/"?zx:Hx,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",ja(h,Gx)),c.join("")};function yr(c){return new Bi(c)}function Nl(c,d,h){c.j=h?Va(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Pl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function sC(c,d,h){d instanceof Ua?(c.i=d,Wx(c.i,c.h)):(h||(d=ja(d,qx)),c.i=new Ua(d,c.h))}function Ne(c,d,h){c.i.set(d,h)}function xl(c){return Ne(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Va(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ja(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,$x),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function $x(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var aC=/[#\/\?@]/g,Hx=/[#\?:]/g,zx=/[#\?]/g,qx=/[#\?@]/g,Gx=/#/g;function Ua(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Jr(c){c.g||(c.g=new Map,c.h=0,c.i&&Bx(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=Ua.prototype,t.add=function(c,d){Jr(this),this.i=null,c=$o(this,c);var h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function cC(c,d){Jr(c),d=$o(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function uC(c,d){return Jr(c),d=$o(c,d),c.g.has(d)}t.forEach=function(c,d){Jr(this),this.g.forEach(function(h,g){h.forEach(function(C){c.call(d,C,g,this)},this)},this)},t.na=function(){Jr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let g=0;g<d.length;g++){let C=c[g];for(let S=0;S<C.length;S++)h.push(d[g])}return h},t.V=function(c){Jr(this);let d=[];if(typeof c=="string")uC(this,c)&&(d=d.concat(this.g.get($o(this,c))));else{c=Array.from(this.g.values());for(let h=0;h<c.length;h++)d=d.concat(c[h])}return d},t.set=function(c,d){return Jr(this),this.i=null,c=$o(this,c),uC(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function lC(c,d,h){cC(c,d),0<h.length&&(c.i=null,c.g.set($o(c,d),P(h)),c.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var g=d[h];let S=encodeURIComponent(String(g)),F=this.V(g);for(g=0;g<F.length;g++){var C=S;F[g]!==""&&(C+="="+encodeURIComponent(String(F[g]))),c.push(C)}}return this.i=c.join("&")};function $o(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Wx(c,d){d&&!c.j&&(Jr(c),c.i=null,c.g.forEach(function(h,g){var C=g.toLowerCase();g!=C&&(cC(this,g),lC(this,C,h))},c)),c.j=d}function Kx(c,d){let h=new Fa;if(a.Image){let g=new Image;g.onload=y(ei,h,"TestLoadImage: loaded",!0,d,g),g.onerror=y(ei,h,"TestLoadImage: error",!1,d,g),g.onabort=y(ei,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(ei,h,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function Qx(c,d){let h=new Fa,g=new AbortController,C=setTimeout(()=>{g.abort(),ei(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(C),S.ok?ei(h,"TestPingServer: ok",!0,d):ei(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),ei(h,"TestPingServer: error",!1,d)})}function ei(c,d,h,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(h)}catch{}}function Yx(){this.g=new Px}function Zx(c,d,h){let g=h||"";try{iC(c,function(C,S){let F=C;l(C)&&(F=dg(C)),d.push(g+S+"="+encodeURIComponent(F))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Ba(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Ba,hg),Ba.prototype.g=function(){return new Ol(this.l,this.j)},Ba.prototype.i=(function(c){return function(){return c}})({});function Ol(c,d){ft.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Ol,ft),t=Ol.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ha(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ha(this)),this.g&&(this.readyState=3,Ha(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dC(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function dC(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?$a(this):Ha(this),this.readyState==3&&dC(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,$a(this))},t.Qa=function(c){this.g&&(this.response=c,$a(this))},t.ga=function(){this.g&&$a(this)};function $a(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ha(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function Ha(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function hC(c){let d="";return Ot(c,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function wg(c,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=hC(h),typeof c=="string"?h!=null&&encodeURIComponent(String(h)):Ne(c,d,h))}function Oe(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Oe,ft);var Xx=/^https?$/i,Jx=["POST","PUT"];t=Oe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gg.g(),this.v=this.o?Bw(this.o):Bw(gg),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){fC(this,S);return}if(c=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)h.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())h.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Jx,d,void 0))||g||C||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,F]of h)this.g.setRequestHeader(S,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mC(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){fC(this,S)}};function fC(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,pC(c),kl(c)}function pC(c){c.A||(c.A=!0,Dt(c,"complete"),Dt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Dt(this,"complete"),Dt(this,"abort"),kl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kl(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gC(this):this.bb())},t.bb=function(){gC(this)};function gC(c){if(c.h&&typeof s<"u"&&(!c.v[1]||_r(c)!=4||c.Z()!=2)){if(c.u&&_r(c)==4)Lw(c.Ea,0,c);else if(Dt(c,"readystatechange"),_r(c)==4){c.h=!1;try{let F=c.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=F===0){var C=String(c.D).match(oC)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!Xx.test(C?C.toLowerCase():"")}h=g}if(h)Dt(c,"complete"),Dt(c,"success");else{c.m=6;try{var S=2<_r(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",pC(c)}}finally{kl(c)}}}}function kl(c,d){if(c.g){mC(c);let h=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Dt(c,"ready");try{h.onreadystatechange=g}catch{}}}function mC(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function _r(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<_r(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Nx(d)}};function yC(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function eO(c){let d={};c=(c.g&&2<=_r(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(pe(c[g]))continue;var h=w(c[g]);let C=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=d[C]||[];d[C]=S,S.push(h)}T(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function za(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function _C(c){this.Aa=0,this.i=[],this.j=new Fa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=za("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=za("baseRetryDelayMs",5e3,c),this.cb=za("retryDelaySeedMs",1e4,c),this.Wa=za("forwardChannelMaxRetries",2,c),this.wa=za("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Jw(c&&c.concurrentRequestLimit),this.Da=new Yx,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_C.prototype,t.la=8,t.G=1,t.connect=function(c,d,h,g){St(0),this.W=c,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=SC(this,null,this.W),Ll(this)};function Cg(c){if(vC(c),c.G==3){var d=c.U++,h=yr(c.I);if(Ne(h,"SID",c.K),Ne(h,"RID",d),Ne(h,"TYPE","terminate"),qa(c,h),d=new Xr(c,c.j,d),d.L=2,d.v=xl(yr(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&a.Image&&(new Image().src=d.v,h=!0),h||(d.g=AC(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ml(d)}DC(c)}function Fl(c){c.g&&(Tg(c),c.g.cancel(),c.g=null)}function vC(c){Fl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Vl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ll(c){if(!eC(c.h)&&!c.s){c.s=!0;var d=c.Ga;Aa||Nw(),Ra||(Aa(),Ra=!0),ng.add(d,c),c.B=0}}function tO(c,d){return tC(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ka(m(c.Ga,c,d),TC(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new Xr(this,this.j,c),S=this.o;if(this.S&&(S?(S=_(S),I(S,this.S)):S=this.S),this.m!==null||this.O||(C.H=S,S=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=IC(this,C,d),h=yr(this.I),Ne(h,"RID",c),Ne(h,"CVER",22),this.D&&Ne(h,"X-HTTP-Session-Id",this.D),qa(this,h),S&&(this.O?d="headers="+encodeURIComponent(String(hC(S)))+"&"+d:this.m&&wg(h,this.m,S)),Ig(this.h,C),this.Ua&&Ne(h,"TYPE","init"),this.P?(Ne(h,"$req",d),Ne(h,"SID","null"),C.T=!0,yg(C,h,null)):yg(C,h,d),this.G=2}}else this.G==3&&(c?EC(this,c):this.i.length==0||eC(this.h)||EC(this))};function EC(c,d){var h;d?h=d.l:h=c.U++;let g=yr(c.I);Ne(g,"SID",c.K),Ne(g,"RID",h),Ne(g,"AID",c.T),qa(c,g),c.m&&c.o&&wg(g,c.m,c.o),h=new Xr(c,c.j,h,c.B+1),c.m===null&&(h.H=c.o),d&&(c.i=d.D.concat(c.i)),d=IC(c,h,1e3),h.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ig(c.h,h),yg(h,g,d)}function qa(c,d){c.H&&Ot(c.H,function(h,g){Ne(d,g,h)}),c.l&&iC({},function(h,g){Ne(d,g,h)})}function IC(c,d,h){h=Math.min(c.i.length,h);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let S=-1;for(;;){let F=["count="+h];S==-1?0<h?(S=C[0].g,F.push("ofs="+S)):S=0:F.push("ofs="+S);let be=!0;for(let ot=0;ot<h;ot++){let me=C[ot].g,pt=C[ot].map;if(me-=S,0>me)S=Math.max(0,C[ot].g-100),be=!1;else try{Zx(pt,F,"req"+me+"_")}catch{g&&g(pt)}}if(be){g=F.join("&");break e}}}return c=c.i.splice(0,h),d.D=c,g}function wC(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Aa||Nw(),Ra||(Aa(),Ra=!0),ng.add(d,c),c.v=0}}function bg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ka(m(c.Fa,c),TC(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,CC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ka(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),Fl(this),CC(this))};function Tg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function CC(c){c.g=new Xr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=yr(c.qa);Ne(d,"RID","rpc"),Ne(d,"SID",c.K),Ne(d,"AID",c.T),Ne(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ne(d,"TO",c.ja),Ne(d,"TYPE","xmlhttp"),qa(c,d),c.m&&c.o&&wg(d,c.m,c.o),c.L&&(c.g.I=c.L);var h=c.g;c=c.ia,h.L=1,h.v=xl(yr(d)),h.m=null,h.P=!0,Yw(h,c)}t.Za=function(){this.C!=null&&(this.C=null,Fl(this),bg(this),St(19))};function Vl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function bC(c,d){var h=null;if(c.g==d){Vl(c),Tg(c),c.g=null;var g=2}else if(Eg(c.h,d))h=d.D,nC(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=Sl(),Dt(g,new Gw(g,h)),Ll(c)}else wC(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&tO(c,d)||g==2&&bg(c)))switch(h&&0<h.length&&(d=c.h,d.i=d.i.concat(h)),C){case 1:$i(c,5);break;case 4:$i(c,10);break;case 3:$i(c,6);break;default:$i(c,2)}}}function TC(c,d){let h=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(h*=2),h*d}function $i(c,d){if(c.j.info("Error code "+d),d==2){var h=m(c.fb,c),g=c.Xa;let C=!g;g=new Bi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Nl(g,"https"),xl(g),C?Kx(g.toString(),h):Qx(g.toString(),h)}else St(2);c.G=0,c.l&&c.l.sa(d),DC(c),vC(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function DC(c){if(c.G=0,c.ka=[],c.l){let d=rC(c.h);(d.length!=0||c.i.length!=0)&&(O(c.ka,d),O(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function SC(c,d,h){var g=h instanceof Bi?yr(h):new Bi(h);if(g.g!="")d&&(g.g=d+"."+g.g),Pl(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var S=new Bi(null);g&&Nl(S,g),d&&(S.g=d),C&&Pl(S,C),h&&(S.l=h),g=S}return h=c.D,d=c.ya,h&&d&&Ne(g,h,d),Ne(g,"VER",c.la),qa(c,g),g}function AC(c,d,h){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Oe(new Ba({eb:h})):new Oe(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function RC(){}t=RC.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function jl(){}jl.prototype.g=function(c,d){return new Qt(c,d)};function Qt(c,d){ft.call(this),this.g=new _C(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!pe(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!pe(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ho(this)}b(Qt,ft),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Cg(this.g)},Qt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.u&&(h={},h.__data__=dg(c),c=h);d.i.push(new Vx(d.Ya++,c)),d.G==3&&Ll(d)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Cg(this.g),delete this.g,Qt.aa.N.call(this)};function MC(c){fg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(MC,fg);function NC(){pg.call(this),this.status=1}b(NC,pg);function Ho(c){this.g=c}b(Ho,RC),Ho.prototype.ua=function(){Dt(this.g,"a")},Ho.prototype.ta=function(c){Dt(this.g,new MC(c))},Ho.prototype.sa=function(c){Dt(this.g,new NC)},Ho.prototype.ra=function(){Dt(this.g,"b")},jl.prototype.createWebChannel=jl.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,iM=zr.createWebChannelTransport=function(){return new jl},rM=zr.getStatEventTarget=function(){return Sl()},nM=zr.Event=ji,tM=zr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Al.NO_ERROR=0,Al.TIMEOUT=8,Al.HTTP_ERROR=6,eM=zr.ErrorCode=Al,Ww.COMPLETE="complete",JR=zr.EventType=Ww,$w.EventType=xa,xa.OPEN="a",xa.CLOSE="b",xa.ERROR="c",xa.MESSAGE="d",ft.prototype.listen=ft.prototype.K,XR=zr.WebChannel=$w,E4=zr.FetchXmlHttpFactory=Ba,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,ZR=zr.XhrIo=Oe}).apply(typeof qf<"u"?qf:typeof self<"u"?self:typeof window<"u"?window:{});var oM="@firebase/firestore",sM="4.8.0";var dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");var Hu="11.10.0";var ia=new yn("@firebase/firestore");function Fn(t,...e){if(ia.logLevel<=fe.DEBUG){let n=e.map(WE);ia.debug(`Firestore (${Hu}): ${t}`,...n)}}function vM(t,...e){if(ia.logLevel<=fe.ERROR){let n=e.map(WE);ia.error(`Firestore (${Hu}): ${t}`,...n)}}function I4(t,...e){if(ia.logLevel<=fe.WARN){let n=e.map(WE);ia.warn(`Firestore (${Hu}): ${t}`,...n)}}function WE(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function qt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,EM(t,r,n)}function EM(t,e,n){let r=`FIRESTORE (${Hu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vM(r),new Error(r)}function No(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||EM(e,i,r)}var he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ae=class extends nn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Po=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Gf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},AE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}},RE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},ME=class{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){No(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Po;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Po,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Fn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(Fn("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Po)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Fn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(No(typeof r.accessToken=="string",31837,{l:r}),new Gf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return No(e===null||typeof e=="string",2055,{h:e}),new dt(e)}},NE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},PE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new NE(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Wf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},xE=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){No(this.o===void 0,3512);let r=o=>{o.error!=null&&Fn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,Fn("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{Fn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):Fn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(No(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Wf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function w4(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function C4(){return new TextEncoder}var OE=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=w4(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function _n(t,e){return t<e?-1:t>e?1:0}function b4(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return _n(r,i);{let o=C4(),s=T4(o.encode(aM(t,n)),o.encode(aM(e,n)));return s!==0?s:_n(r,i)}}n+=r>65535?2:1}return _n(t.length,e.length)}function aM(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function T4(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return _n(t[n],e[n]);return _n(t.length,e.length)}var cM="__name__",Kf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&qt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&qt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return _n(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):b4(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zf.fromString(e.substring(4,e.length-2))}},qr=class t extends Kf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new ae(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},D4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,kE=class t extends Kf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return D4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cM}static keyField(){return new t([cM])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new ae(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ae(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ae(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ae(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var Gr=class t{constructor(e){this.path=e}static fromPath(e){return new t(qr.fromString(e))}static fromName(e){return new t(qr.fromString(e).popFirst(5))}static empty(){return new t(qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new qr(e.slice()))}};function S4(t,e,n,r){if(e===!0&&r===!0)throw new ae(he.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function A4(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function R4(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":qt(12329,{type:typeof t})}function M4(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=R4(t);throw new ae(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function We(t,e){let n={typeString:t};return e&&(n.value=e),n}function zu(t,e){if(!A4(t))throw new ae(he.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new ae(he.INVALID_ARGUMENT,n);return!0}var uM=-62135596800,lM=1e6,Lu=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*lM);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<uM)throw new ae(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lM}_compareTo(e){return this.seconds===e.seconds?_n(this.nanoseconds,e.nanoseconds):_n(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zu(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-uM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Lu._jsonSchemaVersion="firestore/timestamp/1.0",Lu._jsonSchema={type:We("string",Lu._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};var FE=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};FE.UNKNOWN_ID=-1;function N4(t){return t.name==="IndexedDbTransactionError"}function P4(t){return t===0&&1/t==-1/0}var x4="remoteDocuments",IM="owner";var wM="mutationQueues";var CM="mutations";var bM="documentMutations",O4="remoteDocumentsV14";var TM="remoteDocumentGlobal";var DM="targets";var SM="targetDocuments";var AM="targetGlobal",RM="collectionParents";var MM="clientMetadata";var NM="bundles";var PM="namedQueries";var k4="indexConfiguration";var F4="indexState";var L4="indexEntries";var xM="documentOverlays";var V4="globals";var j4=[wM,CM,bM,x4,DM,IM,AM,SM,MM,TM,RM,NM,PM],nce=[...j4,xM],U4=[wM,CM,bM,O4,DM,IM,AM,SM,MM,TM,RM,NM,PM,xM],B4=U4,$4=[...B4,k4,F4,L4];var rce=[...$4,V4];var oa=class t{constructor(e,n){this.comparator=e,this.root=n||pr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ea(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ea(this.root,e,this.comparator,!1)}getReverseIterator(){return new ea(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ea(this.root,e,this.comparator,!0)}},ea=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},pr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qt(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw qt(27949);return e+(this.isRed()?0:1)}};pr.EMPTY=null,pr.RED=!0,pr.BLACK=!1;pr.EMPTY=new class{constructor(){this.size=0}get key(){throw qt(57766)}get value(){throw qt(16141)}get color(){throw qt(16727)}get left(){throw qt(29726)}get right(){throw qt(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new pr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Qf=class t{constructor(e){this.comparator=e,this.data=new oa(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yf(this.data.getIterator())}getIteratorFrom(e){return new Yf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Yf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var LE=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Pi=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new LE("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _n(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Pi.EMPTY_BYTE_STRING=new Pi("");var H4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function z4(t){if(No(!!t,39018),typeof t=="string"){let e=0,n=H4.exec(t);if(No(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vu(t.seconds),nanos:Vu(t.nanos)}}function Vu(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function q4(t){return typeof t=="string"?Pi.fromBase64String(t):Pi.fromUint8Array(t)}var VE="(default)",jE=class t{constructor(e,n){this.projectId=e,this.database=n||VE}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===VE}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var OM="__type__",G4="__max__";var kM="__vector__",FM="value";function W4(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[OM])===null||n===void 0?void 0:n.stringValue)===kM}function K4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===G4}var oce={mapValue:{fields:{[OM]:{stringValue:kM},[FM]:{arrayValue:{}}}}};var UE=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Q4(t){return new UE(t)}var sce=new oa(Gr.comparator);var ace=new oa(Gr.comparator);var cce=new oa(Gr.comparator),uce=new Qf(Gr.comparator);var lce=new Qf(_n);var dM,de;(de=dM||(dM={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var dce=new zf([4294967295,4294967295],0);var Zf=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Vu(e.integerValue));else if("doubleValue"in e){let r=Vu(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),P4(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=z4(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(q4(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?K4(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):W4(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):qt(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=FM,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Vu(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),Gr.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Zf.Ut=new Zf;var hce=new Uint8Array(0);var LM=41943040,fr=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(LM,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);var Y4=1048576;function SE(){return typeof document<"u"?document:null}var BE=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&Fn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var $E=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Po,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var hM,fM;(fM=hM||(hM={})).Fa="default",fM.Cache="cache";function Z4(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var pM=new Map;var VM="firestore.googleapis.com",gM=!0,Xf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VM,this.ssl=gM}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:gM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Y4)throw new ae(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}S4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Z4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ae(he.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ae(he.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ae(he.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Jf=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new AE;switch(r.type){case"firstParty":return new PE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=pM.get(n);r&&(Fn("ComponentProvider","Removing Datastore"),pM.delete(n),r.terminate())})(this),Promise.resolve()}};function jM(t,e,n,r={}){var i;t=M4(t,Jf);let o=rr(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(Ks(`https://${u}`),Qs("Firestore",!0)),s.host!==VM&&s.host!==u&&I4("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!mn(l,a)&&(t._setSettings(l),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=dt.MOCK_USER;else{f=_f(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ae(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new dt(m)}t._authCredentials=new RE(new Gf(f,p))}}var HE=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},xo=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zE(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(zu(n,t._jsonSchema))return new t(e,r||null,new Gr(qr.fromString(n.referencePath)))}};xo._jsonSchemaVersion="firestore/documentReference/1.0",xo._jsonSchema={type:We("string",xo._jsonSchemaVersion),referencePath:We("string")};var zE=class t extends HE{constructor(e,n,r){super(e,n,Q4(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xo(this.firestore,null,new Gr(e))}withConverter(e){return new t(this.firestore,e,this._path)}};var mM="AsyncQueue",ep=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new BE(this,"async_queue_retry"),this.oc=()=>{let r=SE();r&&Fn(mM,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=SE();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=SE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new Po;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!N4(e))throw e;Fn(mM,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,vM("INTERNAL UNHANDLED ERROR: ",yM(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=$E.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&qt(47125,{hc:yM(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function yM(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var qE=class extends Jf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ep,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ep(e),this._firestoreClient=void 0,await e}}};function UM(t,e){let n=typeof t=="object"?t:jr(),r=typeof t=="string"?t:e||VE,i=Ci(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=yf("firestore");o&&jM(i,...o)}return i}var ju=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Pi.fromBase64String(e))}catch(n){throw new ae(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Pi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zu(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};ju._jsonSchemaVersion="firestore/bytes/1.0",ju._jsonSchema={type:We("string",ju._jsonSchemaVersion),bytes:We("string")};var tp=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kE(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Uu=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _n(this._lat,e._lat)||_n(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(zu(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Uu._jsonSchemaVersion="firestore/geoPoint/1.0",Uu._jsonSchema={type:We("string",Uu._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};var Bu=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zu(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new ae(he.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Bu._jsonSchemaVersion="firestore/vectorValue/1.0",Bu._jsonSchema={type:We("string",Bu._jsonSchemaVersion),vectorValues:We("object")};var X4=new RegExp("[~\\*/\\[\\]]");function J4(t,e,n){if(e.search(X4)>=0)throw _M(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tp(...e.split("."))._internalPath}catch{throw _M(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _M(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new ae(he.INVALID_ARGUMENT,a+t+u)}var np=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new GE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(BM("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},GE=class extends np{data(){return super.data()}};function BM(t,e){return typeof e=="string"?J4(t,e):e instanceof tp?e._internalPath:e._delegate._internalPath}var ta=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},na=class t extends np{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ra(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(BM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(he.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};na._jsonSchemaVersion="firestore/documentSnapshot/1.0",na._jsonSchema={type:We("string",na._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};var ra=class extends na{data(e={}){return super.data(e)}},$u=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ra(this._firestore,this._userDataWriter,r.key,r,new ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ra(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ta(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ra(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ta(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:e3(a.type),doc:u,oldIndex:l,newIndex:f}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(he.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=OE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function e3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qt(61501,{type:t})}}$u._jsonSchemaVersion="firestore/querySnapshot/1.0",$u._jsonSchema={type:We("string",$u._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};(function(e,n=!0){(function(i){Hu=i})(ar),rn(new lt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new qE(new ME(r.getProvider("auth-internal")),new xE(s,r.getProvider("app-check-internal")),(function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ae(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jE(l.options.projectId,f)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Se(oM,sM,e),Se(oM,sM,"esm2017")})();var qu=class{constructor(e){return e}},$M="firestore",KE=class{constructor(){return bi($M)}};var QE=new j("angularfire2.firestore-instances");function t3(t,e){let n=To($M,t,e);return n&&new qu(n)}function n3(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new qu(r)}}var r3={provide:KE,deps:[[new nt,QE]]},i3={provide:qu,useFactory:t3,deps:[[new nt,QE],On]};function HM(t,...e){return Se("angularfire",cr.full,"fst"),Mt([i3,r3,{provide:QE,useFactory:n3(t),multi:!0,deps:[ye,je,ur,Ur,[new nt,Mo],[new nt,Di],...e]}])}var zM=Ct(UM,!0);var qM="@firebase/database",GM="1.0.20";var XI="";function o3(t){XI=t}var rI=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Xe(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Gs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var iI=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return or(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var bN=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new rI(e)}}catch{}return new iI},ko=bN("localStorage"),oI=bN("sessionStorage");var ua=new yn("@firebase/database"),s3=(function(){let t=1;return function(){return t++}})(),TN=function(t){let e=mA(t),n=new mf;n.update(e);let r=n.digest();return Ws.encodeByteArray(r)},cl=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=cl.apply(null,r):typeof r=="object"?e+=Xe(r):e+=r,e+=" "}return e},Fo=null,WM=!0,a3=function(t,e){x(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ua.logLevel=fe.VERBOSE,Fo=ua.log.bind(ua),e&&oI.set("logging_enabled",!0)):typeof t=="function"?Fo=t:(Fo=null,oI.remove("logging_enabled"))},bt=function(...t){if(WM===!0&&(WM=!1,Fo===null&&oI.get("logging_enabled")===!0&&a3(!0)),Fo){let e=cl.apply(null,t);Fo(e)}},ul=function(t){return function(...e){bt(t,...e)}},sI=function(...t){let e="FIREBASE INTERNAL ERROR: "+cl(...t);ua.error(e)},Wr=function(...t){let e=`FIREBASE FATAL ERROR: ${cl(...t)}`;throw ua.error(e),new Error(e)},on=function(...t){let e="FIREBASE WARNING: "+cl(...t);ua.warn(e)},c3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&on("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},DN=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},u3=function(t){if(ir()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ha="[MIN_NAME]",Lo="[MAX_NAME]",va=function(t,e){if(t===e)return 0;if(t===ha||e===Lo)return-1;if(e===ha||t===Lo)return 1;{let n=KM(t),r=KM(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},l3=function(t,e){return t===e?0:t<e?-1:1},Gu=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Xe(e))},JI=function(t){if(typeof t!="object"||t===null)return Xe(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Xe(e[r]),n+=":",n+=JI(t[e[r]]);return n+="}",n},SN=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Wt(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var AN=function(t){x(!DN(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,u;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(u=n;u;u-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(u=e;u;u-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let f=l.join(""),p="";for(u=0;u<64;u+=8){let m=parseInt(f.substr(u,8),2).toString(16);m.length===1&&(m="0"+m),p=p+m}return p.toLowerCase()},d3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},h3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function f3(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var p3=new RegExp("^-?(0*)\\d{1,10}$"),g3=-2147483648,m3=2147483647,KM=function(t){if(p3.test(t)){let e=Number(t);if(e>=g3&&e<=m3)return e}return null},ll=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw on("Exception was thrown by user callback.",n),e},Math.floor(0))}},y3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Zu=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var aI=class{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,wt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){on(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var cI=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(bt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',on(e)}},Xu=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),ip="5",RN="v",MN="s",NN="r",PN="f",xN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ON="ls",kN="p",uI="ac",FN="websocket",LN="long_polling";var op=class{constructor(e,n,r,i,o=!1,s="",a=!1,u=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ko.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ko.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function _3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function VN(t,e,n){x(typeof e=="string","typeof type must == string"),x(typeof n=="object","typeof params must == object");let r;if(e===FN)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===LN)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);_3(t)&&(n.ns=t.namespace);let i=[];return Wt(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var lI=class{constructor(){this.counters_={}}incrementCounter(e,n=1){or(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return sA(this.counters_)}};var YE={},ZE={};function ew(t){let e=t.toString();return YE[e]||(YE[e]=new lI),YE[e]}function v3(t,e){let n=t.toString();return ZE[n]||(ZE[n]=e()),ZE[n]}var dI=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ll(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var QM="start",E3="close",I3="pLPCommand",w3="pRTLPCB",jN="id",UN="pw",BN="ser",C3="cb",b3="seg",T3="ts",D3="d",S3="dframe",$N=1870,HN=30,A3=$N-HN,R3=25e3,M3=3e4,hI=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ul(e),this.stats_=ew(n),this.urlFn=u=>(this.appCheckToken&&(u[uI]=this.appCheckToken),VN(n,LN,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new dI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(M3)),u3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fI((...o)=>{let[s,a,u,l,f]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===QM)this.id=a,this.password=u;else if(s===E3)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[QM]="t",r[BN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[C3]=this.scriptTagHolder.uniqueCallbackIdentifier),r[RN]=ip,this.transportSessionId&&(r[MN]=this.transportSessionId),this.lastSessionId&&(r[ON]=this.lastSessionId),this.applicationId&&(r[kN]=this.applicationId),this.appCheckToken&&(r[uI]=this.appCheckToken),typeof location<"u"&&location.hostname&&xN.test(location.hostname)&&(r[NN]=PN);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return ir()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!d3()&&!h3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=Xe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=fv(n),i=SN(r,A3);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(ir())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[S3]="t",r[jN]=e,r[UN]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=Xe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},fI=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,ir())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=s3(),window[I3+this.uniqueCallbackIdentifier]=e,window[w3+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){bt("frame writing exception"),a.stack&&bt(a.stack),bt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||bt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[jN]=this.myID,e[UN]=this.myPW,e[BN]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+HN+r.length<=$N;){let s=this.pendingSegs.shift();r=r+"&"+b3+i+"="+s.seg+"&"+T3+i+"="+s.ts+"&"+D3+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(R3)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){ir()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{bt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var N3=16384,P3=45e3,sp=null;typeof MozWebSocket<"u"?sp=MozWebSocket:typeof WebSocket<"u"&&(sp=WebSocket);var Wu=(()=>{class t{constructor(n,r,i,o,s,a,u){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ul(this.connId),this.stats_=ew(r),this.connURL=t.connectionURL_(r,a,u,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[RN]=ip,!ir()&&typeof location<"u"&&location.hostname&&xN.test(location.hostname)&&(a[NN]=PN),r&&(a[MN]=r),i&&(a[ON]=i),o&&(a[uI]=o),s&&(a[kN]=s),VN(n,FN,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ko.set("previous_websocket_failure",!0);try{let i;if(ir()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${ip}/${XI}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new sp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&sp!==null&&!t.forceDisallow_}static previouslyFailed(){return ko.isInMemoryStorage||ko.get("previous_websocket_failure")===!0}markConnectionHealthy(){ko.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Gs(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(x(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Xe(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=SN(r,N3);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(P3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),x3=(()=>{class t{static get ALL_TRANSPORTS(){return[hI,Wu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=Wu&&Wu.isAvailable(),i=r&&!Wu.previouslyFailed();if(n.webSocketOnly&&(r||on("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Wu];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),O3=6e4,k3=5e3,F3=10*1024,L3=100*1024,XE="t",YM="d",V3="s",ZM="r",j3="e",XM="o",JM="a",eN="n",tN="p",U3="h",pI=class{constructor(e,n,r,i,o,s,a,u,l,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ul("c:"+this.id+":"),this.transportManager_=new x3(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Zu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>L3?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>F3?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(XE in e){let n=e[XE];n===JM?this.upgradeIfSecondaryHealthy_():n===ZM?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===XM&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Gu("t",e),r=Gu("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tN,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:JM,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:eN,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Gu("t",e),r=Gu("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Gu(XE,e);if(YM in e){let r=e[YM];if(n===U3){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===eN){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===V3?this.onConnectionShutdown_(r):n===ZM?this.onReset_(r):n===j3?sI("Server Error: "+r):n===XM?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sI("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ip!==r&&on("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Zu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(O3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(k3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:tN,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ko.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var ap=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var cp=class{constructor(e){this.allowedEvents_=e,this.listeners_={},x(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){x(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var up=class t extends cp{static getInstance(){return new t}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!mu()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return x(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var nN=32,rN=768,Ie=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function ve(){return new Ie("")}function ie(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Oi(t){return t.pieces_.length-t.pieceNum_}function Me(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ie(t.pieces_,e)}function zN(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function B3(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function qN(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function GN(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ie(e,0)}function Je(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ie)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ie(n,0)}function oe(t){return t.pieceNum_>=t.pieces_.length}function Gt(t,e){let n=ie(t),r=ie(e);if(n===null)return e;if(n===r)return Gt(Me(t),Me(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function tw(t,e){if(Oi(t)!==Oi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Vn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Oi(t)>Oi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var gI=class{constructor(e,n){this.errorPrefix_=n,this.parts_=qN(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Eu(this.parts_[r]);WN(this)}};function $3(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Eu(e),WN(t)}function H3(t){let e=t.parts_.pop();t.byteLength_-=Eu(e),t.parts_.length>0&&(t.byteLength_-=1)}function WN(t){if(t.byteLength_>rN)throw new Error(t.errorPrefix_+"has a key path longer than "+rN+" bytes ("+t.byteLength_+").");if(t.parts_.length>nN)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+nN+") or object contains a cycle "+Oo(t))}function Oo(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var mI=class t extends cp{static getInstance(){return new t}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return x(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ku=1e3,z3=300*1e3,iN=30*1e3,q3=1.3,G3=3e4,W3="server_kill",oN=3,nw=(()=>{class t extends ap{constructor(n,r,i,o,s,a,u,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=ul("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ku,this.maxReconnectDelay_=z3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!ir())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mI.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&up.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(Xe(s)),x(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new nr,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let u=a.d;a.s==="ok"?r.resolve(u):r.reject(u)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),x(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),x(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let u={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,u),this.connected_&&this.sendListen_(u)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,u=>{let l=u.d,f=u.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",u),f!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(f,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&or(n,"w")){let i=Io(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();on(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||pA(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=iN)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=fA(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),x(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Xe(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):sI("Unrecognized action received from server: "+Xe(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){x(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ku,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ku,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>G3&&(this.reconnectDelay_=Ku),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*q3)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,u=null,l=function(){u?u.close():(a=!0,i())},f=function(m){x(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(m)};this.realtime_={close:l,sendRequest:f};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,y]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?bt("getToken() completed but was canceled"):(bt("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=y&&y.token,u=new pI(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,b=>{on(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(W3)},s))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&on(m),l())}}}interrupt(n){bt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){bt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],_u(this.interruptReasons_)&&(this.reconnectDelay_=Ku,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>JI(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new Ie(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){bt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=oN&&(this.reconnectDelay_=iN,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){bt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=oN&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";ir()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+XI.replace(/\./g,"-")]=1,mu()?n["framework.cordova"]=1:vf()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=up.getInstance().currentlyOnline();return _u(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),re=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var fa=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new re(ha,e),i=new re(ha,n);return this.compare(r,i)!==0}minPost(){return re.MIN}};var rp,lp=class extends fa{static get __EMPTY_NODE(){return rp}static set __EMPTY_NODE(e){rp=e}compare(e,n){return va(e.name,n.name)}isDefinedOn(e){throw Eo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return re.MIN}maxPost(){return new re(Lo,rp)}makePost(e,n){return x(typeof e=="string","KeyIndex indexValue must always be a string."),new re(e,rp)}toString(){return".key"}},la=new lp;var aa=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ln=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??vn.EMPTY_NODE,this.right=s??vn.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return vn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return vn.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),yI=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new Ln(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},vn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ln.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ln.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new aa(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new aa(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new aa(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new aa(this.root_,null,this.comparator_,!0,e)}};vn.EMPTY_NODE=new yI;function K3(t,e){return va(t.name,e.name)}function rw(t,e){return va(t,e)}var _I;function Q3(t){_I=t}var KN=function(t){return typeof t=="number"?"number:"+AN(t):"string:"+t},QN=function(t){if(t.isLeafNode()){let e=t.val();x(typeof e=="string"||typeof e=="number"||typeof e=="object"&&or(e,".sv"),"Priority must be a string or number.")}else x(t===_I||t.isEmpty(),"priority of unexpected type.");x(t===_I||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var sN,pa=(()=>{class t{static set __childrenNodeConstructor(n){sN=n}static get __childrenNodeConstructor(){return sN}constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,x(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),QN(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return oe(n)?this:ie(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=ie(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(x(i!==".priority"||Oi(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Me(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+KN(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=AN(this.value_):n+=this.value_,this.lazyHash_=TN(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(x(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return x(o>=0,"Unknown leaf type: "+r),x(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),YN,ZN;function Y3(t){YN=t}function Z3(t){ZN=t}var vI=class extends fa{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?va(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return re.MIN}maxPost(){return new re(Lo,new pa("[PRIORITY-POST]",ZN))}makePost(e,n){let r=YN(e);return new re(n,new pa("[PRIORITY-POST]",r))}toString(){return".priority"}},Ve=new vI;var X3=Math.log(2),EI=class{constructor(e){let n=o=>parseInt(Math.log(o)/X3,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},dp=function(t,e,n,r){t.sort(e);let i=function(u,l){let f=l-u,p,m;if(f===0)return null;if(f===1)return p=t[u],m=n?n(p):p,new Ln(m,p.node,Ln.BLACK,null,null);{let y=parseInt(f/2,10)+u,b=i(u,y),P=i(y+1,l);return p=t[y],m=n?n(p):p,new Ln(m,p.node,Ln.BLACK,b,P)}},o=function(u){let l=null,f=null,p=t.length,m=function(b,P){let O=p-b,B=p;p-=b;let pe=i(O+1,B),ge=t[O],Ke=n?n(ge):ge;y(new Ln(Ke,ge.node,P,null,pe))},y=function(b){l?(l.left=b,l=b):(f=b,l=b)};for(let b=0;b<u.count;++b){let P=u.nextBitIsOne(),O=Math.pow(2,u.count-(b+1));P?m(O,Ln.BLACK):(m(O,Ln.BLACK),m(O,Ln.RED))}return f},s=new EI(t.length),a=o(s);return new vn(r||e,a)};var JE,sa={},ga=class t{static get Default(){return x(sa&&Ve,"ChildrenNode.ts has not been loaded"),JE=JE||new t({".priority":sa},{".priority":Ve}),JE}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){let n=Io(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof vn?n:null}hasIndex(e){return or(this.indexSet_,e.toString())}addIndex(e,n){x(e!==la,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(re.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=dp(r,e.getCompare()):a=sa;let u=e.toString(),l=Object.assign({},this.indexSet_);l[u]=e;let f=Object.assign({},this.indexes_);return f[u]=a,new t(f,l)}addToIndexes(e,n){let r=vu(this.indexes_,(i,o)=>{let s=Io(this.indexSet_,o);if(x(s,"Missing index implementation for "+o),i===sa)if(s.isDefinedOn(e.node)){let a=[],u=n.getIterator(re.Wrap),l=u.getNext();for(;l;)l.name!==e.name&&a.push(l),l=u.getNext();return a.push(e),dp(a,s.getCompare())}else return sa;else{let a=n.get(e.name),u=i;return a&&(u=u.remove(new re(e.name,a))),u.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=vu(this.indexes_,i=>{if(i===sa)return i;{let o=n.get(e.name);return o?i.remove(new re(e.name,o)):i}});return new t(r,this.indexSet_)}};var Qu,ee=(()=>{class t{static get EMPTY_NODE(){return Qu||(Qu=new t(new vn(rw),null,ga.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&QN(this.priorityNode_),this.children_.isEmpty()&&x(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Qu}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Qu:r}}getChild(n){let r=ie(n);return r===null?this:this.getImmediateChild(r).getChild(Me(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(x(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new re(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Qu:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=ie(n);if(i===null)return r;{x(ie(n)!==".priority"||Oi(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(Me(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(Ve,(a,u)=>{r[a]=u.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let u in r)a[u]=r[u];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+KN(this.getPriority().val())+":"),this.forEachChild(Ve,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":TN(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new re(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new re(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new re(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,re.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,re.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===dl?-1:0}withIndex(n){if(n===la||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===la||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Ve),o=r.getIterator(Ve),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===la?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),II=class extends ee{constructor(){super(new vn(rw),ee.EMPTY_NODE,ga.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ee.EMPTY_NODE}isEmpty(){return!1}},dl=new II;Object.defineProperties(re,{MIN:{value:new re(ha,ee.EMPTY_NODE)},MAX:{value:new re(Lo,dl)}});lp.__EMPTY_NODE=ee.EMPTY_NODE;pa.__childrenNodeConstructor=ee;Q3(dl);Z3(dl);var J3=!0;function Tt(t,e=null){if(t===null)return ee.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),x(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new pa(n,Tt(e))}if(!(t instanceof Array)&&J3){let n=[],r=!1;if(Wt(t,(s,a)=>{if(s.substring(0,1)!=="."){let u=Tt(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new re(s,u)))}}),n.length===0)return ee.EMPTY_NODE;let o=dp(n,K3,s=>s.name,rw);if(r){let s=dp(n,Ve.getCompare());return new ee(o,Tt(e),new ga({".priority":s},{".priority":Ve}))}else return new ee(o,Tt(e),ga.Default)}else{let n=ee.EMPTY_NODE;return Wt(t,(r,i)=>{if(or(t,r)&&r.substring(0,1)!=="."){let o=Tt(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Tt(e))}}Y3(Tt);var wI=class extends fa{constructor(e){super(),this.indexPath_=e,x(!oe(e)&&ie(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?va(e.name,n.name):o}makePost(e,n){let r=Tt(e),i=ee.EMPTY_NODE.updateChild(this.indexPath_,r);return new re(n,i)}maxPost(){let e=ee.EMPTY_NODE.updateChild(this.indexPath_,dl);return new re(Lo,e)}toString(){return qN(this.indexPath_,0).join("/")}};var CI=class extends fa{compare(e,n){let r=e.node.compareTo(n.node);return r===0?va(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return re.MIN}maxPost(){return re.MAX}makePost(e,n){let r=Tt(e);return new re(n,r)}toString(){return".value"}},e6=new CI;function XN(t){return{type:"value",snapshotNode:t}}function ma(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function nl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function rl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function t6(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var il=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){x(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(nl(n,a)):x(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ma(n,r)):s.trackChildChange(rl(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ve,(i,o)=>{n.hasChild(i)||r.trackChildChange(nl(i,o))}),n.isLeafNode()||n.forEachChild(Ve,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(rl(i,o,s))}else r.trackChildChange(ma(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ee.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var hp=class t{constructor(e){this.indexedFilter_=new il(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new re(n,r))||(r=ee.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ee.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(ee.EMPTY_NODE);let o=this;return n.forEachChild(Ve,(s,a)=>{o.matches(new re(s,a))||(i=i.updateImmediateChild(s,ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var bI=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new hp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new re(n,r))||(r=ee.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=ee.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=ee.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(ee.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,ee.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let p=this.index_.getCompare();s=(m,y)=>p(y,m)}else s=this.index_.getCompare();let a=e;x(a.numChildren()===this.limit_,"");let u=new re(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),f=this.rangedFilter_.matches(u);if(a.hasChild(n)){let p=a.getImmediateChild(n),m=i.getChildAfterChild(this.index_,l,this.reverse_);for(;m!=null&&(m.name===n||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);let y=m==null?1:s(m,u);if(f&&!r.isEmpty()&&y>=0)return o?.trackChildChange(rl(n,r,p)),a.updateImmediateChild(n,r);{o?.trackChildChange(nl(n,p));let P=a.updateImmediateChild(n,ee.EMPTY_NODE);return m!=null&&this.rangedFilter_.matches(m)?(o?.trackChildChange(ma(m.name,m.node)),P.updateImmediateChild(m.name,m.node)):P}}else return r.isEmpty()?e:f&&s(l,u)>=0?(o!=null&&(o.trackChildChange(nl(l.name,l.node)),o.trackChildChange(ma(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,ee.EMPTY_NODE)):e}};var TI=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ve}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return x(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return x(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ha}hasEnd(){return this.endSet_}getIndexEndValue(){return x(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return x(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Lo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return x(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ve}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function n6(t){return t.loadsAllData()?new il(t.getIndex()):t.hasLimit()?new bI(t):new hp(t)}function aN(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Ve?n="$priority":t.index_===e6?n="$value":t.index_===la?n="$key":(x(t.index_ instanceof wI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Xe(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=Xe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Xe(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Xe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Xe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function cN(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ve&&(e.i=t.index_.toString()),e}var DI=class t extends ap{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(x(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ul("p:rest:"),this.listens_={}}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let u=aN(e._queryParams);this.restRequest_(o+".json",u,(l,f)=>{let p=f;if(l===404&&(p=null,l=null),l===null&&this.onDataUpdate_(o,p,!1,r),Io(this.listens_,s)===a){let m;l?l===401?m="permission_denied":m="rest_error:"+l:m="ok",i(m,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=aN(e._queryParams),r=e._path.toString(),i=new nr;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+wo(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=Gs(a.responseText)}catch{on("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,u)}else a.status!==401&&a.status!==404&&on("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var SI=class{constructor(){this.rootNode_=ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function fp(){return{value:null,children:new Map}}function JN(t,e,n){if(oe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=ie(e);t.children.has(r)||t.children.set(r,fp());let i=t.children.get(r);e=Me(e),JN(i,e,n)}}function AI(t,e,n){t.value!==null?n(e,t.value):r6(t,(r,i)=>{let o=new Ie(e.toString()+"/"+r);AI(i,o,n)})}function r6(t,e){t.children.forEach((n,r)=>{e(r,n)})}var RI=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Wt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var uN=10*1e3,i6=30*1e3,o6=300*1e3,MI=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new RI(e);let r=uN+(i6-uN)*Math.random();Zu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Wt(e,(i,o)=>{o>0&&or(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Zu(this.reportStats_.bind(this),Math.floor(Math.random()*2*o6))}};var gr=(function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t})(gr||{});function eP(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function iw(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ow(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var NI=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=gr.ACK_USER_WRITE,this.source=eP()}operationForChild(e){if(oe(this.path)){if(this.affectedTree.value!=null)return x(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Ie(e));return new t(ve(),n,this.revert)}}else return x(ie(this.path)===e,"operationForChild called for unrelated child."),new t(Me(this.path),this.affectedTree,this.revert)}};var pp=class t{constructor(e,n){this.source=e,this.path=n,this.type=gr.LISTEN_COMPLETE}operationForChild(e){return oe(this.path)?new t(this.source,ve()):new t(this.source,Me(this.path))}};var ya=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=gr.OVERWRITE}operationForChild(e){return oe(this.path)?new t(this.source,ve(),this.snap.getImmediateChild(e)):new t(this.source,Me(this.path),this.snap)}};var gp=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=gr.MERGE}operationForChild(e){if(oe(this.path)){let n=this.children.subtree(new Ie(e));return n.isEmpty()?null:n.value?new ya(this.source,ve(),n.value):new t(this.source,ve(),n)}else return x(ie(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Me(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Kr=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(oe(e))return this.isFullyInitialized()&&!this.filtered_;let n=ie(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var PI=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function s6(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(t6(s.childName,s.snapshotNode))}),Yu(t,i,"child_removed",e,r,n),Yu(t,i,"child_added",e,r,n),Yu(t,i,"child_moved",o,r,n),Yu(t,i,"child_changed",e,r,n),Yu(t,i,"value",e,r,n),i}function Yu(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,u)=>c6(t,a,u)),s.forEach(a=>{let u=a6(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(u,t.query_))})})}function a6(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function c6(t,e,n){if(e.childName==null||n.childName==null)throw Eo("Should only compare child_ events.");let r=new re(e.childName,e.snapshotNode),i=new re(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Rp(t,e){return{eventCache:t,serverCache:e}}function Ju(t,e,n,r){return Rp(new Kr(e,n,r),t.serverCache)}function tP(t,e,n,r){return Rp(t.eventCache,new Kr(e,n,r))}function xI(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Vo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var eI,u6=()=>(eI||(eI=new vn(l3)),eI),Kt=class t{static fromObject(e){let n=new t(null);return Wt(e,(r,i)=>{n=n.set(new Ie(r),i)}),n}constructor(e,n=u6()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ve(),value:this.value};if(oe(e))return null;{let r=ie(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(Me(e),n);return o!=null?{path:Je(new Ie(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(oe(e))return this;{let n=ie(e),r=this.children.get(n);return r!==null?r.subtree(Me(e)):new t(null)}}set(e,n){if(oe(e))return new t(n,this.children);{let r=ie(e),o=(this.children.get(r)||new t(null)).set(Me(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(oe(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=ie(e),r=this.children.get(n);if(r){let i=r.remove(Me(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(oe(e))return this.value;{let n=ie(e),r=this.children.get(n);return r?r.get(Me(e)):null}}setTree(e,n){if(oe(e))return n;{let r=ie(e),o=(this.children.get(r)||new t(null)).setTree(Me(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(ve(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Je(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ve(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(oe(e))return null;{let o=ie(e),s=this.children.get(o);return s?s.findOnPath_(Me(e),Je(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ve(),n)}foreachOnPath_(e,n,r){if(oe(e))return this;{this.value&&r(n,this.value);let i=ie(e),o=this.children.get(i);return o?o.foreachOnPath_(Me(e),Je(n,i),r):new t(null)}}foreach(e){this.foreach_(ve(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Je(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var jn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Kt(null))}};function el(t,e,n){if(oe(e))return new jn(new Kt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Gt(i,e);return o=o.updateChild(s,n),new jn(t.writeTree_.set(i,o))}else{let i=new Kt(n),o=t.writeTree_.setTree(e,i);return new jn(o)}}}function lN(t,e,n){let r=t;return Wt(n,(i,o)=>{r=el(r,Je(e,i),o)}),r}function dN(t,e){if(oe(e))return jn.empty();{let n=t.writeTree_.setTree(e,new Kt(null));return new jn(n)}}function OI(t,e){return jo(t,e)!=null}function jo(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Gt(n.path,e)):null}function hN(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ve,(r,i)=>{e.push(new re(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new re(r,i.value))}),e}function xi(t,e){if(oe(e))return t;{let n=jo(t,e);return n!=null?new jn(new Kt(n)):new jn(t.writeTree_.subtree(e))}}function kI(t){return t.writeTree_.isEmpty()}function _a(t,e){return nP(ve(),t.writeTree_,e)}function nP(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(x(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=nP(Je(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Je(t,".priority"),r)),n}}function sw(t,e){return sP(e,t)}function l6(t,e,n,r,i){x(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=el(t.visibleWrites,e,n)),t.lastWriteId=r}function d6(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function h6(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);x(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&f6(a,r.path)?i=!1:Vn(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return p6(t),!0;if(r.snap)t.visibleWrites=dN(t.visibleWrites,r.path);else{let a=r.children;Wt(a,u=>{t.visibleWrites=dN(t.visibleWrites,Je(r.path,u))})}return!0}else return!1}function f6(t,e){if(t.snap)return Vn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Vn(Je(t.path,n),e))return!0;return!1}function p6(t){t.visibleWrites=rP(t.allWrites,g6,ve()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function g6(t){return t.visible}function rP(t,e,n){let r=jn.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)Vn(n,s)?(a=Gt(n,s),r=el(r,a,o.snap)):Vn(s,n)&&(a=Gt(s,n),r=el(r,ve(),o.snap.getChild(a)));else if(o.children){if(Vn(n,s))a=Gt(n,s),r=lN(r,a,o.children);else if(Vn(s,n))if(a=Gt(s,n),oe(a))r=lN(r,ve(),o.children);else{let u=Io(o.children,ie(a));if(u){let l=u.getChild(Me(a));r=el(r,ve(),l)}}}else throw Eo("WriteRecord should have .snap or .children")}}return r}function iP(t,e,n,r,i){if(!r&&!i){let o=jo(t.visibleWrites,e);if(o!=null)return o;{let s=xi(t.visibleWrites,e);if(kI(s))return n;if(n==null&&!OI(s,ve()))return null;{let a=n||ee.EMPTY_NODE;return _a(s,a)}}}else{let o=xi(t.visibleWrites,e);if(!i&&kI(o))return n;if(!i&&n==null&&!OI(o,ve()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Vn(l.path,e)||Vn(e,l.path))},a=rP(t.allWrites,s,e),u=n||ee.EMPTY_NODE;return _a(a,u)}}}function m6(t,e,n){let r=ee.EMPTY_NODE,i=jo(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ve,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=xi(t.visibleWrites,e);return n.forEachChild(Ve,(s,a)=>{let u=_a(xi(o,new Ie(s)),a);r=r.updateImmediateChild(s,u)}),hN(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=xi(t.visibleWrites,e);return hN(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function y6(t,e,n,r,i){x(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Je(e,n);if(OI(t.visibleWrites,o))return null;{let s=xi(t.visibleWrites,o);return kI(s)?i.getChild(n):_a(s,i.getChild(n))}}function _6(t,e,n,r){let i=Je(e,n),o=jo(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=xi(t.visibleWrites,i);return _a(s,r.getNode().getImmediateChild(n))}else return null}function v6(t,e){return jo(t.visibleWrites,e)}function E6(t,e,n,r,i,o,s){let a,u=xi(t.visibleWrites,e),l=jo(u,ve());if(l!=null)a=l;else if(n!=null)a=_a(u,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let f=[],p=s.getCompare(),m=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),y=m.getNext();for(;y&&f.length<i;)p(y,r)!==0&&f.push(y),y=m.getNext();return f}else return[]}function I6(){return{visibleWrites:jn.empty(),allWrites:[],lastWriteId:-1}}function mp(t,e,n,r){return iP(t.writeTree,t.treePath,e,n,r)}function aw(t,e){return m6(t.writeTree,t.treePath,e)}function fN(t,e,n,r){return y6(t.writeTree,t.treePath,e,n,r)}function yp(t,e){return v6(t.writeTree,Je(t.treePath,e))}function w6(t,e,n,r,i,o){return E6(t.writeTree,t.treePath,e,n,r,i,o)}function cw(t,e,n){return _6(t.writeTree,t.treePath,e,n)}function oP(t,e){return sP(Je(t.treePath,e),t.writeTree)}function sP(t,e){return{treePath:t,writeTree:e}}var FI=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;x(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),x(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,rl(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,nl(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,ma(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,rl(r,e.snapshotNode,i.oldSnap));else throw Eo("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var LI=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},aP=new LI,ol=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Kr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cw(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Vo(this.viewCache_),o=w6(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function C6(t){return{filter:t}}function b6(t,e){x(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),x(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function T6(t,e,n,r,i){let o=new FI,s,a;if(n.type===gr.OVERWRITE){let l=n;l.source.fromUser?s=VI(t,e,l.path,l.snap,r,i,o):(x(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!oe(l.path),s=_p(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===gr.MERGE){let l=n;l.source.fromUser?s=S6(t,e,l.path,l.children,r,i,o):(x(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=jI(t,e,l.path,l.children,r,i,a,o))}else if(n.type===gr.ACK_USER_WRITE){let l=n;l.revert?s=M6(t,e,l.path,r,i,o):s=A6(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===gr.LISTEN_COMPLETE)s=R6(t,e,n.path,r,o);else throw Eo("Unknown operation type: "+n.type);let u=o.getChanges();return D6(e,s,u),{viewCache:s,changes:u}}function D6(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=xI(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(XN(xI(e)))}}function cP(t,e,n,r,i,o){let s=e.eventCache;if(yp(r,n)!=null)return e;{let a,u;if(oe(n))if(x(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Vo(e),f=l instanceof ee?l:ee.EMPTY_NODE,p=aw(r,f);a=t.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{let l=mp(r,Vo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=ie(n);if(l===".priority"){x(Oi(n)===1,"Can't have a priority with additional path components");let f=s.getNode();u=e.serverCache.getNode();let p=fN(r,n,f,u);p!=null?a=t.filter.updatePriority(f,p):a=s.getNode()}else{let f=Me(n),p;if(s.isCompleteForChild(l)){u=e.serverCache.getNode();let m=fN(r,n,s.getNode(),u);m!=null?p=s.getNode().getImmediateChild(l).updateChild(f,m):p=s.getNode().getImmediateChild(l)}else p=cw(r,l,e.serverCache);p!=null?a=t.filter.updateChild(s.getNode(),l,p,f,i,o):a=s.getNode()}}return Ju(e,a,s.isFullyInitialized()||oe(n),t.filter.filtersNodes())}}function _p(t,e,n,r,i,o,s,a){let u=e.serverCache,l,f=s?t.filter:t.filter.getIndexedFilter();if(oe(n))l=f.updateFullNode(u.getNode(),r,null);else if(f.filtersNodes()&&!u.isFiltered()){let y=u.getNode().updateChild(n,r);l=f.updateFullNode(u.getNode(),y,null)}else{let y=ie(n);if(!u.isCompleteForPath(n)&&Oi(n)>1)return e;let b=Me(n),O=u.getNode().getImmediateChild(y).updateChild(b,r);y===".priority"?l=f.updatePriority(u.getNode(),O):l=f.updateChild(u.getNode(),y,O,b,aP,null)}let p=tP(e,l,u.isFullyInitialized()||oe(n),f.filtersNodes()),m=new ol(i,p,o);return cP(t,p,n,i,m,a)}function VI(t,e,n,r,i,o,s){let a=e.eventCache,u,l,f=new ol(i,e,o);if(oe(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),u=Ju(e,l,!0,t.filter.filtersNodes());else{let p=ie(n);if(p===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),u=Ju(e,l,a.isFullyInitialized(),a.isFiltered());else{let m=Me(n),y=a.getNode().getImmediateChild(p),b;if(oe(m))b=r;else{let P=f.getCompleteChild(p);P!=null?zN(m)===".priority"&&P.getChild(GN(m)).isEmpty()?b=P:b=P.updateChild(m,r):b=ee.EMPTY_NODE}if(y.equals(b))u=e;else{let P=t.filter.updateChild(a.getNode(),p,b,m,f,s);u=Ju(e,P,a.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function pN(t,e){return t.eventCache.isCompleteForChild(e)}function S6(t,e,n,r,i,o,s){let a=e;return r.foreach((u,l)=>{let f=Je(n,u);pN(e,ie(f))&&(a=VI(t,a,f,l,i,o,s))}),r.foreach((u,l)=>{let f=Je(n,u);pN(e,ie(f))||(a=VI(t,a,f,l,i,o,s))}),a}function gN(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function jI(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,l;oe(n)?l=r:l=new Kt(null).setTree(n,r);let f=e.serverCache.getNode();return l.children.inorderTraversal((p,m)=>{if(f.hasChild(p)){let y=e.serverCache.getNode().getImmediateChild(p),b=gN(t,y,m);u=_p(t,u,new Ie(p),b,i,o,s,a)}}),l.children.inorderTraversal((p,m)=>{let y=!e.serverCache.isCompleteForChild(p)&&m.value===null;if(!f.hasChild(p)&&!y){let b=e.serverCache.getNode().getImmediateChild(p),P=gN(t,b,m);u=_p(t,u,new Ie(p),P,i,o,s,a)}}),u}function A6(t,e,n,r,i,o,s){if(yp(i,n)!=null)return e;let a=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(oe(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return _p(t,e,n,u.getNode().getChild(n),i,o,a,s);if(oe(n)){let l=new Kt(null);return u.getNode().forEachChild(la,(f,p)=>{l=l.set(new Ie(f),p)}),jI(t,e,n,l,i,o,a,s)}else return e}else{let l=new Kt(null);return r.foreach((f,p)=>{let m=Je(n,f);u.isCompleteForPath(m)&&(l=l.set(f,u.getNode().getChild(m)))}),jI(t,e,n,l,i,o,a,s)}}function R6(t,e,n,r,i){let o=e.serverCache,s=tP(e,o.getNode(),o.isFullyInitialized()||oe(n),o.isFiltered());return cP(t,s,n,r,aP,i)}function M6(t,e,n,r,i,o){let s;if(yp(r,n)!=null)return e;{let a=new ol(r,e,i),u=e.eventCache.getNode(),l;if(oe(n)||ie(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=mp(r,Vo(e));else{let p=e.serverCache.getNode();x(p instanceof ee,"serverChildren would be complete if leaf node"),f=aw(r,p)}f=f,l=t.filter.updateFullNode(u,f,o)}else{let f=ie(n),p=cw(r,f,e.serverCache);p==null&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),p!=null?l=t.filter.updateChild(u,f,p,Me(n),a,o):e.eventCache.getNode().hasChild(f)?l=t.filter.updateChild(u,f,ee.EMPTY_NODE,Me(n),a,o):l=u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=mp(r,Vo(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||yp(r,ve())!=null,Ju(e,l,s,t.filter.filtersNodes())}}var UI=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new il(r.getIndex()),o=n6(r);this.processor_=C6(o);let s=n.serverCache,a=n.eventCache,u=i.updateFullNode(ee.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(ee.EMPTY_NODE,a.getNode(),null),f=new Kr(u,s.isFullyInitialized(),i.filtersNodes()),p=new Kr(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Rp(p,f),this.eventGenerator_=new PI(this.query_)}get query(){return this.query_}};function N6(t){return t.viewCache_.serverCache.getNode()}function P6(t,e){let n=Vo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!oe(e)&&!n.getImmediateChild(ie(e)).isEmpty())?n.getChild(e):null}function mN(t){return t.eventRegistrations_.length===0}function x6(t,e){t.eventRegistrations_.push(e)}function yN(t,e,n){let r=[];if(n){x(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function _N(t,e,n,r){e.type===gr.MERGE&&e.source.queryId!==null&&(x(Vo(t.viewCache_),"We should always have a full cache before handling merges"),x(xI(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=T6(t.processor_,i,e,n,r);return b6(t.processor_,o.viewCache),x(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,uP(t,o.changes,o.viewCache.eventCache.getNode(),null)}function O6(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ve,(o,s)=>{r.push(ma(o,s))}),n.isFullyInitialized()&&r.push(XN(n.getNode())),uP(t,r,n.getNode(),e)}function uP(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return s6(t.eventGenerator_,e,n,i)}var vp,BI=class{constructor(){this.views=new Map}};function k6(t){x(!vp,"__referenceConstructor has already been defined"),vp=t}function F6(){return x(vp,"Reference.ts has not been loaded"),vp}function L6(t){return t.views.size===0}function uw(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return x(o!=null,"SyncTree gave us an op for an invalid query."),_N(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(_N(s,e,n,r));return o}}function V6(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=mp(n,i?r:null),u=!1;a?u=!0:r instanceof ee?(a=aw(n,r),u=!1):(a=ee.EMPTY_NODE,u=!1);let l=Rp(new Kr(a,u,!1),new Kr(r,i,!1));return new UI(e,l)}return s}function j6(t,e,n,r,i,o){let s=V6(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),x6(s,n),O6(s,n)}function U6(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],a=ki(t);if(i==="default")for(let[u,l]of t.views.entries())s=s.concat(yN(l,n,r)),mN(l)&&(t.views.delete(u),l.query._queryParams.loadsAllData()||o.push(l.query));else{let u=t.views.get(i);u&&(s=s.concat(yN(u,n,r)),mN(u)&&(t.views.delete(i),u.query._queryParams.loadsAllData()||o.push(u.query)))}return a&&!ki(t)&&o.push(new(F6())(e._repo,e._path)),{removed:o,events:s}}function lP(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function da(t,e){let n=null;for(let r of t.views.values())n=n||P6(r,e);return n}function dP(t,e){if(e._queryParams.loadsAllData())return Mp(t);{let r=e._queryIdentifier;return t.views.get(r)}}function hP(t,e){return dP(t,e)!=null}function ki(t){return Mp(t)!=null}function Mp(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Ep;function B6(t){x(!Ep,"__referenceConstructor has already been defined"),Ep=t}function $6(){return x(Ep,"Reference.ts has not been loaded"),Ep}var H6=1,Ip=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Kt(null),this.pendingWriteTree_=I6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function z6(t,e,n,r,i){return l6(t.pendingWriteTree_,e,n,r,i),i?hl(t,new ya(eP(),e,n)):[]}function ca(t,e,n=!1){let r=d6(t.pendingWriteTree_,e);if(h6(t.pendingWriteTree_,e)){let o=new Kt(null);return r.snap!=null?o=o.set(ve(),!0):Wt(r.children,s=>{o=o.set(new Ie(s),!0)}),hl(t,new NI(r.path,o,n))}else return[]}function Np(t,e,n){return hl(t,new ya(iw(),e,n))}function q6(t,e,n){let r=Kt.fromObject(n);return hl(t,new gp(iw(),e,r))}function G6(t,e){return hl(t,new pp(iw(),e))}function W6(t,e,n){let r=lw(t,n);if(r){let i=dw(r),o=i.path,s=i.queryId,a=Gt(o,e),u=new pp(ow(s),a);return hw(t,o,u)}else return[]}function $I(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||hP(s,e))){let u=U6(s,e,n,r);L6(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let l=u.removed;if(a=u.events,!i){let f=l.findIndex(m=>m._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(o,(m,y)=>ki(y));if(f&&!p){let m=t.syncPointTree_.subtree(o);if(!m.isEmpty()){let y=Y6(m);for(let b=0;b<y.length;++b){let P=y[b],O=P.query,B=mP(t,P);t.listenProvider_.startListening(tl(O),wp(t,O),B.hashFn,B.onComplete)}}}!p&&l.length>0&&!r&&(f?t.listenProvider_.stopListening(tl(e),null):l.forEach(m=>{let y=t.queryToTagMap.get(Pp(m));t.listenProvider_.stopListening(tl(m),y)}))}Z6(t,l)}return a}function K6(t,e,n,r){let i=lw(t,r);if(i!=null){let o=dw(i),s=o.path,a=o.queryId,u=Gt(s,e),l=new ya(ow(a),u,n);return hw(t,s,l)}else return[]}function Q6(t,e,n,r){let i=lw(t,r);if(i){let o=dw(i),s=o.path,a=o.queryId,u=Gt(s,e),l=Kt.fromObject(n),f=new gp(ow(a),u,l);return hw(t,s,f)}else return[]}function vN(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(m,y)=>{let b=Gt(m,i);o=o||da(y,b),s=s||ki(y)});let a=t.syncPointTree_.get(i);a?(s=s||ki(a),o=o||da(a,ve())):(a=new BI,t.syncPointTree_=t.syncPointTree_.set(i,a));let u;o!=null?u=!0:(u=!1,o=ee.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,b)=>{let P=da(b,ve());P&&(o=o.updateImmediateChild(y,P))}));let l=hP(a,e);if(!l&&!e._queryParams.loadsAllData()){let m=Pp(e);x(!t.queryToTagMap.has(m),"View does not exist, but we have a tag");let y=X6();t.queryToTagMap.set(m,y),t.tagToQueryMap.set(y,m)}let f=sw(t.pendingWriteTree_,i),p=j6(a,e,n,f,o,u);if(!l&&!s&&!r){let m=dP(a,e);p=p.concat(J6(t,e,m))}return p}function fP(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let u=Gt(s,e),l=da(a,u);if(l)return l});return iP(i,e,o,n,!0)}function hl(t,e){return pP(e,t.syncPointTree_,null,sw(t.pendingWriteTree_,ve()))}function pP(t,e,n,r){if(oe(t.path))return gP(t,e,n,r);{let i=e.get(ve());n==null&&i!=null&&(n=da(i,ve()));let o=[],s=ie(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){let l=n?n.getImmediateChild(s):null,f=oP(r,s);o=o.concat(pP(a,u,l,f))}return i&&(o=o.concat(uw(i,t,r,n))),o}}function gP(t,e,n,r){let i=e.get(ve());n==null&&i!=null&&(n=da(i,ve()));let o=[];return e.children.inorderTraversal((s,a)=>{let u=n?n.getImmediateChild(s):null,l=oP(r,s),f=t.operationForChild(s);f&&(o=o.concat(gP(f,a,u,l)))}),i&&(o=o.concat(uw(i,t,r,n))),o}function mP(t,e){let n=e.query,r=wp(t,n);return{hashFn:()=>(N6(e)||ee.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?W6(t,n._path,r):G6(t,n._path);{let o=f3(i,n);return $I(t,n,null,o)}}}}function wp(t,e){let n=Pp(e);return t.queryToTagMap.get(n)}function Pp(t){return t._path.toString()+"$"+t._queryIdentifier}function lw(t,e){return t.tagToQueryMap.get(e)}function dw(t){let e=t.indexOf("$");return x(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ie(t.substr(0,e))}}function hw(t,e,n){let r=t.syncPointTree_.get(e);x(r,"Missing sync point for query tag that we're tracking");let i=sw(t.pendingWriteTree_,e);return uw(r,n,i,null)}function Y6(t){return t.fold((e,n,r)=>{if(n&&ki(n))return[Mp(n)];{let i=[];return n&&(i=lP(n)),Wt(r,(o,s)=>{i=i.concat(s)}),i}})}function tl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new($6())(t._repo,t._path):t}function Z6(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Pp(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function X6(){return H6++}function J6(t,e,n){let r=e._path,i=wp(t,e),o=mP(t,n),s=t.listenProvider_.startListening(tl(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)x(!ki(a.value),"If we're adding a query, it shouldn't be shadowed");else{let u=a.fold((l,f,p)=>{if(!oe(l)&&f&&ki(f))return[Mp(f).query];{let m=[];return f&&(m=m.concat(lP(f).map(y=>y.query))),Wt(p,(y,b)=>{m=m.concat(b)}),m}});for(let l=0;l<u.length;++l){let f=u[l];t.listenProvider_.stopListening(tl(f),wp(t,f))}}return s}var HI=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},zI=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Je(this.path_,e);return new t(this.syncTree_,n)}node(){return fP(this.syncTree_,this.path_)}},ez=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},EN=function(t,e,n){if(!t||typeof t!="object")return t;if(x(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return tz(t[".sv"],e,n);if(typeof t[".sv"]=="object")return nz(t[".sv"],e);x(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},tz=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:x(!1,"Unexpected server value: "+t)}},nz=function(t,e,n){t.hasOwnProperty("increment")||x(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&x(!1,"Unexpected increment value: "+r);let i=e.node();if(x(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},rz=function(t,e,n,r){return fw(e,new zI(n,t),r)},iz=function(t,e,n){return fw(t,new HI(e),n)};function fw(t,e,n){let r=t.getPriority().val(),i=EN(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=EN(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new pa(a,Tt(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new pa(i))),s.forEachChild(Ve,(a,u)=>{let l=fw(u,e.getImmediateChild(a),n);l!==u&&(o=o.updateImmediateChild(a,l))}),o}}var sl=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function pw(t,e){let n=e instanceof Ie?e:new Ie(e),r=t,i=ie(n);for(;i!==null;){let o=Io(r.node.children,i)||{children:{},childCount:0};r=new sl(i,r,o),n=Me(n),i=ie(n)}return r}function Ea(t){return t.node.value}function yP(t,e){t.node.value=e,qI(t)}function _P(t){return t.node.childCount>0}function oz(t){return Ea(t)===void 0&&!_P(t)}function xp(t,e){Wt(t.node.children,(n,r)=>{e(new sl(n,t,r))})}function vP(t,e,n,r){n&&!r&&e(t),xp(t,i=>{vP(i,e,!0,r)}),n&&r&&e(t)}function sz(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function fl(t){return new Ie(t.parent===null?t.name:fl(t.parent)+"/"+t.name)}function qI(t){t.parent!==null&&az(t.parent,t.name,t)}function az(t,e,n){let r=oz(n),i=or(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,qI(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,qI(t))}var cz=/[\[\].#$\/\u0000-\u001F\u007F]/,uz=/[\[\].#$\u0000-\u001F\u007F]/,tI=10*1024*1024,EP=function(t){return typeof t=="string"&&t.length!==0&&!cz.test(t)},IP=function(t){return typeof t=="string"&&t.length!==0&&!uz.test(t)},lz=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),IP(t)};var wP=function(t,e,n){let r=n instanceof Ie?new gI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Oo(r));if(typeof e=="function")throw new Error(t+"contains a function "+Oo(r)+" with contents = "+e.toString());if(DN(e))throw new Error(t+"contains "+e.toString()+" "+Oo(r));if(typeof e=="string"&&e.length>tI/3&&Eu(e)>tI)throw new Error(t+"contains a string greater than "+tI+" utf8 bytes "+Oo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Wt(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!EP(s)))throw new Error(t+" contains an invalid key ("+s+") "+Oo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);$3(r,s),wP(t,a,r),H3(r)}),i&&o)throw new Error(t+' contains ".value" child '+Oo(r)+" in addition to actual children.")}};var CP=function(t,e,n,r){if(!(r&&n===void 0)&&!IP(n))throw new Error(vv(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},dz=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),CP(t,e,n,r)};var hz=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!EP(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!lz(n))throw new Error(vv(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var GI=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function bP(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!tw(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function TP(t,e,n){bP(t,n),DP(t,r=>tw(r,e))}function Uo(t,e,n){bP(t,n),DP(t,r=>Vn(r,e)||Vn(e,r))}function DP(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(fz(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function fz(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Fo&&bt("event: "+n.toString()),ll(r)}}}var pz="repo_interrupt",gz=25,WI=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new GI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=fp(),this.transactionQueueTree_=new sl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function mz(t,e,n){if(t.stats_=ew(t.repoInfo_),t.forceRestClient_||y3())t.server_=new DI(t.repoInfo_,(r,i,o,s)=>{IN(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>wN(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Xe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new nw(t.repoInfo_,e,(r,i,o,s)=>{IN(t,r,i,o,s)},r=>{wN(t,r)},r=>{_z(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=v3(t.repoInfo_,()=>new MI(t.stats_,t.server_)),t.infoData_=new SI,t.infoSyncTree_=new Ip({startListening:(r,i,o,s)=>{let a=[],u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=Np(t.infoSyncTree_,r._path,u),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),gw(t,"connected",!1),t.serverSyncTree_=new Ip({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,u)=>{let l=s(a,u);Uo(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function yz(t){let n=t.infoData_.getNode(new Ie(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function SP(t){return ez({timestamp:yz(t)})}function IN(t,e,n,r,i){t.dataUpdateCount++;let o=new Ie(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let u=vu(n,l=>Tt(l));s=Q6(t.serverSyncTree_,o,u,i)}else{let u=Tt(n);s=K6(t.serverSyncTree_,o,u,i)}else if(r){let u=vu(n,l=>Tt(l));s=q6(t.serverSyncTree_,o,u)}else{let u=Tt(n);s=Np(t.serverSyncTree_,o,u)}let a=o;s.length>0&&(a=yw(t,o)),Uo(t.eventQueue_,a,s)}function wN(t,e){gw(t,"connected",e),e===!1&&Ez(t)}function _z(t,e){Wt(e,(n,r)=>{gw(t,n,r)})}function gw(t,e,n){let r=new Ie("/.info/"+e),i=Tt(n);t.infoData_.updateSnapshot(r,i);let o=Np(t.infoSyncTree_,r,i);Uo(t.eventQueue_,r,o)}function vz(t){return t.nextWriteId_++}function Ez(t){AP(t,"onDisconnectEvents");let e=SP(t),n=fp();AI(t.onDisconnect_,ve(),(i,o)=>{let s=rz(i,o,t.serverSyncTree_,e);JN(n,i,s)});let r=[];AI(n,ve(),(i,o)=>{r=r.concat(Np(t.serverSyncTree_,i,o));let s=Tz(t,i);yw(t,s)}),t.onDisconnect_=fp(),Uo(t.eventQueue_,ve(),r)}function Iz(t,e,n){let r;ie(e._path)===".info"?r=vN(t.infoSyncTree_,e,n):r=vN(t.serverSyncTree_,e,n),TP(t.eventQueue_,e._path,r)}function KI(t,e,n){let r;ie(e._path)===".info"?r=$I(t.infoSyncTree_,e,n):r=$I(t.serverSyncTree_,e,n),TP(t.eventQueue_,e._path,r)}function wz(t){t.persistentConnection_&&t.persistentConnection_.interrupt(pz)}function AP(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),bt(n,...e)}function RP(t,e,n){return fP(t.serverSyncTree_,e,n)||ee.EMPTY_NODE}function mw(t,e=t.transactionQueueTree_){if(e||Op(t,e),Ea(e)){let n=NP(t,e);x(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Cz(t,fl(e),n)}else _P(e)&&xp(e,n=>{mw(t,n)})}function Cz(t,e,n){let r=n.map(l=>l.currentWriteId),i=RP(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let f=n[l];x(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;let p=Gt(e,f.path);o=o.updateChild(p,f.currentOutputSnapshotRaw)}let a=o.val(!0),u=e;t.server_.put(u.toString(),a,l=>{AP(t,"transaction put response",{path:u.toString(),status:l});let f=[];if(l==="ok"){let p=[];for(let m=0;m<n.length;m++)n[m].status=2,f=f.concat(ca(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&p.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();Op(t,pw(t.transactionQueueTree_,e)),mw(t,t.transactionQueueTree_),Uo(t.eventQueue_,e,f);for(let m=0;m<p.length;m++)ll(p[m])}else{if(l==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{on("transaction at "+u.toString()+" failed: "+l);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=l}yw(t,e)}},s)}function yw(t,e){let n=MP(t,e),r=fl(n),i=NP(t,n);return bz(t,i,r),r}function bz(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let u=e[a],l=Gt(n,u.path),f=!1,p;if(x(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,p=u.abortReason,i=i.concat(ca(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=gz)f=!0,p="maxretry",i=i.concat(ca(t.serverSyncTree_,u.currentWriteId,!0));else{let m=RP(t,u.path,s);u.currentInputSnapshot=m;let y=e[a].update(m.val());if(y!==void 0){wP("transaction failed: Data returned ",y,u.path);let b=Tt(y);typeof y=="object"&&y!=null&&or(y,".priority")||(b=b.updatePriority(m.getPriority()));let O=u.currentWriteId,B=SP(t),pe=iz(b,m,B);u.currentOutputSnapshotRaw=b,u.currentOutputSnapshotResolved=pe,u.currentWriteId=vz(t),s.splice(s.indexOf(O),1),i=i.concat(z6(t.serverSyncTree_,u.path,pe,u.currentWriteId,u.applyLocally)),i=i.concat(ca(t.serverSyncTree_,O,!0))}else f=!0,p="nodata",i=i.concat(ca(t.serverSyncTree_,u.currentWriteId,!0))}Uo(t.eventQueue_,n,i),i=[],f&&(e[a].status=2,(function(m){setTimeout(m,Math.floor(0))})(e[a].unwatcher),e[a].onComplete&&(p==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(p),!1,null))))}Op(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ll(r[a]);mw(t,t.transactionQueueTree_)}function MP(t,e){let n,r=t.transactionQueueTree_;for(n=ie(e);n!==null&&Ea(r)===void 0;)r=pw(r,n),e=Me(e),n=ie(e);return r}function NP(t,e){let n=[];return PP(t,e,n),n.sort((r,i)=>r.order-i.order),n}function PP(t,e,n){let r=Ea(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);xp(e,i=>{PP(t,i,n)})}function Op(t,e){let n=Ea(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,yP(e,n.length>0?n:void 0)}xp(e,r=>{Op(t,r)})}function Tz(t,e){let n=fl(MP(t,e)),r=pw(t.transactionQueueTree_,e);return sz(r,i=>{nI(t,i)}),nI(t,r),vP(r,i=>{nI(t,i)}),n}function nI(t,e){let n=Ea(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(x(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(x(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(ca(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?yP(e,void 0):n.length=o+1,Uo(t.eventQueue_,fl(e),i);for(let s=0;s<r.length;s++)ll(r[s])}}function Dz(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Sz(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):on(`Invalid query segment '${n}' in query '${t}'`)}return e}var CN=function(t,e){let n=Az(t),r=n.namespace;n.domain==="firebase.com"&&Wr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Wr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||c3();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new op(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Ie(n.pathString)}},Az=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",u=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let f=t.indexOf("/");f===-1&&(f=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(f,p)),f<p&&(i=Dz(t.substring(f,p)));let m=Sz(t.substring(Math.min(t.length,p)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",u=parseInt(e.substring(l+1),10)):l=e.length;let y=e.slice(0,l);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{let b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),n=e.substring(b+1),o=r}"ns"in m&&(o=m.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var Cp=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Xe(this.snapshot.exportVal())}},bp=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Tp=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return x(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var QI=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return oe(this._path)?null:zN(this._path)}get ref(){return new Qr(this._repo,this._path)}get _queryIdentifier(){let e=cN(this._queryParams),n=JI(e);return n==="{}"?"default":n}get _queryObject(){return cN(this._queryParams)}isEqual(e){if(e=It(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=tw(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+B3(this._path)}};var Qr=class t extends QI{constructor(e,n){super(e,n,new TI,!1)}get parent(){let e=GN(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Dp=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new Ie(e),r=al(this.ref,e);return new t(this._node.getChild(n),r,Ve)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,al(this.ref,r),Ve)))}hasChild(e){let n=new Ie(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function xP(t,e){return t=It(t),t._checkNotDeleted("ref"),e!==void 0?al(t._root,e):t._root}function al(t,e){return t=It(t),ie(t._path)===null?dz("child","path",e,!1):CP("child","path",e,!1),new Qr(t._repo,Je(t._path,e))}var Sp=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Cp("value",this,new Dp(e.snapshotNode,new Qr(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new bp(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Ap=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new bp(this,e,n):null}createEvent(e,n){x(e.childName!=null,"Child events should have a childName.");let r=al(new Qr(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Cp(e.type,this,new Dp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Rz(t,e,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let u=n,l=(f,p)=>{KI(t._repo,t,a),u(f,p)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new Tp(n,o||void 0),a=e==="value"?new Sp(s):new Ap(e,s);return Iz(t._repo,t,a),()=>KI(t._repo,t,a)}function OP(t,e,n,r){return Rz(t,"value",e,n,r)}function kP(t,e,n){let r=null,i=n?new Tp(n):null;e==="value"?r=new Sp(i):e&&(r=new Ap(e,i)),KI(t._repo,t,r)}k6(Qr);B6(Qr);var Mz="FIREBASE_DATABASE_EMULATOR_HOST",YI={},Nz=!1;function Pz(t,e,n,r){let i=e.lastIndexOf(":"),o=e.substring(0,i),s=rr(o);t.repoInfo_=new op(e,s,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function xz(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||Wr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bt("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=CN(o,i),a=s.repoInfo,u,l;typeof process<"u"&&process.env&&(l=process.env[Mz]),l?(u=!0,o=`http://${l}?ns=${a.namespace}`,s=CN(o,i),a=s.repoInfo):u=!s.repoInfo.secure;let f=i&&u?new Xu(Xu.OWNER):new cI(t.name,t.options,e);hz("Invalid Firebase Database URL",s),oe(s.path)||Wr("Database URL must point to the root of a Firebase Database (not including a child path).");let p=kz(a,t,f,new aI(t,n));return new ZI(p,t)}function Oz(t,e){let n=YI[e];(!n||n[t.key]!==t)&&Wr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),wz(t),delete n[t.key]}function kz(t,e,n,r){let i=YI[e.name];i||(i={},YI[e.name]=i);let o=i[t.toURLString()];return o&&Wr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new WI(t,Nz,n,r),i[t.toURLString()]=o,o}var ZI=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(mz(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qr(this._repo,ve())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Oz(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Wr("Cannot call "+e+" on a deleted database.")}};function FP(t=jr(),e){let n=Ci(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=yf("database");r&&LP(n,...r)}return n}function LP(t,e,n,r={}){t=It(t),t._checkNotDeleted("useEmulator");let i=`${e}:${n}`,o=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&mn(r,o.repoInfo_.emulatorOptions))return;Wr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Wr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Xu(Xu.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:_f(r.mockUserToken,t.app.options.projectId);s=new Xu(a)}rr(e)&&(Ks(e),Qs("Database",!0)),Pz(o,i,r,s)}function Fz(t){o3(ar),rn(new lt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return xz(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Se(qM,GM,t),Se(qM,GM,"esm2017")}nw.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};nw.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Fz();var Yr=class{constructor(e){return e}},VP="database",_w=class{constructor(){return bi(VP)}};var vw=new j("angularfire2.database-instances");function Lz(t,e){let n=To(VP,t,e);return n&&new Yr(n)}function Vz(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Yr(r)}}var jz={provide:_w,deps:[[new nt,vw]]},Uz={provide:Yr,useFactory:Lz,deps:[[new nt,vw],On]};function jP(t,...e){return Se("angularfire",cr.full,"rtdb"),Mt([Uz,jz,{provide:vw,useFactory:Vz(t),multi:!0,deps:[ye,je,ur,Ur,[new nt,Mo],[new nt,Di],...e]}])}var UP=Ct(FP,!0);var pl=Ct(kP,!0);var gl=Ct(OP,!0);var Fi=Ct(xP,!0,2);var QP=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(H(mi),H(Mr))};static \u0275dir=rt({type:t})}return t})(),$z=(()=>{class t extends QP{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ts(t)))(i||t)}})();static \u0275dir=rt({type:t,features:[Pr]})}return t})(),YP=new j("");var Hz={provide:YP,useExisting:ai(()=>Ta),multi:!0};function zz(){let t=pn()?pn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var qz=new j(""),Ta=(()=>{class t extends QP{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!zz())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(H(mi),H(Mr),H(qz,8))};static \u0275dir=rt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Nt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Fc([Hz]),Pr]})}return t})();function bw(t){return t==null||Tw(t)===0}function Tw(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var ZP=new j(""),XP=new j(""),Gz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,xt=class{static min(e){return Wz(e)}static max(e){return Kz(e)}static required(e){return Qz(e)}static requiredTrue(e){return Yz(e)}static email(e){return Zz(e)}static minLength(e){return Xz(e)}static maxLength(e){return Jz(e)}static pattern(e){return eq(e)}static nullValidator(e){return JP()}static compose(e){return ox(e)}static composeAsync(e){return ax(e)}};function Wz(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function Kz(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function Qz(t){return bw(t.value)?{required:!0}:null}function Yz(t){return t.value===!0?null:{required:!0}}function Zz(t){return bw(t.value)||Gz.test(t.value)?null:{email:!0}}function Xz(t){return e=>{let n=e.value?.length??Tw(e.value);return n===null||n===0?null:n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}function Jz(t){return e=>{let n=e.value?.length??Tw(e.value);return n!==null&&n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}function eq(t){if(!t)return JP;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(bw(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function JP(t){return null}function ex(t){return t!=null}function tx(t){return xr(t)?Ae(t):t}function nx(t){let e={};return t.forEach(n=>{e=n!=null?L(L({},e),n):e}),Object.keys(e).length===0?null:e}function rx(t,e){return e.map(n=>n(t))}function tq(t){return!t.validate}function ix(t){return t.map(e=>tq(e)?e:n=>e.validate(n))}function ox(t){if(!t)return null;let e=t.filter(ex);return e.length==0?null:function(n){return nx(rx(n,e))}}function sx(t){return t!=null?ox(ix(t)):null}function ax(t){if(!t)return null;let e=t.filter(ex);return e.length==0?null:function(n){let r=rx(n,e).map(tx);return Qg(r).pipe(Z(nx))}}function cx(t){return t!=null?ax(ix(t)):null}function BP(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function ux(t){return t._rawValidators}function lx(t){return t._rawAsyncValidators}function Ew(t){return t?Array.isArray(t)?t:[t]:[]}function Lp(t,e){return Array.isArray(t)?t.includes(e):t===e}function $P(t,e){let n=Ew(e);return Ew(t).forEach(i=>{Lp(n,i)||n.push(i)}),n}function HP(t,e){return Ew(e).filter(n=>!Lp(t,n))}var Vp=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=sx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ca=class extends Vp{name;get formDirective(){return null}get path(){return null}},El=class extends Vp{_parent=null;name=null;valueAccessor=null},jp=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},nq={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Lle=te(L({},nq),{"[class.ng-submitted]":"isSubmitted"}),zp=(()=>{class t extends jp{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(H(El,2))};static \u0275dir=rt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Jt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Pr]})}return t})(),qp=(()=>{class t extends jp{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(H(Ca,10))};static \u0275dir=rt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Jt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Pr]})}return t})();var ml="VALID",kp="INVALID",Ia="PENDING",yl="DISABLED",Li=class{},Up=class extends Li{value;source;constructor(e,n){super(),this.value=e,this.source=n}},_l=class extends Li{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},vl=class extends Li{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},wa=class extends Li{status;source;constructor(e,n){super(),this.status=e,this.source=n}},Iw=class extends Li{source;constructor(e){super(),this.source=e}},Il=class extends Li{source;constructor(e){super(),this.source=e}};function Dw(t){return(Gp(t)?t.validators:t)||null}function rq(t){return Array.isArray(t)?sx(t):t||null}function Sw(t,e){return(Gp(e)?e.asyncValidators:t)||null}function iq(t){return Array.isArray(t)?cx(t):t||null}function Gp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function dx(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new V(1e3,"");if(!r[n])throw new V(1001,"")}function hx(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new V(1002,"")})}var ba=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return qe(this.statusReactive)}set status(e){qe(()=>this.statusReactive.set(e))}_status=As(()=>this.statusReactive());statusReactive=Ut(void 0);get valid(){return this.status===ml}get invalid(){return this.status===kp}get pending(){return this.status==Ia}get disabled(){return this.status===yl}get enabled(){return this.status!==yl}errors;get pristine(){return qe(this.pristineReactive)}set pristine(e){qe(()=>this.pristineReactive.set(e))}_pristine=As(()=>this.pristineReactive());pristineReactive=Ut(!0);get dirty(){return!this.pristine}get touched(){return qe(this.touchedReactive)}set touched(e){qe(()=>this.touchedReactive.set(e))}_touched=As(()=>this.touchedReactive());touchedReactive=Ut(!1);get untouched(){return!this.touched}_events=new Ue;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($P(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($P(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(HP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(HP(e,this._rawAsyncValidators))}hasValidator(e){return Lp(this._rawValidators,e)}hasAsyncValidator(e){return Lp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(te(L({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new vl(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new vl(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(te(L({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new _l(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new _l(!0,r))}markAsPending(e={}){this.status=Ia;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wa(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(te(L({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=yl,this.errors=null,this._forEachChild(i=>{i.disable(te(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Up(this.value,r)),this._events.next(new wa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(te(L({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ml,this._forEachChild(r=>{r.enable(te(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(te(L({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ml||this.status===Ia)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Up(this.value,n)),this._events.next(new wa(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(te(L({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yl:ml}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Ia,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=tx(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new wa(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ze,this.statusChanges=new ze}_calculateStatus(){return this._allControlsDisabled()?yl:this.errors?kp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ia)?Ia:this._anyControlsHaveStatus(kp)?kp:ml}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new _l(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new vl(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Gp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=rq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=iq(this._rawAsyncValidators)}},Bp=class extends ba{constructor(e,n,r){super(Dw(n),Sw(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){hx(this,!0,e),Object.keys(e).forEach(r=>{dx(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Il(this))}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ww=class extends Bp{};var fx=new j("",{providedIn:"root",factory:()=>Aw}),Aw="always";function oq(t,e){return[...e.path,t]}function zP(t,e,n=Aw){Rw(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),aq(t,e),uq(t,e),cq(t,e),sq(t,e)}function qP(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Hp(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function $p(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function sq(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Rw(t,e){let n=ux(t);e.validator!==null?t.setValidators(BP(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=lx(t);e.asyncValidator!==null?t.setAsyncValidators(BP(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();$p(e._rawValidators,i),$p(e._rawAsyncValidators,i)}function Hp(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=ux(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=lx(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return $p(e._rawValidators,r),$p(e._rawAsyncValidators,r),n}function aq(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&px(t,e)})}function cq(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&px(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function px(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function uq(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function lq(t,e){t==null,Rw(t,e)}function dq(t,e){return Hp(t,e)}function hq(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function fq(t){return Object.getPrototypeOf(t.constructor)===$z}function pq(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function gq(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Ta?n=o:fq(o)?r=o:i=o}),i||r||n||null}function mq(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function GP(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function WP(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Fp=class extends ba{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(Dw(n),Sw(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(WP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Il(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){GP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){GP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){WP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var yq=t=>t instanceof Fp;var Wp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=rt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var gx=new j("");var _q={provide:Ca,useExisting:ai(()=>wl)},wl=(()=>{class t extends Ca{callSetDisabledState;get submitted(){return qe(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=As(()=>this._submittedReactive());_submittedReactive=Ut(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new ze;constructor(n,r,i){super(),this.callSetDisabledState=i,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Hp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return zP(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){qP(n.control||null,n,!1),mq(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this._submittedReactive.set(!0),pq(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new Iw(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0,r={}){this.form.reset(n,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,i=this.form.get(n.path);r!==i&&(qP(r||null,n),yq(i)&&(zP(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);lq(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&dq(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Rw(this.form,this),this._oldForm&&Hp(this._oldForm,this)}static \u0275fac=function(r){return new(r||t)(H(ZP,10),H(XP,10),H(fx,8))};static \u0275dir=rt({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Nt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Fc([_q]),Pr,Rr]})}return t})();var vq={provide:El,useExisting:ai(()=>Cl)},Cl=(()=>{class t extends El{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(n){}model;update=new ze;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=gq(this,o)}ngOnChanges(n){this._added||this._setUpControl(),hq(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return oq(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||t)(H(Ca,13),H(ZP,10),H(XP,10),H(YP,10),H(gx,8))};static \u0275dir=rt({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Fc([vq]),Pr,Rr]})}return t})();var Eq=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Nr({type:t});static \u0275inj=zn({})}return t})(),Cw=class extends ba{constructor(e,n,r){super(Dw(n),Sw(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){hx(this,!1,e),e.forEach((r,i)=>{dx(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Il(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function KP(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Kp=(()=>{class t{useNonNullable=!1;get nonNullable(){let n=new t;return n.useNonNullable=!0,n}group(n,r=null){let i=this._reduceControls(n),o={};return KP(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Bp(i,o)}record(n,r=null){let i=this._reduceControls(n);return new ww(i,r)}control(n,r,i){let o={};return this.useNonNullable?(KP(r)?o=r:(o.validators=r,o.asyncValidators=i),new Fp(n,te(L({},o),{nonNullable:!0}))):new Fp(n,r,i)}array(n,r,i){let o=n.map(s=>this._createControl(s));return new Cw(o,r,i)}_reduceControls(n){let r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){if(n instanceof Fp)return n;if(n instanceof ba)return n;if(Array.isArray(n)){let r=n[0],i=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(r,i,o)}else return this.control(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Qp=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:gx,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:fx,useValue:n.callSetDisabledState??Aw}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Nr({type:t});static \u0275inj=zn({imports:[Eq]})}return t})();var Vi=class t{auth=A(hr);user$=Fu(this.auth);register(e,n,r){return Ae(zR(this.auth,e,n)).pipe(Z(i=>({uid:i.user.uid,email:i.user.email||e,displayName:r||e.split("@")[0],createdAt:new Date})),wn(i=>vr(()=>this.handleError(i))))}login(e,n){return Ae(GR(this.auth,e,n)).pipe(Z(()=>{}),wn(r=>vr(()=>this.handleError(r))))}async logout(){try{await WR(this.auth)}catch(e){throw this.handleError(e)}}getCurrentUser(){return this.auth.currentUser}handleError(e){let n="An error occurred";if(e.code)switch(e.code){case"auth/email-already-in-use":n="Email is already in use";break;case"auth/invalid-email":n="Invalid email address";break;case"auth/weak-password":n="Password is too weak (minimum 6 characters)";break;case"auth/user-not-found":n="User not found";break;case"auth/wrong-password":n="Invalid email or password";break;case"auth/operation-not-allowed":n="Operation not allowed";break;default:n=e.message||"An error occurred"}return new Error(n)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};function Iq(t,e){t&1&&(M(0,"small",14),N(1," Email l\xE0 b\u1EAFt bu\u1ED9c "),R())}function wq(t,e){t&1&&(M(0,"small",14),N(1," Vui l\xF2ng nh\u1EADp email h\u1EE3p l\u1EC7 "),R())}function Cq(t,e){t&1&&(M(0,"small",14),N(1," M\u1EADt kh\u1EA9u l\xE0 b\u1EAFt bu\u1ED9c "),R())}function bq(t,e){t&1&&(M(0,"small",14),N(1," M\u1EADt kh\u1EA9u ph\u1EA3i c\xF3 \xEDt nh\u1EA5t 6 k\xFD t\u1EF1 "),R())}function Tq(t,e){if(t&1&&(M(0,"div",15),N(1),R()),t&2){let n=Le();k(),Ze(" ",n.errorMessage," ")}}function Dq(t,e){if(t&1&&(M(0,"div",16),N(1),R()),t&2){let n=Le();k(),Ze(" ",n.successMessage," ")}}var Yp=class t{constructor(e,n,r){this.fb=e;this.authService=n;this.router=r}loginForm;isLoading=!1;errorMessage="";successMessage="";ngOnInit(){this.initializeForm()}initializeForm(){this.loginForm=this.fb.group({email:["",[xt.required,xt.email]],password:["",[xt.required,xt.minLength(6)]]})}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0,this.errorMessage="",this.successMessage="";let{email:e,password:n}=this.loginForm.value;this.authService.login(e,n).pipe($n(()=>{this.isLoading=!1})).subscribe({next:()=>{this.successMessage="Login successful!",this.router.navigate(["/dashboard"])},error:r=>{this.errorMessage=r instanceof Error?r.message:"Login failed"}})}static \u0275fac=function(n){return new(n||t)(H(Kp),H(Vi),H(zt))};static \u0275cmp=An({type:t,selectors:[["app-login"]],decls:26,vars:13,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["id","email","type","email","formControlName","email","placeholder","Nh\u1EADp email c\u1EE7a b\u1EA1n"],["class","error-text",4,"ngIf"],["for","password"],["id","password","type","password","formControlName","password","placeholder","Nh\u1EADp m\u1EADt kh\u1EA9u c\u1EE7a b\u1EA1n"],["class","alert alert-error",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"auth-link"],["routerLink","/register"],[1,"error-text"],[1,"alert","alert-error"],[1,"alert","alert-success"]],template:function(n,r){n&1&&(M(0,"div",0)(1,"div",1)(2,"h1"),N(3,"\u0110\u0103ng Nh\u1EADp"),R(),M(4,"form",2),Nt("ngSubmit",function(){return r.onSubmit()}),M(5,"div",3)(6,"label",4),N(7,"Email"),R(),Pe(8,"input",5),ce(9,Iq,2,0,"small",6)(10,wq,2,0,"small",6),R(),M(11,"div",3)(12,"label",7),N(13,"M\u1EADt Kh\u1EA9u"),R(),Pe(14,"input",8),ce(15,Cq,2,0,"small",6)(16,bq,2,0,"small",6),R(),ce(17,Tq,2,1,"div",9)(18,Dq,2,1,"div",10),M(19,"button",11),N(20),R()(),M(21,"div",12)(22,"p"),N(23,"Ch\u01B0a c\xF3 t\xE0i kho\u1EA3n? "),M(24,"a",13),N(25,"\u0110\u0103ng k\xFD t\u1EA1i \u0111\xE2y"),R()()()()()),n&2&&(k(4),$("formGroup",r.loginForm),k(4),Jt("is-invalid",(r.email==null?null:r.email.invalid)&&((r.email==null?null:r.email.dirty)||(r.email==null?null:r.email.touched))),k(),$("ngIf",(r.email==null?null:r.email.hasError("required"))&&(r.email==null?null:r.email.touched)),k(),$("ngIf",(r.email==null?null:r.email.hasError("email"))&&(r.email==null?null:r.email.touched)),k(4),Jt("is-invalid",(r.password==null?null:r.password.invalid)&&((r.password==null?null:r.password.dirty)||(r.password==null?null:r.password.touched))),k(),$("ngIf",(r.password==null?null:r.password.hasError("required"))&&(r.password==null?null:r.password.touched)),k(),$("ngIf",(r.password==null?null:r.password.hasError("minlength"))&&(r.password==null?null:r.password.touched)),k(),$("ngIf",r.errorMessage),k(),$("ngIf",r.successMessage),k(),$("disabled",r.loginForm.invalid||r.isLoading),k(),Ze(" ",r.isLoading?"\u0110ang \u0111\u0103ng nh\u1EADp...":"\u0110\u0103ng Nh\u1EADp"," "))},dependencies:[vi,po,Qp,Wp,Ta,zp,qp,wl,Cl,zs],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(135deg,#667eea,#764ba2)}.login-card[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:8px;box-shadow:0 10px 25px #0003;width:100%;max-width:400px}.login-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 30px;text-align:center;color:#333;font-size:28px}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:8px;color:#333;font-weight:500;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input.is-invalid[_ngcontent-%COMP%]{border-color:#e74c3c}.form-group[_ngcontent-%COMP%]   input.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #e74c3c1a}.error-text[_ngcontent-%COMP%]{color:#e74c3c;font-size:12px;margin-top:4px}.alert[_ngcontent-%COMP%]{padding:12px;border-radius:4px;margin-bottom:20px;font-size:14px}.alert.alert-error[_ngcontent-%COMP%]{background-color:#fadbd8;color:#c0392b;border:1px solid #f5b7b1}.alert.alert-success[_ngcontent-%COMP%]{background-color:#d5f4e6;color:#27ae60;border:1px solid #a9dfbf}.btn[_ngcontent-%COMP%]{padding:12px;border:none;border-radius:4px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;margin-bottom:20px}.btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #667eea66}.btn.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.auth-link[_ngcontent-%COMP%]{text-align:center}.auth-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.auth-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600}.auth-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};function Sq(t,e){t&1&&(M(0,"small",18),N(1," Email l\xE0 b\u1EAFt bu\u1ED9c "),R())}function Aq(t,e){t&1&&(M(0,"small",18),N(1," Vui l\xF2ng nh\u1EADp email h\u1EE3p l\u1EC7 "),R())}function Rq(t,e){t&1&&(M(0,"small",18),N(1," T\xEAn hi\u1EC3n th\u1ECB l\xE0 b\u1EAFt bu\u1ED9c "),R())}function Mq(t,e){t&1&&(M(0,"small",18),N(1," T\xEAn hi\u1EC3n th\u1ECB ph\u1EA3i c\xF3 \xEDt nh\u1EA5t 2 k\xFD t\u1EF1 "),R())}function Nq(t,e){t&1&&(M(0,"small",18),N(1," M\u1EADt kh\u1EA9u l\xE0 b\u1EAFt bu\u1ED9c "),R())}function Pq(t,e){t&1&&(M(0,"small",18),N(1," M\u1EADt kh\u1EA9u ph\u1EA3i c\xF3 \xEDt nh\u1EA5t 6 k\xFD t\u1EF1 "),R())}function xq(t,e){t&1&&(M(0,"small",18),N(1," Vui l\xF2ng x\xE1c nh\u1EADn m\u1EADt kh\u1EA9u c\u1EE7a b\u1EA1n "),R())}function Oq(t,e){t&1&&(M(0,"small",18),N(1," M\u1EADt kh\u1EA9u kh\xF4ng kh\u1EDBp "),R())}function kq(t,e){if(t&1&&(M(0,"div",19),N(1),R()),t&2){let n=Le();k(),Ze(" ",n.errorMessage," ")}}function Fq(t,e){if(t&1&&(M(0,"div",20),N(1),R()),t&2){let n=Le();k(),Ze(" ",n.successMessage," ")}}var Zp=class t{constructor(e,n,r){this.fb=e;this.authService=n;this.router=r}registerForm;isLoading=!1;errorMessage="";successMessage="";ngOnInit(){this.initializeForm()}initializeForm(){this.registerForm=this.fb.group({email:["",[xt.required,xt.email]],displayName:["",[xt.required,xt.minLength(2)]],password:["",[xt.required,xt.minLength(6)]],confirmPassword:["",[xt.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(e){let n=e.get("password")?.value,r=e.get("confirmPassword")?.value;return n===r?null:{passwordMismatch:!0}}get email(){return this.registerForm.get("email")}get displayName(){return this.registerForm.get("displayName")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}onSubmit(){if(this.registerForm.invalid)return;this.isLoading=!0,this.errorMessage="",this.successMessage="";let{email:e,password:n,displayName:r}=this.registerForm.value;this.authService.register(e,n,r).pipe($n(()=>{this.isLoading=!1})).subscribe({next:()=>{this.successMessage="Registration successful! Redirecting to dashboard...",this.router.navigate(["/dashboard"])},error:i=>{this.errorMessage=i instanceof Error?i.message:"Registration failed"}})}static \u0275fac=function(n){return new(n||t)(H(Kp),H(Vi),H(zt))};static \u0275cmp=An({type:t,selectors:[["app-register"]],decls:38,vars:21,consts:[[1,"register-container"],[1,"register-card"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["id","email","type","email","formControlName","email","placeholder","Nh\u1EADp email c\u1EE7a b\u1EA1n"],["class","error-text",4,"ngIf"],["for","displayName"],["id","displayName","type","text","formControlName","displayName","placeholder","Nh\u1EADp t\xEAn c\u1EE7a b\u1EA1n"],["for","password"],["id","password","type","password","formControlName","password","placeholder","Nh\u1EADp m\u1EADt kh\u1EA9u c\u1EE7a b\u1EA1n"],["for","confirmPassword"],["id","confirmPassword","type","password","formControlName","confirmPassword","placeholder","X\xE1c nh\u1EADn m\u1EADt kh\u1EA9u c\u1EE7a b\u1EA1n"],["class","alert alert-error",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"auth-link"],["routerLink","/login"],[1,"error-text"],[1,"alert","alert-error"],[1,"alert","alert-success"]],template:function(n,r){n&1&&(M(0,"div",0)(1,"div",1)(2,"h1"),N(3,"\u0110\u0103ng K\xFD"),R(),M(4,"form",2),Nt("ngSubmit",function(){return r.onSubmit()}),M(5,"div",3)(6,"label",4),N(7,"Email"),R(),Pe(8,"input",5),ce(9,Sq,2,0,"small",6)(10,Aq,2,0,"small",6),R(),M(11,"div",3)(12,"label",7),N(13,"T\xEAn Hi\u1EC3n Th\u1ECB"),R(),Pe(14,"input",8),ce(15,Rq,2,0,"small",6)(16,Mq,2,0,"small",6),R(),M(17,"div",3)(18,"label",9),N(19,"M\u1EADt Kh\u1EA9u"),R(),Pe(20,"input",10),ce(21,Nq,2,0,"small",6)(22,Pq,2,0,"small",6),R(),M(23,"div",3)(24,"label",11),N(25,"X\xE1c Nh\u1EADn M\u1EADt Kh\u1EA9u"),R(),Pe(26,"input",12),ce(27,xq,2,0,"small",6)(28,Oq,2,0,"small",6),R(),ce(29,kq,2,1,"div",13)(30,Fq,2,1,"div",14),M(31,"button",15),N(32),R()(),M(33,"div",16)(34,"p"),N(35,"\u0110\xE3 c\xF3 t\xE0i kho\u1EA3n? "),M(36,"a",17),N(37,"\u0110\u0103ng nh\u1EADp t\u1EA1i \u0111\xE2y"),R()()()()()),n&2&&(k(4),$("formGroup",r.registerForm),k(4),Jt("is-invalid",(r.email==null?null:r.email.invalid)&&((r.email==null?null:r.email.dirty)||(r.email==null?null:r.email.touched))),k(),$("ngIf",(r.email==null?null:r.email.hasError("required"))&&(r.email==null?null:r.email.touched)),k(),$("ngIf",(r.email==null?null:r.email.hasError("email"))&&(r.email==null?null:r.email.touched)),k(4),Jt("is-invalid",(r.displayName==null?null:r.displayName.invalid)&&((r.displayName==null?null:r.displayName.dirty)||(r.displayName==null?null:r.displayName.touched))),k(),$("ngIf",(r.displayName==null?null:r.displayName.hasError("required"))&&(r.displayName==null?null:r.displayName.touched)),k(),$("ngIf",(r.displayName==null?null:r.displayName.hasError("minlength"))&&(r.displayName==null?null:r.displayName.touched)),k(4),Jt("is-invalid",(r.password==null?null:r.password.invalid)&&((r.password==null?null:r.password.dirty)||(r.password==null?null:r.password.touched))),k(),$("ngIf",(r.password==null?null:r.password.hasError("required"))&&(r.password==null?null:r.password.touched)),k(),$("ngIf",(r.password==null?null:r.password.hasError("minlength"))&&(r.password==null?null:r.password.touched)),k(4),Jt("is-invalid",(r.confirmPassword==null?null:r.confirmPassword.invalid)&&((r.confirmPassword==null?null:r.confirmPassword.dirty)||(r.confirmPassword==null?null:r.confirmPassword.touched))),k(),$("ngIf",(r.confirmPassword==null?null:r.confirmPassword.hasError("required"))&&(r.confirmPassword==null?null:r.confirmPassword.touched)),k(),$("ngIf",r.registerForm.hasError("passwordMismatch")&&(r.confirmPassword==null?null:r.confirmPassword.touched)),k(),$("ngIf",r.errorMessage),k(),$("ngIf",r.successMessage),k(),$("disabled",r.registerForm.invalid||r.isLoading),k(),Ze(" ",r.isLoading?"\u0110ang \u0111\u0103ng k\xFD...":"\u0110\u0103ng K\xFD"," "))},dependencies:[vi,po,Qp,Wp,Ta,zp,qp,wl,Cl,zs],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(135deg,#667eea,#764ba2)}.register-card[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:8px;box-shadow:0 10px 25px #0003;width:100%;max-width:400px}.register-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 30px;text-align:center;color:#333;font-size:28px}.register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:8px;color:#333;font-weight:500;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   input.is-invalid[_ngcontent-%COMP%]{border-color:#e74c3c}.form-group[_ngcontent-%COMP%]   input.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #e74c3c1a}.error-text[_ngcontent-%COMP%]{color:#e74c3c;font-size:12px;margin-top:4px}.alert[_ngcontent-%COMP%]{padding:12px;border-radius:4px;margin-bottom:20px;font-size:14px}.alert.alert-error[_ngcontent-%COMP%]{background-color:#fadbd8;color:#c0392b;border:1px solid #f5b7b1}.alert.alert-success[_ngcontent-%COMP%]{background-color:#d5f4e6;color:#27ae60;border:1px solid #a9dfbf}.btn[_ngcontent-%COMP%]{padding:12px;border:none;border-radius:4px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;margin-bottom:20px}.btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #667eea66}.btn.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.auth-link[_ngcontent-%COMP%]{text-align:center}.auth-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.auth-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600}.auth-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var Da=class t{maxReadings=100;readingsSubject=new le([]);readings$=this.readingsSubject.asObservable();constructor(){}addReading(e,n){let r=this.readingsSubject.value,i={temperature:e,humidity:n,timestamp:Date.now()};r.push(i),r.length>this.maxReadings&&r.shift(),this.readingsSubject.next([...r])}getAverageTemperature(){let e=this.readingsSubject.value;return e.length===0?0:e.reduce((r,i)=>r+i.temperature,0)/e.length}getAverageHumidity(){let e=this.readingsSubject.value;return e.length===0?0:e.reduce((r,i)=>r+i.humidity,0)/e.length}getMaxTemperature(){let e=this.readingsSubject.value;return e.length===0?0:Math.max(...e.map(n=>n.temperature))}getMinTemperature(){let e=this.readingsSubject.value;return e.length===0?0:Math.min(...e.map(n=>n.temperature))}getMaxHumidity(){let e=this.readingsSubject.value;return e.length===0?0:Math.max(...e.map(n=>n.humidity))}getMinHumidity(){let e=this.readingsSubject.value;return e.length===0?0:Math.min(...e.map(n=>n.humidity))}clearReadings(){this.readingsSubject.next([])}getAllReadings(){return this.readingsSubject.value}static \u0275fac=function(n){return new(n||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var Xp=class t{constructor(e,n){this.database=e;this.sensorHistory=n}temperatureSubject=new le(0);humiditySubject=new le(0);motionSubject=new le(!1);statusSubject=new le("optimal");lastUpdatedSubject=new le(new Date);isLoadingSubject=new le(!0);temperature$=this.temperatureSubject.asObservable();humidity$=this.humiditySubject.asObservable();motion$=this.motionSubject.asObservable();status$=this.statusSubject.asObservable();lastUpdated$=this.lastUpdatedSubject.asObservable();isLoading$=this.isLoadingSubject.asObservable();listenToSensorData(){let e=Fi(this.database,"warehouse"),n=Fi(this.database,"motion");gl(e,r=>{if(r.exists()){let i=r.val(),o=parseFloat(i.temperature)||0,s=parseFloat(i.humidity)||0;this.temperatureSubject.next(o),this.humiditySubject.next(s),this.lastUpdatedSubject.next(new Date),this.isLoadingSubject.next(!1),this.sensorHistory.addReading(o,s),this.updateStatus(o,s)}},r=>{console.error("Error reading sensor data:",r),this.isLoadingSubject.next(!1)}),gl(n,r=>{if(r.exists()){let i=r.val();this.motionSubject.next(i)}},r=>{console.error("Error reading motion data:",r)})}stopListening(){let e=Fi(this.database,"warehouse"),n=Fi(this.database,"motion");pl(e),pl(n)}getTemperature(){return this.temperatureSubject.value}getHumidity(){return this.humiditySubject.value}getMotion(){return this.motionSubject.value}getStatus(){return this.statusSubject.value}updateStatus(e,n){let r=e>=16&&e<=26,i=n>=30&&n<=60,o=e>=12&&e<=30,s=n>=20&&n<=70;r&&i?this.statusSubject.next("optimal"):o&&s?this.statusSubject.next("warning"):this.statusSubject.next("critical")}static \u0275fac=function(n){return new(n||t)(G(Yr),G(Da))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var Jp=class t{database=A(Yr);currentInventorySubject=new le(0);historySubject=new le([]);alarmHistorySubject=new le([]);doorHistorySubject=new le([]);isLoadingSubject=new le(!0);currentInventory$=this.currentInventorySubject.asObservable();history$=this.historySubject.asObservable();alarmHistory$=this.alarmHistorySubject.asObservable();doorHistory$=this.doorHistorySubject.asObservable();isLoading$=this.isLoadingSubject.asObservable();constructor(){}listenToWarehouseData(){let e=Fi(this.database,"warehouse");gl(e,n=>{if(n.exists()){let r=n.val(),i=r.quantity||0;if(this.currentInventorySubject.next(i),r.history){let o=[],s=[],a=[];r.history.alarm&&(Object.keys(r.history.alarm).forEach(u=>{let l=r.history.alarm[u];s.push({timestamp:u,event:l.event||"ALARM"})}),s.sort((u,l)=>new Date(l.timestamp).getTime()-new Date(u.timestamp).getTime()),this.alarmHistorySubject.next(s)),r.history.door&&(Object.keys(r.history.door).forEach(u=>{let l=r.history.door[u];a.push({timestamp:u,event:l.event||"OPEN"})}),a.sort((u,l)=>new Date(l.timestamp).getTime()-new Date(u.timestamp).getTime()),this.doorHistorySubject.next(a)),Object.keys(r.history).forEach(u=>{let l=r.history[u];u!=="alarm"&&u!=="door"&&l.amount!==void 0&&o.push({date:u,amount:l.amount||0,ton_sau:l.ton_sau||0,type:l.type||"NHAP"})}),o.sort((u,l)=>new Date(l.date).getTime()-new Date(u.date).getTime()),this.historySubject.next(o)}this.isLoadingSubject.next(!1)}},n=>{console.error("Error reading warehouse data:",n),this.isLoadingSubject.next(!1)})}stopListening(){let e=Fi(this.database,"warehouse");pl(e)}getCurrentInventory(){return this.currentInventorySubject.value}getHistory(){return this.historySubject.value}getAlarmHistory(){return this.alarmHistorySubject.value}getDoorHistory(){return this.doorHistorySubject.value}formatDate(e){try{let[n,r]=e.split("_"),[i,o,s]=n.split("-").map(Number),[a,u,l]=r.split("-").map(Number);return new Date(i,o-1,s,a,u,l).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return e}}getTransactionTypeLabel(e){return e==="NHAP"?"Nh\u1EADp H\xE0ng":"Xu\u1EA5t H\xE0ng"}getTransactionTypeColor(e){return e==="NHAP"?"#4CAF50":"#FF6F00"}formatTimestamp(e){return this.formatDate(e)}getEventLabel(e){switch(e){case"ALARM":return"C\u1EA3nh B\xE1o";case"OPEN":return"M\u1EDF C\u1EEDa";default:return e}}getEventColor(e){switch(e){case"ALARM":return"#F44336";case"OPEN":return"#2196F3";default:return"#9E9E9E"}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};function Vq(t,e){if(t&1&&(M(0,"span",26),N(1),R()),t&2){let n=e.ngIf;k(),Ze(" ",n.email," ")}}function jq(t,e){if(t&1&&(M(0,"p",36),N(1),De(2,"date"),R()),t&2){let n=Le(2);k(),Ze(" Th\u1EDDi gian: ",Ds(2,1,n.alertTime,"HH:mm:ss")," ")}}function Uq(t,e){if(t&1){let n=n_();M(0,"div",27)(1,"div",28)(2,"div",29)(3,"span",30),N(4,"\u{1F6A8}"),R(),M(5,"h2"),N(6),R()(),M(7,"div",31)(8,"p"),N(9,"Ph\xE1t hi\u1EC7n ho\u1EA1t \u0111\u1ED9ng l\u1EA1 t\u1EA1i kho!"),R(),ce(10,jq,3,4,"p",32),R(),M(11,"div",33)(12,"button",34),Nt("click",function(){mc(n);let i=Le();return yc(i.dismissAlert())}),N(13,"\u0110\xF3ng"),R(),M(14,"button",35),Nt("click",function(){mc(n);let i=Le();return yc(i.dismissAlert())}),N(15,"T\xF4i \u0111\xE3 bi\u1EBFt"),R()()()()}if(t&2){let n=Le();$("@fadeInOut",void 0),k(6),Mn(n.alertMessage),k(4),$("ngIf",n.alertTime)}}function Bq(t,e){if(t&1&&(M(0,"div",39),N(1),De(2,"date"),R()),t&2){let n=e.ngIf;k(),Ze(" C\u1EADp nh\u1EADt l\u1EA7n cu\u1ED1i: ",Ds(2,1,n,"short")," ")}}function $q(t,e){if(t&1&&(M(0,"div",37),ce(1,Bq,3,4,"div",38),De(2,"async"),R()),t&2){let n=Le();k(),$("ngIf",xe(2,1,n.lastUpdated$))}}function Hq(t,e){t&1&&(M(0,"div",40),Pe(1,"div",41),M(2,"p"),N(3,"\u0110ang t\u1EA3i d\u1EEF li\u1EC7u c\u1EA3m bi\u1EBFn..."),R()())}function zq(t,e){if(t&1&&(M(0,"div",21)(1,"div",45)(2,"span",46),N(3),De(4,"number"),R(),M(5,"span",47),N(6,"\xB0C"),R()(),M(7,"div",48)(8,"div",49),Pe(9,"div",50),R(),M(10,"div",51)(11,"span"),N(12,"0\xB0C"),R(),M(13,"span"),N(14,"25\xB0C"),R(),M(15,"span"),N(16,"50\xB0C"),R()()(),M(17,"div",52),Pe(18,"span",53),N(19),R(),M(20,"div",54)(21,"p",55)(22,"strong"),N(23,"T\u1ED1i \u01AFu:"),R(),N(24," 16\xB0C - 26\xB0C "),R(),M(25,"p",56)(26,"strong"),N(27,"C\u1EA3nh B\xE1o:"),R(),N(28," 12\xB0C - 30\xB0C "),R()()()),t&2){let n=e.ngIf,r=Le(2);k(3),Mn(Ds(4,7,n,"1.1-1")),k(6),Rn("width",r.getTemperatureGauge(n),"%")("background",r.getTemperatureFillColor(n)),k(8),$("ngClass",r.getTemperatureStatus(n)),k(2),Ze(" ",r.getTemperatureStatusText(n)," ")}}function qq(t,e){if(t&1&&(M(0,"div",21)(1,"div",57)(2,"span",46),N(3),De(4,"number"),R(),M(5,"span",47),N(6,"%"),R()(),M(7,"div",48)(8,"div",49),Pe(9,"div",50),R(),M(10,"div",51)(11,"span"),N(12,"0%"),R(),M(13,"span"),N(14,"50%"),R(),M(15,"span"),N(16,"100%"),R()()(),M(17,"div",52),Pe(18,"span",53),N(19),R(),M(20,"div",54)(21,"p",55)(22,"strong"),N(23,"T\u1ED1i \u01AFu:"),R(),N(24," 30% - 60% "),R(),M(25,"p",56)(26,"strong"),N(27,"C\u1EA3nh B\xE1o:"),R(),N(28," 20% - 70% "),R()()()),t&2){let n=e.ngIf,r=Le(2);k(3),Mn(Ds(4,7,n,"1.1-1")),k(6),Rn("width",r.getHumidityGauge(n),"%")("background",r.getHumidityFillColor(n)),k(8),$("ngClass",r.getHumidityStatus(n)),k(2),Ze(" ",r.getHumidityStatusText(n)," ")}}function Gq(t,e){if(t&1&&(M(0,"div",42)(1,"div",43)(2,"div",17)(3,"h2"),N(4,"Nhi\u1EC7t \u0110\u1ED9"),R(),M(5,"span",18),N(6,"\u{1F321}\uFE0F"),R()(),ce(7,zq,29,10,"div",19),De(8,"async"),R(),M(9,"div",44)(10,"div",17)(11,"h2"),N(12,"\u0110\u1ED9 \u1EA8m"),R(),M(13,"span",18),N(14,"\u{1F4A7}"),R()(),ce(15,qq,29,10,"div",19),De(16,"async"),R()()),t&2){let n=Le();k(7),$("ngIf",xe(8,2,n.temperature$)),k(8),$("ngIf",xe(16,4,n.humidity$))}}function Wq(t,e){if(t&1&&(M(0,"div",21)(1,"div",58)(2,"span",46),N(3),R(),M(4,"span",47),N(5,"S\u1EA3n ph\u1EA9m"),R()()()),t&2){let n=e.ngIf;k(3),Mn(n)}}function Kq(t,e){t&1&&(M(0,"div",59),Pe(1,"div",41),M(2,"p"),N(3,"\u0110ang t\u1EA3i l\u1ECBch s\u1EED..."),R()())}function Qq(t,e){if(t&1&&(M(0,"div",63)(1,"div",64)(2,"div",65)(3,"span",66),N(4),R(),M(5,"span",67),N(6),R()(),M(7,"div",68),N(8),R()(),M(9,"div",69)(10,"span",70),N(11,"T\u1ED3n sau: "),M(12,"strong"),N(13),R()()()()),t&2){let n=e.$implicit,r=Le(2);k(3),Rn("color",r.getTransactionTypeColor(n.type)),k(),kc(" ",n.type==="NHAP"?"\u2795":"\u2796"," ",r.getTransactionTypeLabel(n.type)," "),k(2),Mn(r.formatDate(n.date)),k(),Rn("color",n.type==="NHAP"?"#4CAF50":"#FF6F00"),k(),kc(" ",n.type==="NHAP"?"+":"-","",n.amount," "),k(5),Mn(n.ton_sau)}}function Yq(t,e){t&1&&(M(0,"div",71)(1,"p"),N(2,"Ch\u01B0a c\xF3 giao d\u1ECBch n\xE0o"),R()())}function Zq(t,e){if(t&1&&(M(0,"div",60),ce(1,Qq,14,10,"div",61),De(2,"async"),ce(3,Yq,3,0,"div",62),De(4,"async"),R()),t&2){let n,r=Le();k(),$("ngForOf",xe(2,2,r.inventoryHistory$)),k(2),$("ngIf",((n=xe(4,4,r.inventoryHistory$))==null?null:n.length)===0)}}function Xq(t,e){t&1&&(M(0,"div",59),Pe(1,"div",41),M(2,"p"),N(3,"\u0110ang t\u1EA3i l\u1ECBch s\u1EED..."),R()())}function Jq(t,e){if(t&1&&(M(0,"div",73)(1,"div",74),N(2,"\u{1F6A8}"),R(),M(3,"div",75)(4,"div",76),N(5),R(),M(6,"div",77),N(7),R()()()),t&2){let n=e.$implicit,r=Le(2);k(),Rn("color",r.getEventColor(n.event)),k(3),Rn("color",r.getEventColor(n.event)),k(),Ze(" ",r.getEventLabel(n.event)," "),k(2),Mn(r.formatTimestamp(n.timestamp))}}function eG(t,e){t&1&&(M(0,"div",71)(1,"p"),N(2,"Ch\u01B0a c\xF3 c\u1EA3nh b\xE1o n\xE0o"),R()())}function tG(t,e){if(t&1&&(M(0,"div",60),ce(1,Jq,8,6,"div",72),De(2,"async"),ce(3,eG,3,0,"div",62),De(4,"async"),R()),t&2){let n,r=Le();k(),$("ngForOf",xe(2,2,r.alarmHistory$)),k(2),$("ngIf",((n=xe(4,4,r.alarmHistory$))==null?null:n.length)===0)}}function nG(t,e){t&1&&(M(0,"div",59),Pe(1,"div",41),M(2,"p"),N(3,"\u0110ang t\u1EA3i l\u1ECBch s\u1EED..."),R()())}function rG(t,e){if(t&1&&(M(0,"div",79)(1,"div",74),N(2,"\u{1F6AA}"),R(),M(3,"div",75)(4,"div",76),N(5),R(),M(6,"div",77),N(7),R()()()),t&2){let n=e.$implicit,r=Le(2);k(),Rn("color",r.getEventColor(n.event)),k(3),Rn("color",r.getEventColor(n.event)),k(),Ze(" ",r.getEventLabel(n.event)," "),k(2),Mn(r.formatTimestamp(n.timestamp))}}function iG(t,e){t&1&&(M(0,"div",71)(1,"p"),N(2,"Ch\u01B0a c\xF3 l\u1ECBch s\u1EED m\u1EDF c\u1EEDa"),R()())}function oG(t,e){if(t&1&&(M(0,"div",60),ce(1,rG,8,6,"div",78),De(2,"async"),ce(3,iG,3,0,"div",62),De(4,"async"),R()),t&2){let n,r=Le();k(),$("ngForOf",xe(2,2,r.doorHistory$)),k(2),$("ngIf",((n=xe(4,4,r.doorHistory$))==null?null:n.length)===0)}}var eg=class t{authService=A(Vi);iotService=A(Xp);sensorHistory=A(Da);warehouseService=A(Jp);router=A(zt);user$=this.authService.user$;temperature$=this.iotService.temperature$;humidity$=this.iotService.humidity$;motion$=this.iotService.motion$;status$=this.iotService.status$;lastUpdated$=this.iotService.lastUpdated$;isLoading$=this.iotService.isLoading$;sensorReadings$=this.sensorHistory.readings$;currentInventory$=this.warehouseService.currentInventory$;inventoryHistory$=this.warehouseService.history$;alarmHistory$=this.warehouseService.alarmHistory$;doorHistory$=this.warehouseService.doorHistory$;warehouseLoading$=this.warehouseService.isLoading$;intruderAlert$=new le(!1);alertMessage="Ph\xE1t Hi\u1EC7n C\u1EA3nh B\xE1o Tr\u1ED9m!";alertTime=null;ngOnInit(){this.iotService.listenToSensorData(),this.warehouseService.listenToWarehouseData(),this.checkMotionAlert()}ngOnDestroy(){this.iotService.stopListening(),this.warehouseService.stopListening()}async logout(){try{await this.authService.logout(),this.router.navigate(["/login"])}catch(e){console.error("Logout error:",e)}}checkMotionAlert(){this.motion$.subscribe(e=>{console.log("Motion value:",e),e&&(console.log("Motion detected! Triggering theft alert..."),this.triggerTheftAlert())})}triggerTheftAlert(){this.alertTime=new Date,this.intruderAlert$.next(!0),setTimeout(()=>{this.intruderAlert$.next(!1)},8e3)}dismissAlert(){this.intruderAlert$.next(!1)}getTemperatureGauge(e){return Math.max(0,Math.min(100,e/50*100))}getHumidityGauge(e){return Math.max(0,Math.min(100,e))}getTemperatureFillColor(e){return e<10?"#2196F3":e<16||e<=26?"#4CAF50":e<=30?"#FFC107":e<=35?"#FF9800":"#F44336"}getHumidityFillColor(e){return e<20?"#FF6F00":e<30?"#FFC107":e<=60?"#4CAF50":e<=70?"#FFC107":"#F44336"}getTemperatureStatus(e){return e>=16&&e<=26?"optimal":e>=12&&e<=30?"warning":"critical"}getTemperatureStatusText(e){return e>=16&&e<=26?"Kho\u1EA3ng T\u1ED1i \u01AFu":e>=12&&e<=30?"Kho\u1EA3ng C\u1EA3nh B\xE1o":"Kho\u1EA3ng Nguy Hi\u1EC3m"}getHumidityStatus(e){return e>=30&&e<=60?"optimal":e>=20&&e<=70?"warning":"critical"}getHumidityStatusText(e){return e>=30&&e<=60?"Kho\u1EA3ng T\u1ED1i \u01AFu":e>=20&&e<=70?"Kho\u1EA3ng C\u1EA3nh B\xE1o":"Kho\u1EA3ng Nguy Hi\u1EC3m"}getStatusText(e){switch(e){case"optimal":return"T\u1ED1i \u01AFu";case"warning":return"C\u1EA3nh B\xE1o";case"critical":return"Nguy Hi\u1EC3m";default:return"Kh\xF4ng X\xE1c \u0110\u1ECBnh"}}getTransactionTypeLabel(e){return this.warehouseService.getTransactionTypeLabel(e)}getTransactionTypeColor(e){return this.warehouseService.getTransactionTypeColor(e)}formatDate(e){return this.warehouseService.formatDate(e)}getEventLabel(e){return this.warehouseService.getEventLabel(e)}getEventColor(e){return this.warehouseService.getEventColor(e)}formatTimestamp(e){return this.warehouseService.formatTimestamp(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=An({type:t,selectors:[["app-dashboard"]],decls:70,vars:36,consts:[[1,"dashboard-container"],[1,"navbar"],[1,"nav-content"],[1,"logo-section"],[1,"logo-icon"],[1,"user-menu"],["class","user-name",4,"ngIf"],[1,"logout-btn",3,"click"],["class","theft-alert-overlay",4,"ngIf"],[1,"content"],["class","status-section",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","sensor-grid",4,"ngIf"],[1,"inventory-section"],[1,"inventory-header"],[1,"inventory-container"],[1,"inventory-card","current-inventory"],[1,"card-header"],[1,"icon"],["class","card-content",4,"ngIf"],[1,"inventory-card","history-card"],[1,"card-content"],["class","loading-state",4,"ngIf"],["class","history-list",4,"ngIf"],[1,"inventory-card","history-card","alarm-history"],[1,"inventory-card","history-card","door-history"],[1,"user-name"],[1,"theft-alert-overlay"],[1,"theft-alert-modal"],[1,"alert-header"],[1,"alert-icon"],[1,"alert-body"],["class","alert-time",4,"ngIf"],[1,"alert-actions"],[1,"btn-dismiss",3,"click"],[1,"btn-contact",3,"click"],[1,"alert-time"],[1,"status-section"],["class","last-updated",4,"ngIf"],[1,"last-updated"],[1,"loading-container"],[1,"spinner"],[1,"sensor-grid"],[1,"sensor-card","temperature-card"],[1,"sensor-card","humidity-card"],[1,"temperature-display"],[1,"value"],[1,"unit"],[1,"gauge-container"],[1,"gauge-background"],[1,"gauge-fill"],[1,"gauge-labels"],[1,"status-indicator",3,"ngClass"],[1,"status-dot"],[1,"range-info"],[1,"optimal-range"],[1,"warning-range"],[1,"humidity-display"],[1,"inventory-value"],[1,"loading-state"],[1,"history-list"],["class","history-item",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"history-item"],[1,"transaction-header"],[1,"transaction-info"],[1,"transaction-type"],[1,"transaction-date"],[1,"transaction-amount"],[1,"transaction-details"],[1,"ton-sau"],[1,"empty-state"],["class","event-item alarm-event",4,"ngFor","ngForOf"],[1,"event-item","alarm-event"],[1,"event-icon"],[1,"event-details"],[1,"event-label"],[1,"event-timestamp"],["class","event-item door-event",4,"ngFor","ngForOf"],[1,"event-item","door-event"]],template:function(n,r){n&1&&(M(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"div",4),N(5,"\u{1F3EA}"),R(),M(6,"h1"),N(7,"Qu\u1EA3n L\xFD C\u1EEDa H\xE0ng"),R()(),M(8,"div",5),ce(9,Vq,2,1,"span",6),De(10,"async"),M(11,"button",7),Nt("click",function(){return r.logout()}),M(12,"span"),N(13,"\u{1F6AA}"),R(),N(14," \u0110\u0103ng Xu\u1EA5t "),R()()()(),ce(15,Uq,16,3,"div",8),De(16,"async"),M(17,"div",9),ce(18,$q,3,3,"div",10),De(19,"async"),ce(20,Hq,4,0,"div",11),De(21,"async"),ce(22,Gq,17,6,"div",12),De(23,"async"),M(24,"div",13)(25,"div",14)(26,"h2"),N(27,"\u{1F4E6} Qu\u1EA3n L\xFD Kho"),R()(),M(28,"div",15)(29,"div",16)(30,"div",17)(31,"h3"),N(32,"T\u1ED3n Kho Hi\u1EC7n T\u1EA1i"),R(),M(33,"span",18),N(34,"\u{1F4CA}"),R()(),ce(35,Wq,6,1,"div",19),De(36,"async"),R(),M(37,"div",20)(38,"div",17)(39,"h3"),N(40,"L\u1ECBch S\u1EED Giao D\u1ECBch"),R(),M(41,"span",18),N(42,"\u{1F4DC}"),R()(),M(43,"div",21),ce(44,Kq,4,0,"div",22),De(45,"async"),ce(46,Zq,5,6,"div",23),De(47,"async"),R()(),M(48,"div",24)(49,"div",17)(50,"h3"),N(51,"L\u1ECBch S\u1EED C\u1EA3nh B\xE1o"),R(),M(52,"span",18),N(53,"\u{1F6A8}"),R()(),M(54,"div",21),ce(55,Xq,4,0,"div",22),De(56,"async"),ce(57,tG,5,6,"div",23),De(58,"async"),R()(),M(59,"div",25)(60,"div",17)(61,"h3"),N(62,"L\u1ECBch S\u1EED M\u1EDF C\u1EEDa"),R(),M(63,"span",18),N(64,"\u{1F6AA}"),R()(),M(65,"div",21),ce(66,nG,4,0,"div",22),De(67,"async"),ce(68,oG,5,6,"div",23),De(69,"async"),R()()()()()()),n&2&&(k(9),$("ngIf",xe(10,12,r.user$)),k(6),$("ngIf",xe(16,14,r.intruderAlert$)),k(3),$("ngIf",xe(19,16,r.status$)),k(2),$("ngIf",xe(21,18,r.isLoading$)),k(2),$("ngIf",!xe(23,20,r.isLoading$)),k(13),$("ngIf",xe(36,22,r.currentInventory$)),k(9),$("ngIf",xe(45,24,r.warehouseLoading$)),k(2),$("ngIf",!xe(47,26,r.warehouseLoading$)),k(9),$("ngIf",xe(56,28,r.warehouseLoading$)),k(2),$("ngIf",!xe(58,30,r.warehouseLoading$)),k(9),$("ngIf",xe(67,32,r.warehouseLoading$)),k(2),$("ngIf",!xe(69,34,r.warehouseLoading$)))},dependencies:[vi,b_,Lh,po,D_,A_,S_],styles:['.dashboard-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#c3cfe2)}.theft-alert-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;justify-content:center;align-items:center;z-index:9999;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.theft-alert-modal[_ngcontent-%COMP%]{background:#fff;border-radius:20px;max-width:500px;width:90%;box-shadow:0 20px 60px #f443364d;overflow:hidden;animation:_ngcontent-%COMP%_slideDown .4s ease-out}.alert-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff5252,#ff1744);color:#fff;padding:30px;display:flex;align-items:center;gap:20px}.alert-header[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{font-size:48px;animation:_ngcontent-%COMP%_pulse .6s ease-in-out infinite}.alert-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:700}.alert-body[_ngcontent-%COMP%]{padding:30px;text-align:center}.alert-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:12px 0;font-size:16px;color:#2c3e50;line-height:1.6}.alert-body[_ngcontent-%COMP%]   p.alert-time[_ngcontent-%COMP%]{font-size:14px;color:#7f8c8d;margin-top:20px;padding-top:20px;border-top:1px solid #ecf0f1}.alert-actions[_ngcontent-%COMP%]{padding:20px 30px 30px;display:flex;gap:12px;justify-content:center}.btn-dismiss[_ngcontent-%COMP%], .btn-contact[_ngcontent-%COMP%]{padding:12px 28px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:.5px}.btn-dismiss[_ngcontent-%COMP%]{background:#ecf0f1;color:#2c3e50}.btn-dismiss[_ngcontent-%COMP%]:hover{background:#ddd;transform:translateY(-2px)}.btn-contact[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff5252,#ff1744);color:#fff;flex:1}.btn-contact[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #f443364d;transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translateY(-50px);opacity:0}to{transform:translateY(0);opacity:1}}.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);padding:16px 0;box-shadow:0 4px 20px #667eea4d;position:sticky;top:0;z-index:100}.nav-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1400px;margin:0 auto;padding:0 30px}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;color:#fff}.logo-section[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:32px;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;letter-spacing:.5px}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-8px)}}.user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.user-name[_ngcontent-%COMP%]{color:#ffffffe6;font-size:14px;font-weight:500}.logout-btn[_ngcontent-%COMP%]{padding:10px 20px;background-color:#ffffff26;color:#fff;border:1px solid rgba(255,255,255,.3);border-radius:6px;cursor:pointer;font-weight:600;font-size:14px;transition:all .3s ease;display:flex;align-items:center;gap:8px}.logout-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff40;border-color:#ffffff80;transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.logout-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.content[_ngcontent-%COMP%]{flex:1;max-width:1400px;margin:0 auto;padding:40px 30px;width:100%}.status-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:40px;padding:20px;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000000d}.status-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 24px;border-radius:50px;font-weight:600;font-size:16px}.status-badge[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.status-badge.status-optimal[_ngcontent-%COMP%]{background:#4caf501a;color:#4caf50}.status-badge.status-optimal[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#4caf50}.status-badge.status-warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#ffc107}.status-badge.status-warning[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#ffc107}.status-badge.status-critical[_ngcontent-%COMP%]{background:#f443361a;color:#f44336}.status-badge.status-critical[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#f44336}.last-updated[_ngcontent-%COMP%]{color:#7f8c8d;font-size:13px}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:400px;gap:20px;color:#7f8c8d}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #ecf0f1;border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.sensor-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:30px;margin-bottom:40px}.sensor-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:28px;box-shadow:0 8px 24px #00000014;transition:all .3s ease;position:relative;overflow:hidden}.sensor-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--card-color) 0%,transparent 100%)}.sensor-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 36px #0000001f}.sensor-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.sensor-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;color:#2c3e50;font-weight:600}.sensor-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:28px}.sensor-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.temperature-card[_ngcontent-%COMP%]{--card-color: #ff6b6b}.temperature-card[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#ff6b6b,#ff8e72)}.humidity-card[_ngcontent-%COMP%]{--card-color: #4dabf7}.humidity-card[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#4dabf7,#74c0fc)}.temperature-display[_ngcontent-%COMP%], .humidity-display[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:8px;margin-bottom:12px}.temperature-display[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .humidity-display[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:48px;font-weight:700;color:#2c3e50;line-height:1}.temperature-display[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%], .humidity-display[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:24px;color:#7f8c8d;font-weight:500}.gauge-container[_ngcontent-%COMP%]{margin:16px 0}.gauge-background[_ngcontent-%COMP%]{width:100%;height:12px;background:#ecf0f1;border-radius:10px;overflow:hidden;margin-bottom:8px}.gauge-fill[_ngcontent-%COMP%]{height:100%;border-radius:10px;transition:width .5s ease,background .5s ease;box-shadow:0 2px 8px #00000026}.gauge-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:12px;color:#7f8c8d;padding:0 4px;font-weight:500}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 14px;border-radius:8px;font-size:13px;font-weight:600}.status-indicator[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.status-indicator.optimal[_ngcontent-%COMP%]{background:#4caf501a;color:#4caf50}.status-indicator.optimal[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#4caf50}.status-indicator.warning[_ngcontent-%COMP%]{background:#ffc1071a;color:#ffc107}.status-indicator.warning[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#ffc107}.status-indicator.critical[_ngcontent-%COMP%]{background:#f443361a;color:#f44336}.status-indicator.critical[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#f44336}.range-info[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid #ecf0f1}.range-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;font-size:12px;color:#7f8c8d}.range-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c3e50}.range-info[_ngcontent-%COMP%]   .optimal-range[_ngcontent-%COMP%], .range-info[_ngcontent-%COMP%]   .optimal-range[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#4caf50}.range-info[_ngcontent-%COMP%]   .warning-range[_ngcontent-%COMP%], .range-info[_ngcontent-%COMP%]   .warning-range[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#ffc107}.summary-section[_ngcontent-%COMP%]{margin-top:40px}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:28px;box-shadow:0 8px 24px #00000014}.summary-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 24px;font-size:18px;color:#2c3e50;font-weight:600}.analysis-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px}.analysis-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:600;color:#7f8c8d;margin-bottom:12px;text-transform:uppercase;letter-spacing:.5px}.stability-bar[_ngcontent-%COMP%], .quality-score[_ngcontent-%COMP%]{position:relative}.stability-bar[_ngcontent-%COMP%]   .stability-indicator[_ngcontent-%COMP%], .stability-bar[_ngcontent-%COMP%]   .quality-fill[_ngcontent-%COMP%], .quality-score[_ngcontent-%COMP%]   .stability-indicator[_ngcontent-%COMP%], .quality-score[_ngcontent-%COMP%]   .quality-fill[_ngcontent-%COMP%]{height:8px;border-radius:10px;background:linear-gradient(90deg,#667eea,#764ba2);transition:width .5s ease}.stability-bar[_ngcontent-%COMP%]{background:#ecf0f1;border-radius:10px;overflow:hidden;height:8px}.humidity-indicator[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4dabf7,#74c0fc);border-radius:10px;height:24px;display:flex;align-items:center;justify-content:flex-end;padding-right:10px;color:#fff;font-size:12px;font-weight:600;transition:width .5s ease}.quality-score[_ngcontent-%COMP%]   .score-bar[_ngcontent-%COMP%]{background:#ecf0f1;border-radius:10px;overflow:hidden;height:8px;margin-bottom:8px}.quality-score[_ngcontent-%COMP%]   .quality-fill[_ngcontent-%COMP%]{height:100%}.quality-score[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#2c3e50}.analytics-section[_ngcontent-%COMP%]{margin-top:40px}.analytics-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#2c3e50;margin:0 0 24px;display:flex;align-items:center;gap:10px}.analytics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px}.analytics-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;box-shadow:0 8px 24px #00000014;transition:all .3s ease}.analytics-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 12px 36px #0000001f}.analytics-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#2c3e50;margin:0 0 20px;padding-bottom:12px;border-bottom:2px solid #ecf0f1}.stats-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #ecf0f1}.stat-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:#7f8c8d;text-transform:uppercase;letter-spacing:.5px}.stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#2c3e50}.stat-item[_ngcontent-%COMP%]   .stat-value.max[_ngcontent-%COMP%]{color:#f44336}.stat-item[_ngcontent-%COMP%]   .stat-value.min[_ngcontent-%COMP%]{color:#2196f3}.status-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;border-radius:12px;background:#ecf0f1}.status-display[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:32px;min-width:40px;text-align:center}.status-display[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]{flex:1}.status-display[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.status-display[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   p.status-name[_ngcontent-%COMP%]{font-weight:700;color:#2c3e50;text-transform:capitalize}.status-display[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   p.status-desc[_ngcontent-%COMP%]{font-size:12px;color:#7f8c8d;margin-top:4px}.status-display.status-optimal[_ngcontent-%COMP%]{background:#4caf501a}.status-display.status-optimal[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%], .status-display.status-optimal[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   p.status-name[_ngcontent-%COMP%]{color:#4caf50}.status-display.status-warning[_ngcontent-%COMP%]{background:#ffc1071a}.status-display.status-warning[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%], .status-display.status-warning[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   p.status-name[_ngcontent-%COMP%]{color:#ffc107}.status-display.status-critical[_ngcontent-%COMP%]{background:#f443361a}.status-display.status-critical[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%], .status-display.status-critical[_ngcontent-%COMP%]   .status-info[_ngcontent-%COMP%]   p.status-name[_ngcontent-%COMP%]{color:#f44336}.recommendations-section[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:40px}.recommendations-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#2c3e50;margin:0 0 24px;display:flex;align-items:center;gap:10px}.recommendations-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.recommendation-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px;background:#fff;border-radius:12px;box-shadow:0 4px 16px #0000000f;border-left:4px solid #667eea;transition:all .3s ease}.recommendation-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0}.recommendation-item[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:14px;color:#2c3e50;font-weight:500;line-height:1.5}.recommendation-item[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:0 6px 24px #0000001a}@media (max-width: 768px){.nav-content[_ngcontent-%COMP%]{flex-direction:column;gap:16px;padding:0 20px}.logo-section[_ngcontent-%COMP%]{width:100%;justify-content:center}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.user-menu[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.content[_ngcontent-%COMP%]{padding:20px}.status-section[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:flex-start}.sensor-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.sensor-card[_ngcontent-%COMP%]{padding:20px}.analysis-grid[_ngcontent-%COMP%], .analytics-grid[_ngcontent-%COMP%], .recommendations-list[_ngcontent-%COMP%]{grid-template-columns:1fr}.logout-btn[_ngcontent-%COMP%]{padding:8px 14px;font-size:12px}.logout-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}.inventory-section[_ngcontent-%COMP%]{margin-top:40px;padding:0 20px 40px}.inventory-section[_ngcontent-%COMP%]   .inventory-header[_ngcontent-%COMP%]{margin-bottom:30px}.inventory-section[_ngcontent-%COMP%]   .inventory-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:#2c3e50;margin:0}.inventory-section[_ngcontent-%COMP%]   .inventory-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:30px}.inventory-section[_ngcontent-%COMP%]   .inventory-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:25px;box-shadow:0 5px 20px #00000014;transition:all .3s ease}.inventory-section[_ngcontent-%COMP%]   .inventory-card[_ngcontent-%COMP%]:hover{box-shadow:0 10px 30px #0000001f;transform:translateY(-5px)}.inventory-section[_ngcontent-%COMP%]   .inventory-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #ecf0f1}.inventory-section[_ngcontent-%COMP%]   .inventory-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#2c3e50;margin:0}.inventory-section[_ngcontent-%COMP%]   .inventory-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:24px}.inventory-section[_ngcontent-%COMP%]   .inventory-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.inventory-section[_ngcontent-%COMP%]   .current-inventory[_ngcontent-%COMP%]   .inventory-value[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:30px 20px;background:linear-gradient(135deg,#667eea1a,#764ba21a);border-radius:10px;text-align:center}.inventory-section[_ngcontent-%COMP%]   .current-inventory[_ngcontent-%COMP%]   .inventory-value[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:48px;font-weight:700;color:#667eea;line-height:1}.inventory-section[_ngcontent-%COMP%]   .current-inventory[_ngcontent-%COMP%]   .inventory-value[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:14px;color:#7f8c8d;margin-top:10px}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]{min-height:400px}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:40px 20px;gap:15px}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #ecf0f1;border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;font-size:14px;margin:0}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;max-height:500px;overflow-y:auto}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ecf0f1;border-radius:10px}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#667eea;border-radius:10px}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#764ba2}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]{padding:12px;background:#f5f7fa;border-radius:8px;border-left:4px solid #667eea;transition:all .2s ease}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]:hover{background:#f0f2f5}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .transaction-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:15px;margin-bottom:8px}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .transaction-header[_ngcontent-%COMP%]   .transaction-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;flex:1}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .transaction-header[_ngcontent-%COMP%]   .transaction-info[_ngcontent-%COMP%]   .transaction-type[_ngcontent-%COMP%]{font-weight:600;font-size:14px;display:flex;align-items:center;gap:6px}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .transaction-header[_ngcontent-%COMP%]   .transaction-info[_ngcontent-%COMP%]   .transaction-date[_ngcontent-%COMP%]{font-size:12px;color:#7f8c8d}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .transaction-header[_ngcontent-%COMP%]   .transaction-amount[_ngcontent-%COMP%]{font-size:16px;font-weight:700;min-width:60px;text-align:right}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .transaction-details[_ngcontent-%COMP%]   .ton-sau[_ngcontent-%COMP%]{font-size:12px;color:#7f8c8d}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .transaction-details[_ngcontent-%COMP%]   .ton-sau[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c3e50;font-weight:600}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:40px 20px;color:#7f8c8d}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.inventory-section[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:12px;background:#f5f7fa;border-radius:8px;transition:all .2s ease}.inventory-section[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]:hover{background:#f0f2f5;transform:translate(3px)}.inventory-section[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]   .event-icon[_ngcontent-%COMP%]{font-size:24px;min-width:30px;text-align:center}.inventory-section[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.inventory-section[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]   .event-label[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.inventory-section[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]   .event-timestamp[_ngcontent-%COMP%]{font-size:12px;color:#7f8c8d}.inventory-section[_ngcontent-%COMP%]   .event-item.alarm-event[_ngcontent-%COMP%]{border-left:4px solid #f44336}.inventory-section[_ngcontent-%COMP%]   .event-item.door-event[_ngcontent-%COMP%]{border-left:4px solid #2196f3}.inventory-section[_ngcontent-%COMP%]   .alarm-history[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.inventory-section[_ngcontent-%COMP%]   .door-history[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#2196f3}@media (max-width: 768px){.inventory-section[_ngcontent-%COMP%]   .inventory-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.inventory-section[_ngcontent-%COMP%]   .current-inventory[_ngcontent-%COMP%]   .inventory-value[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 480px){.inventory-section[_ngcontent-%COMP%]{padding:0 15px 30px}.inventory-section[_ngcontent-%COMP%]   .inventory-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}.inventory-section[_ngcontent-%COMP%]   .inventory-card[_ngcontent-%COMP%]{padding:18px}.inventory-section[_ngcontent-%COMP%]   .inventory-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.inventory-section[_ngcontent-%COMP%]   .inventory-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:20px}.inventory-section[_ngcontent-%COMP%]   .current-inventory[_ngcontent-%COMP%]   .inventory-value[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:28px}.inventory-section[_ngcontent-%COMP%]   .current-inventory[_ngcontent-%COMP%]   .inventory-value[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:12px}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]{min-height:300px}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-list[_ngcontent-%COMP%]{max-height:400px}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .transaction-header[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.inventory-section[_ngcontent-%COMP%]   .history-card[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .transaction-header[_ngcontent-%COMP%]   .transaction-amount[_ngcontent-%COMP%]{align-self:flex-end}}@media (max-width: 480px){.logo-section[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:24px}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}.temperature-display[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .humidity-display[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:36px}.temperature-display[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%], .humidity-display[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:18px}.gauge-labels[_ngcontent-%COMP%]{font-size:10px}.summary-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .section-title[_ngcontent-%COMP%]{font-size:16px}.stat-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.recommendation-item[_ngcontent-%COMP%]{flex-direction:column;text-align:center;border-left:none;border-top:4px solid #667eea}}']})};var _x=(t,e)=>{let n=A(hr),r=A(zt);return Fu(n).pipe(an(1),Z(i=>i?!0:(r.navigate(["/login"],{queryParams:{returnUrl:e.url}}),!1)))},Mw=(t,e)=>{let n=A(hr),r=A(zt);return Fu(n).pipe(an(1),Z(i=>i?(r.navigate(["/dashboard"]),!1):!0))};var vx=[{path:"login",component:Yp,canActivate:[Mw]},{path:"register",component:Zp,canActivate:[Mw]},{path:"dashboard",component:eg,canActivate:[_x]},{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"**",redirectTo:"/dashboard"}];var Ex={production:!1,firebase:{apiKey:"AIzaSyD7aMYHrhFODq_mJIU94-IFjbKzGe_f_ww",authDomain:"fir-web-esp32.firebaseapp.com",databaseURL:"https://fir-web-esp32-default-rtdb.firebaseio.com",projectId:"fir-web-esp32",storageBucket:"fir-web-esp32.firebasestorage.app",messagingSenderId:"791113635234",appId:"1:791113635234:web:fd5cae19add68ce73e4efb"}};var Ix={providers:[Zm(),o_(),cv(vx),OA(()=>kA(Ex.firebase)),HR(()=>qR()),HM(()=>zM()),jP(()=>UP())]};var tg=class t{title=Ut("store-management");static \u0275fac=function(n){return new(n||t)};static \u0275cmp=An({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&Pe(0,"router-outlet")},dependencies:[du],encapsulation:2})};V_(tg,Ix).catch(t=>console.error(t));
